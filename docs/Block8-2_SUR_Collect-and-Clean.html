<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Collecting and Cleaning Survey Data</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KSGZ4ESKQ3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  
  gtag('config', 'G-KSGZ4ESKQ3');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">RDM Jumpstart</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 1
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block1_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block1-1_Intro-RDM.html">Introduction to Research Data Management</a>
    </li>
    <li>
      <a href="Block1-2_Intro-DMP.html">Introduction to Data Management Plans</a>
    </li>
    <li>
      <a href="Block1-3_OSF.html">Introduction to OSF</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 2
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block2_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block2-1_Files-and-Folders.html">Organizing Files and Folders</a>
    </li>
    <li>
      <a href="Block2-2_Naming-Conventions.html">Naming Conventions and Folder Structure</a>
    </li>
    <li>
      <a href="Block2-3_Documentation.html">Documentation</a>
    </li>
    <li>
      <a href="Block2-4_Documentation-in-Action.html">Documentation in Action</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 3
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block3_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block3-1_Excel-to-R.html">Reproducible Research and Moving from Excel to Scripting</a>
    </li>
    <li>
      <a href="Block3-2_Intro-to-R.html">Introduction to R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 4
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block4_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block4-1_File-Paths.html">File and Directory Paths</a>
    </li>
    <li>
      <a href="Block4-2_First-Steps.html">First Steps in R</a>
    </li>
    <li>
      <a href="Block4-3_Data-Types.html">Data Types and Structures in R</a>
    </li>
    <li>
      <a href="Block4-4_Updating-Documentation.html">Updating Documentation</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 5
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block5_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block5-1_Viz-Types.html">Types of Visualizations</a>
    </li>
    <li>
      <a href="Block5-2_ggplot.html">Visualizations with ggplot</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 6
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block6_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block6-1_Sharing-and-Deposit.html">Sharing and Depositing Data</a>
    </li>
    <li>
      <a href="Block6-2_DMP-wrap.html">DMP and Project Wrap-Up</a>
    </li>
    <li>
      <a href="Block6-3_Borealis.html">Borealis Deposit</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Bonus Blocks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block7_Bonus_Filter-and-Select.html">R: Filter and Select</a>
    </li>
    <li>
      <a href="Block7_Bonus_Saving-Output.html">R: Saving Outputs</a>
    </li>
    <li>
      <a href="Block7_Bonus_Troubleshooting.html">R: Troubleshooting</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Working with a Survey
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block8_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block8-1_SUR_Intro-to-R.html">Introduction to R</a>
    </li>
    <li>
      <a href="Block8-2_SUR_Collect-and-Clean.html">Collecting and Cleaning Survey Data</a>
    </li>
    <li>
      <a href="Block8-3_SUR_Making-Sense.html">Making Sense of Survey Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Extras
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Resources</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="codeOfConduct.html">Code of Conduct</a>
        </li>
        <li>
          <a href="Block7_EXT-RCheatsheet.html">R Cheatsheet</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Roadmaps</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-RDMRoadmap.html">RDM Roadmap</a>
        </li>
        <li>
          <a href="Block7_EXT-CRRoadmap.html">Reproducible Roadmap</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Concetps in Reproduciblity</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-BaseRtidyverse.html">Base R &amp; Tidyverse</a>
        </li>
        <li>
          <a href="Block7_EXT-ScriptsNotebooks.html">Scripts &amp; Notebooks</a>
        </li>
        <li>
          <a href="Block7_EXT-idePaths.html">IDEs &amp; Relative Paths</a>
        </li>
        <li>
          <a href="Block7_EXT-ChallengesToRDM.html">Challenges to Good RDM Practices</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Additional Content</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-dd.html">Creating a data dictionary</a>
        </li>
        <li>
          <a href="Block7_EXT-dirsFiles.html">Directories and files</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Setup</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-DMP-setup.html">DMP Assistant Setup</a>
        </li>
        <li>
          <a href="Block7_EXT-osfSetup.html">OSF Setup</a>
        </li>
        <li>
          <a href="Block7_EXT-RRStudio.html">R &amp; RStudio Setup</a>
        </li>
        <li>
          <a href="Block7_EXT-Borealis.html">Borealis Setup</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="contributors.html">Contributors</a>
    </li>
    <li>
      <a href="Feedback.html">Feedback</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Collecting and Cleaning Survey Data</h1>

</div>


<div id="collecting-and-cleaning-survey-data" class="section level2">
<h2>Collecting and Cleaning Survey Data</h2>
<p>Before we jump into cleaning survey data, it’s helpful to get a sense
of what the survey actually looks like. Ideas of survey and study design
are a bit beyond the focus of this course, but you’re encouraged to
think about these concepts as you go through these materials. If you’re
attending a session live, please feel free to ask questions and offer
insights!</p>
<div id="our-research-question" class="section level3">
<h3>Our Research Question:</h3>
</div>
<div
id="how-does-social-media-usage-influence-the-mental-health-of-university-students"
class="section level3">
<h3><strong>How does social media usage influence the mental health of
university students?</strong></h3>
<p>There could be a number of ways to address this question, but for the
purpose of this course we’re going to focus on a fairly short survey as
a way to get a sense managing this type of data.</p>
</div>
<div id="our-survey" class="section level3">
<h3>Our Survey</h3>
<p>The survey we’re going to be working with was created using Google
Forms because it is an open platform that is freely accessible to anyone
with a computer. The survey was designed in such a way to use the main
question types offered by survey tools. This will allow us to see how
these different question types produce different types of data, and then
explore how to work with these different data types. Despite using
Google Forms, the actions we’ll perform in this workshop apply to any
survey tool that you might use.</p>
<p>So to start things off, take a couple minutes to go through the
survey: <a
href="https://docs.google.com/forms/d/e/1FAIpQLScZEp7MPaCz6G9TgiiZ-q4LjAgfMFsAAa-3RhNZqHFUfrREaw/viewform?usp=header">survey
link</a></p>
</div>
<div id="our-data" class="section level3">
<h3>Our Data</h3>
<p>Now that we know what the survey / data collection looks like, let’s
take a look at the data. The dataset that we’ll be using contains mock
entries that resemble some general trends you might find in a real
survey of this kind.</p>
<p><a href="https://nickrochlin.github.io/rdm-jumpstart2/data/survey-cleaning-workshop/social-media-survey.csv" download>
Download the dataset </a></p>
<div class="question">
<p>Let’s take a look at the dataset!</p>
<ul>
<li>Is it what you expected to see?</li>
<li>Are there any fields that you think might be tricky to work
with?</li>
<li>Can you imagine how the data might need to change in order to ask
questions of it?</li>
</ul>
</div>
</div>
<div id="beginning-our-work" class="section level3">
<h3>Beginning Our Work</h3>
<p>Now that we have our data, we can start getting to work!</p>
<div class="question">
<p>The first thing we need to do is to create a project folder to keep
our files in one place. To keep everything consistent, follow these
steps:</p>
<ol style="list-style-type: decimal">
<li>Go to your <code>Desktop</code> folder</li>
<li>Create a folder called <code>social_media_project</code></li>
<li>Move the file you just downloaded, called
<code>social-media-survey.csv</code> to the
<code>social_media_project</code> folder</li>
<li>It is best practice to <strong>save a copy of your original data and
not to touch it</strong>, to retain transparency and reproducibility.
Make a copy of <code>social-media-survey.csv</code> and change the name
of the copied file to <code>social-media-survey_ORIGINAL.csv</code></li>
</ol>
</div>
<div class="note">
<p><strong>A quick note on folder and file naming</strong></p>
<p>Much like naming objects in R, that was covered in the
<a href="Block8-1_SUR_Intro-to-R.html">the Introduction to R</a>, when
naming both <strong>files and folders</strong> follow these
practices:</p>
<ul>
<li>Only use letters in the English alphabet, number 0-9, dashes -, and
underscores _</li>
<li>Do not use spaces or special characters such as:
~!@#$%^&amp;*()+=…</li>
<li>Separate naming elements with dashes - and underscores _</li>
</ul>
</div>
</div>
</div>
<div id="r-projects-working-directories" class="section level2">
<h2>R Projects &amp; Working Directories</h2>
<div id="setting-a-working-directory" class="section level3">
<h3>Setting a Working Directory</h3>
<p>When working in a coding environment like RStudio, you need to let R
(or other coding environments) know what folder you want to be working
from so you can easily access your files. This concept is know as
<strong>setting a working directory</strong>. For more information on
file paths and directories, see <a href="Block4-1_File-Paths.html">File
and Directory Paths</a></p>
<p>There are two main ways of doing this in R:</p>
<ol style="list-style-type: decimal">
<li>You can use the <code>setwd()</code> function, by manually inserting
your file path in the brackets like this:</li>
</ol>
<ul>
<li><code>setwd("directory-name/secondary-directory/etc...")</code></li>
<li>See section on <a href="Block4-1_File-Paths.html">File and Directory
Paths</a> for more information on paths.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Selecting the <code>Session</code> tab in the toolbar, and selecting
<code>Set Working Directory</code>:</li>
</ol>
<p><img src="images/Block8-2_set-wd.gif" /></p>
<p>But here’s the problem…</p>
<p>Using <code>setwd()</code> can break your code when:</p>
<ul>
<li>Someone else tries to run it on their machine.</li>
<li>You move your project folder.</li>
<li>You’re running your code on a server or in cloud environments like
RStudio Cloud.</li>
</ul>
<p>Since file paths are hardcoded and depend on your machine,
<strong>it’s not reproducible</strong>.</p>
</div>
<div id="create-an-r-project" class="section level3">
<h3>Create an R Project</h3>
<p>An R Project is a feature in RStudio (and supported in base R too)
that provides a self-contained working environment. When you create an R
Project it creates a .Rproj file in a folder and that folder becomes the
root directory of your project. Every time you open the project (via the
.Rproj file), R automatically sets the working directory to that folder.
You can reference files relative to the project root — no need to
hardcode file paths.</p>
<p>This is super useful when you’re working on multiple analyses,
sharing code with collaborators, or version-controlling with Git.
<strong>It is a good practice for reproducibility.</strong></p>
<p>To create an R Project, select File &gt; New Project</p>
<p><img src="images/day2_CreateProject.gif" /></p>
<div class="question">
<p>Let’s create our first RProject. Let’s figure out what we should call
it!</p>
</div>
</div>
</div>
<div id="lets-get-started" class="section level2">
<h2>Let’s Get Started!</h2>
<p>Let’s get started by opening a new R script.</p>
<p>To create an R script file, select File &gt; New File &gt; R
Script</p>
<p><img src="images/block3_create-r-script.gif" /></p>
<div id="packages-and-libraries" class="section level3">
<h3>Packages and Libraries</h3>
<p>Now that we’ve set our working directory, there’s one more thing to
cover before we jump into the data, which is the ideas of
<strong>packages and libraries</strong> in R.</p>
<p>When you first download R, it comes equipped with a number of
pre-installed functions, or capabilities, that you can start using
immediately. This is often called “Base R”. However, for certain tasks
and workflows, it can be beneficial to use more specialized tools, or
functions, to accomplish work and facilitate workflows more efficiently.
This is where packages and libraries come into play.</p>
<div class="note">
<ul>
<li><p><strong>Packages</strong>: Packages are an extension of the
pre-built functions in R, and can be installed to bring in specific
functions to accomplish tasks, among many other things. There are
<strong>tons</strong> of R packages out there, but here is a list of
some of the most common/useful ones: <a
href="https://support.posit.co/hc/en-us/articles/201057987-Quick-list-of-useful-R-packages">Quick
list of useful R packages</a></p></li>
<li><p><strong>Libraries</strong>: Once you have installed a package,
they are stored as libraries in R. You only have to install them once,
and anytime you want to use the package you can use the
<code>library()</code> function, which is described below.</p></li>
</ul>
</div>
</div>
<div id="tidyverse" class="section level3">
<h3>Tidyverse</h3>
<p>The Tidyverse is a very commonly used package for research and data
science activities, and instead of being a single package, it is a
collection of packages that are designed to work together and that focus
on the connections between activities in the data science workflow. Each
package follows the same syntax, which makes learning them easier, and
the website functions as a really good reference point if you’re
struggling with how to approach a specific task.</p>
<p><img src="images/block8-2_data-science-workflow.jpg" /></p>
<p>Let’s take a closer look! <a
href="https://www.tidyverse.org/packages/">Tidyverse</a></p>
<p><br></p>
</div>
<div id="install-package" class="section level3">
<h3>Install Package</h3>
<p>To install a package we use the function
<code>install.packages()</code>.</p>
<p>When you install a package, you should do this in the **R console*
because you don’t need this saved in your script.</p>
<pre class="r"><code>install.packages(&quot;tidyverse&quot;)</code></pre>
</div>
<div id="load-libraries" class="section level3">
<h3>Load Libraries</h3>
<p>Packages are stored in libraries. Once a package is installed, we
need to call the library with the function <code>library()</code>.</p>
<p>It’s best practice to load libraries in your script so that others
can see what libraries need to be loaded to run the script.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 4.5.1</code></pre>
<div class="flag">
<p>Note that the package name needs to be in quotations when installing
the package, but not when loading the library.</p>
<p>Because packages only need to be installed once, we can do this in
the R console as opposed to in the script.</p>
<p>Because libraries need to be loaded in each working session, we can
do this in the R script so that others can see what libraries we are
using and need to be loaded.</p>
</div>
</div>
</div>
<div id="reading-data" class="section level2">
<h2>Reading Data</h2>
<p><img src="images/Block8-2_import.png" /></p>
<p>In order to start working with a dataset in R, we first need to
import, or “read in”, the data. To do this, we will be using the <a
href="https://readr.tidyverse.org/">readr package</a> in the
Tidyverse.</p>
<div id="read-a-csv-file" class="section level3">
<h3>Read a csv file</h3>
<p>Because our data is in <code>.csv</code> format, we’ll be using the
<code>read_csv()</code> fuction.</p>
<p>To import a csv file we can use the <code>read_csv()</code> function
and assign it to a new object we will call <code>survey_data</code>. We
create a new object to be able to call it in different functions later
on.</p>
<pre class="r"><code>survey_data &lt;- read_csv(&quot;social-media-survey.csv&quot;)</code></pre>
</div>
</div>
<div id="exploring-data" class="section level2">
<h2>Exploring Data</h2>
<p>Before we start manipulating the data, it’s good to get a sense of
some ways to quickly explore the data.</p>
<div id="looking-at-the-dataset" class="section level3">
<h3>Looking at the Dataset</h3>
<p>To look at a spreadsheet version of your data we can use the
<code>View()</code> function.</p>
<pre class="r"><code>View(survey_data)</code></pre>
</div>
<div id="listing-column-names" class="section level3">
<h3>Listing Column Names</h3>
<p>To ask for a list of all the column names in our dataset we can use
the <code>names()</code> function.</p>
<pre class="r"><code>names(survey_data)</code></pre>
<pre><code>##  [1] &quot;Timestamp&quot;                                                    
##  [2] &quot;Name&quot;                                                         
##  [3] &quot;Email&quot;                                                        
##  [4] &quot;Age&quot;                                                          
##  [5] &quot;Gender&quot;                                                       
##  [6] &quot;Year of Study&quot;                                                
##  [7] &quot;How many hours per day do you spend on social media?&quot;         
##  [8] &quot;Which social media platforms do you use at least once a week?&quot;
##  [9] &quot;Social media makes me feel connected&quot;                         
## [10] &quot;Social media increases my stress&quot;                             
## [11] &quot;I find social media distracting from studies&quot;                 
## [12] &quot;Social media positively impacts my mood&quot;                      
## [13] &quot;Staying connected with friends/family&quot;                        
## [14] &quot;Entertainment/passing time&quot;                                   
## [15] &quot;Academic or professional networking&quot;                          
## [16] &quot;Staying informed about news/events&quot;                           
## [17] &quot;Self-expression/creativity&quot;</code></pre>
</div>
<div id="head-function" class="section level3">
<h3>Head Function</h3>
<p>The head function will display the top rows of the dataset. It will
include information about the default data type assigned to each
column.</p>
<pre class="r"><code>head(survey_data)</code></pre>
<pre><code>## # A tibble: 6 × 17
##   Timestamp      Name  Email   Age Gender `Year of Study` How many hours per d…¹
##   &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;                 
## 1 2024-01-20 1:… Tulk… tulk…    24 Male                 4 Less than 2 hours     
## 2 2024-01-24 22… Lanf… lanf…    24 Female               4 2–4 hours             
## 3 2024-04-30 10… Mat … mat.…    20 Male                 2 Less than 2 hours     
## 4 2024-06-06 15… Bifu… bifu…    23 Female               4 2–4 hours             
## 5 2024-02-07 5:… Remu… remu…    21 Male                 2 4–6 hours             
## 6 2024-01-05 21… Moir… moir…    19 Male                 1 4–6 hours             
## # ℹ abbreviated name: ¹​`How many hours per day do you spend on social media?`
## # ℹ 10 more variables:
## #   `Which social media platforms do you use at least once a week?` &lt;chr&gt;,
## #   `Social media makes me feel connected` &lt;chr&gt;,
## #   `Social media increases my stress` &lt;chr&gt;,
## #   `I find social media distracting from studies` &lt;chr&gt;,
## #   `Social media positively impacts my mood` &lt;chr&gt;, …</code></pre>
</div>
</div>
<div id="cleaning-data" class="section level2">
<h2>Cleaning Data</h2>
<p>When we talk about “cleaning data”, we’re talking about manipulating
the original data so that it’s easier to start exploring trends,
analyzing, and visualizing. As we go through this process, it can be
helpful to save different versions, or stages of the data, to help
promote a transparent and reproducible process. In this session, we’re
going to focus on some common cleaning techniques that are used on
survey data.</p>
<p>In the <a href="Block8-1_SUR_Intro-to-R.html">Introduction to R
session</a> we discussed <strong>objects</strong> and
<strong>functions</strong>, and played with the idea of objects storing
information, and functions manipulating the object/data.</p>
<p>Now we’re going to start implementing <strong>pipes</strong> as a way
to connect objects to <strong>functions</strong> and
<strong>arguments</strong>.</p>
<div id="pipes" class="section level4">
<h4>Pipes</h4>
<p>Pipes are used to chain steps of instructions or actions together,
and often involve writing over an object to give it a new value. We’ll
walk through some examples of how this works, and start to see how the
full syntax of R comes together.</p>
<p><img src="images/day2_RSyntax.png" /></p>
<p><br></p>
</div>
<div id="changing-column-names" class="section level3">
<h3>Changing Column Names</h3>
<p>You’ll notice that the column names are reflective of the questions
in the survey. Some of these will work, those that are very long and
have spaces in the names can be annoying to work with. The first step in
our cleaning will be to get all of the column names in a way that will
be easy to work with.</p>
<p>To change column names we can use the function <code>rename()</code>.
The function <code>rename()</code> is part of the <a
href="https://dplyr.tidyverse.org/index.html">dplyr package</a> that was
installed with tidyverse.</p>
<div class="walkthrough">
<p>Type the following code to change the column name from “Year of
Study” to “year_of_study”</p>
<pre class="r"><code>survey_data &lt;- survey_data |&gt;
  rename(&quot;year_of_study&quot; = &quot;Year of Study&quot;)</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ul>
<li>This command first starts off with the <code>survey_data</code>
object, which is our dataset.</li>
<li>The assignment operator comes next, and will re-write the
information stored in <code>survey_data</code> with all the information
that is to the right side of the operator.</li>
<li>We then use the <code>survey_data</code> object and the pipe
<code>|&gt;</code> to tell R that we want to take the data that is
stored in <code>survey_data</code>, and then do something to it (which
is what comes after the pipe).</li>
<li>The <code>rename</code> function is used to rename columns, and is
always followed by brackets. Inside those brackets, we’ll put the new
column name that we want in quotation marks <code>""</code>, followed by
an equal sign <code>=</code>, followed by the existing column name in
quotation marks <code>""</code>.</li>
<li>We then run the command and hope it works!</li>
</ul>
</div>
</div>
</div>
<div id="your-turn" class="section level2">
<h2>Your Turn!</h2>
<div class="question">
<p>First, use the function<code>names()</code> to display the column
names.</p>
<pre class="r"><code>names(survey_data)</code></pre>
</div>
<div class="question">
<p>Now, see if you can change the
<code>How many hours per day do you spend on social media?</code> column
name to <code>hours-per-day</code></p>
<pre class="r fold-hide"><code>survey_data &lt;- survey_data |&gt;
  rename(&quot;hours_per_day&quot; = &quot;How many hours per day do you spend on social media?&quot;) </code></pre>
</div>
<div class="question">
<p>Next, try to change the following 3 column names:</p>
<ul>
<li>Change
<code>Which social media platforms do you use at least once a week?</code>
to <code>platforms</code></li>
<li>Change <code>Social media makes me feel connected</code> to
<code>feel_connected</code></li>
<li>Change <code>Social media increases my stress</code> to
<code>feel_increase_stress</code></li>
</ul>
<p><strong>Hint:</strong> It can be tedious to do these changes one by
one, but by using commas <code>,</code> you can rename column names with
a single code chunk.</p>
<pre class="r fold-hide"><code>survey_data &lt;- survey_data |&gt;
  rename(&quot;platforms&quot; = &quot;Which social media platforms do you use at least once a week?&quot;,
          &quot;feel_connected&quot; = &quot;Social media makes me feel connected&quot;,
          &quot;feel_increase_stress&quot; = &quot;Social media increases my stress&quot;) </code></pre>
</div>
<div class="question">
<p>Now, let’s change the rest of the column names copy the following
code. (If you feel you’re starting to understand how this works, you can
show the code below and <code>cope + paste</code> it into your script,
or if you want some more practice, feel free to do it yourself!</p>
<pre class="r fold-hide"><code>survey_data &lt;- survey_data |&gt;
  rename( &quot;feel_distracted&quot; = &quot;I find social media distracting from studies&quot;,
         &quot;feel_improved_mood&quot; = &quot;Social media positively impacts my mood&quot;,
         &quot;usage_stay_in_touch&quot; = &quot;Staying connected with friends/family&quot;,
         &quot;usage_entertainment&quot; = &quot;Entertainment/passing time&quot;,
         &quot;usage_networking&quot; = &quot;Academic or professional networking&quot;,
         &quot;usage_news&quot; = &quot;Staying informed about news/events&quot;,
         &quot;usage_expression&quot; = &quot;Self-expression/creativity&quot;,
         &quot;timestamp&quot; = &quot;Timestamp&quot;,
         &quot;name&quot; = &quot;Name&quot;,
         &quot;email&quot; = &quot;Email&quot;,
         &quot;age&quot; = &quot;Age&quot;,
         &quot;gender&quot; = &quot;Gender&quot;)</code></pre>
</div>
</div>
<div id="personal-idenfiers-id-codes-and-data-versioning"
class="section level2">
<h2>Personal Idenfiers, ID Codes, and Data Versioning</h2>
<p>You probably noticed that in this survey we collected names and email
addresses. This can be necessary for several reasons, but it also poses
ethical issues with respect to who is able to see this information. It
is common practice to remove personal identifiers from survey data, but
you may also wish to create a code for each entry should you ever need
to connect information back to the respondent.</p>
<p>Let’s try this is a few steps:</p>
<div id="add-an-id-column" class="section level3">
<h3>Add an ID column</h3>
<p>The <code>mutate()</code> function, that is part of the <a
href="https://dplyr.tidyverse.org/index.html">dplyr package</a>, is
useful when you want to create new columns that are functions of
existing variables.</p>
<p>While not technically the function of an existing variable, we can
use <code>mutuate</code> with the <code>row_number()</code> function to
create a new column that will contain the number of each row, thus given
entry a unique ID number.</p>
<pre class="r"><code>survey_data &lt;- survey_data |&gt;
  mutate(ID = row_number())</code></pre>
<div class="walkthrough">
<p>You can see that the grammar works in the same way as the
<code>rename</code> function, which is one of the strengths of using the
Tidyverse.</p>
<ul>
<li>The mutate function is followed by brackets, and the first value
that is entered is what you want the new column to be called.</li>
<li>After the <code>=</code> sign, insert what is to go in the rows of
the new column.</li>
<li>In this case, <code>row_number()</code> is adding the number of the
corresponding row to the column.</li>
</ul>
<p>We’ll play with more uses of <code>mutate</code> in just a little
bit!</p>
</div>
<p><br></p>
</div>
<div id="move-the-id-column-to-the-left-most-position-of-the-data"
class="section level3">
<h3>Move the ID column to the left-most position of the data</h3>
<p>Having an ID column as the left-most, or first, column in your
dataset makes things generally easier to keep track of.</p>
<p>The <code>relocate()</code> function, which is also part of the
<strong>dplyr</strong> package, which does just what its name implies:
it relocates columns in a dataset.</p>
<p>The default of <code>relocate</code> is to put the specified column
in the first position, so we don’t need to specify location for this
task.</p>
<pre class="r"><code>survey_data &lt;- survey_data |&gt;
  relocate(ID)</code></pre>
<div class="note">
<p>Every time you make a change to your data, you can use the
<code>View(survey_data)</code> function to check what was done.</p>
</div>
<p>Before we go any further, let’s save another copy of this data. This
will allow the data holder to have a copy of the data that has both the
personal identifiers and the ID codes. We won’t be analyzing this
dataset, but it will be necessary should you need to reconnect with
respondents.</p>
<p><br></p>
<div id="saving-a-dataset" class="section level4">
<h4>Saving a dataset</h4>
<p>Much like we did with reading <code>.csv</code> data into R, there is
a similar command to save, or “write” <code>.csv</code> data back to
your computer called <code>write_csv()</code>. The syntax is as
follows:</p>
<p><code>write_csv(data-object-name, file="file-path/datafile-name.csv")</code></p>
<p>If you use the same file name as the one you are working on, it will
change that file based on what you’ve done. However, <strong>we don’t
want to touch our original data</strong>, so we’re going to make a new
file to indicate that it has clean columns, ID codes, and personal
identifiers.</p>
<pre class="r"><code>write_csv(survey_data, &quot;survey-data_clean-cols_IDs.csv&quot;)</code></pre>
</div>
</div>
<div id="back-to-cleaning" class="section level3">
<h3>Back to Cleaning!</h3>
<p>Now that we’ve saved that version of the data, let’s now remove the
<code>email</code> and <code>name</code> columns to de-identify the
dataset, and also remove some unnecessary columns.</p>
<div id="removing-columns" class="section level4">
<h4>Removing Columns</h4>
<p>There are a number of ways to remove columns in R, we’ll focus on the
the <code>select</code> function from the <code>dplyr</code> package in
Tidyverse.</p>
<p>This follows the same syntax that we’ve been using, and after the
<code>select</code> function, you insert a dash <code>-</code>, or minus
symbol, plus the name of the column you want to remove.</p>
<p>Let’s start be removing the <code>timestamp</code> column by using
its column name.</p>
<pre class="r"><code>survey_data &lt;- survey_data |&gt;
  select(-timestamp)</code></pre>
<p>You can take a look at the dataset and now see that the
<code>timestamp</code> column is now gone.</p>
<p>Let’s now remove the identifiers <code>name</code> and
<code>email</code>.</p>
<div class="question">
<p>See if you can remove the <code>name</code> and <code>email</code>
columns, as we want to get rid of the identifying variables.</p>
<p>Hint: To do this is a single command, see if you can figure out how
to use the <code>c()</code> function that was introduced in the <a
href="Block8-1_SUR_Intro-to-R.html">Introduction to R session</a></p>
<pre class="r fold-hide"><code>survey_data &lt;- survey_data |&gt;
  select(-c(name, email))</code></pre>
</div>
<p><br></p>
</div>
<div id="save-another-version-of-the-data" class="section level4">
<h4>Save Another Version of the Data</h4>
<p>Now that we have a dataset that has cleaned columns, no identifiers,
and no unnecessary columns, let’s save a copy of this should we ever
need to go back to the beginning.</p>
<pre class="r"><code>write_csv(survey_data, &quot;survey-data_clean-cols_no-ID.csv&quot;)</code></pre>
</div>
</div>
<div id="cleaning-values" class="section level3">
<h3>Cleaning Values</h3>
<p>Now that we’ve cleaned up the variables/columns, let’s take a look at
our dataset and see what values might need some work.</p>
<pre class="r"><code>View(survey_data)</code></pre>
</div>
</div>
<div id="cleaning-survey-values" class="section level2">
<h2>Cleaning Survey Values</h2>
<p>Now that we’ve cleaned up our headers, it’s time to start looking at
the values to see if we’ll be easily able to analyze them, or if they
need cleaning too.</p>
<p>If you take a look at the <code>platforms</code> column, you’ll see
that the values are pretty messy, and can include any combination of up
to 6 options. This is very hard to work with, so we’ll need to figure
out the best way to format things.</p>
<div id="wide-data-long-data-and-the-tidy-data-principles"
class="section level3">
<h3>Wide Data, Long Data, and the Tidy Data Principles</h3>
<p>When considering these types of messy columns, there are two
different strategies we can take to clean them up:</p>
<ol style="list-style-type: decimal">
<li>Make the data <strong>long, or tidy</strong>, which aims to reduce
columns but creates more rows.</li>
<li>Make the data <strong>wide</strong>, which creates more columns and
creates a wider spreadsheet.</li>
</ol>
<p>In the next session of this series, <a
href="Block8-3_SUR_Making-Sense.html">Making Sense of Survey Data</a>,
we will be looking at the pros and cons of wide vs long data, but in
this session we will focus on the techniques to play with the shape of
our data.</p>
</div>
<div id="making-data-long-or-tidy" class="section level3">
<h3>Making Data Long or “Tidy”</h3>
<p>In R, and specifically the Tidyverse, the <a
href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html">Tidy
Data Principles</a> specify qualities of what is considered “tidy data”,
with data that doesn’t meet all criteria being “messy data”. They
provide a standard way to organize data to “facilitate initial
exploration and analysis of the data, and to simplify the development of
data analysis tools that work well together” (<a
href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html">source</a>).</p>
<p><strong>Tidy Data Principles:</strong></p>
<ul>
<li>Each variable is a column.</li>
<li>Each observation is a row.</li>
<li>Each value is a cell.</li>
</ul>
<p>Here is an example of what would be considered a messy dataset:</p>
<p><img src="images/block8-2_tidy-data1.png" /></p>
<p>While structuring data in this way is much easier for a human to scan
and for summary tables, it’s trickier for a coding language to parse and
work with. The various packages of the Tidyverse are specifically geared
towards working with tidy data, and making your data tidy will make
faceting, grouping, modelling, and visualizing much easier.</p>
<p>Here’s an example of what a tidy version of this data would look
like:</p>
<p><img src="images/block8-2_tidy-data2.png" /></p>
<p>As you’ll notice, the repeating values in the <code>Name</code>
column seems clunky and weird to scan. But a way to think about think
about why this might be useful would be if instead of 3 quizs, there
were 50. Having a unique column for each would be tedious in its own
way, and this is just a single variable. There could be several sets of
wide spanning columns to capture what could be captured in a single
variable. The concept of tidy data focuses on minimizing the amount of
columns in favour of fewer columns with rich amounts of
observations.</p>
</div>
</div>
<div id="making-a-dataset-tidy" class="section level2">
<h2>Making a Dataset Tidy</h2>
<p>The <a href="https://tidyr.tidyverse.org/">tidyr</a> package in the
Tidyverse specializes in making data tidy.</p>
<p>The <code>seperate_longer_delim()</code> function specializes in
dealing with the messy values in our <code>platforms</code> column.</p>
<p>The <code>trimsw</code> function is useful to add with the
<code>sepearate_longer_delim()</code> function, because it removes all
the white space surrounding on either side of a value, avoiding any
complications this could bring up.</p>
<div class="walkthrough">
<p>Let’s give this a try!</p>
<pre class="r"><code>survey_data_long &lt;- survey_data |&gt;
  separate_longer_delim(cols = platforms, delim = &quot;,&quot;) |&gt; 
  mutate(platforms = trimws(platforms)) </code></pre>
<p><strong>Step-by-step explanation</strong></p>
<ol style="list-style-type: decimal">
<li>We start off by creating a new r object called
<code>survey_data_long</code>, which is going to take on all the
information that is passed to it from the right side of the assignment
operator <code>&lt;-</code>.</li>
<li>The <code>survey_data</code> object represents our dataset that we
want to pass through the pipe <code>|&gt;</code> to manipulate it.</li>
<li>The <code>sepearate_longer_delim</code> function is applied to the
<code>platforms</code> column to create a new row for each of the values
in the cell, and because the values separated by commas, the
<code>delim = ","</code> function tells R to separate each new row after
a comma.</li>
<li>The data object with the separate rows is then piped into the next
function, which uses the <code>mutate</code> function to tell R that we
want to modify the newly updated <code>platforms</code> values, and the
<code>trimsw</code> then removes any whitespace on either side of the
values.</li>
<li>Et voila!</li>
</ol>
</div>
<p>If we take another look at the dataset, you’ll see that the
<code>platforms</code> variable now has single observations in each
cell.</p>
<div id="more-tidying" class="section level3">
<h3>More Tidying</h3>
<p>In addition to the <code>platforms</code> variable, the survey
contained two additional multiple-choice questions:</p>
<ul>
<li><p>“Please indicate how much you agree or disagree with the
following statements about social media and your mental
health:”</p></li>
<li><p>“Rank the following reasons for using social media in order of
importance to you (1 = most important, 5 = least important):”</p></li>
</ul>
<p>You’ll notice that each of these questions create create 4 and 5
columns, respectively, to capture the responses. This isn’t necessarily
a bad thing, but in the spirit of making our data tidy, let’s see try to
reduce the amount of variables to represent these values.</p>
<div class="question">
<p>Take a look at the dataset, focusing on the variables that begin with
<code>feel-</code> and <code>usage-</code>, and think about how you
might make these variables tidy.</p>
</div>
<p>These variables are a bit trickier to conceptualize than the
platforms variable, but R has a function that is designed to handle
things like this, and will hopefully make sense when you see it!</p>
<div class="walkthrough">
<p>Here’s the code to do this:</p>
<pre class="r"><code>survey_data_longer &lt;- survey_data_long |&gt;
  pivot_longer(
    cols = starts_with(&quot;feel_&quot;),
    names_to = &quot;feel_question&quot;,
    values_to = &quot;feel_response&quot;
  )</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ol style="list-style-type: decimal">
<li>We start by writing a new r object called
<code>survey_data_longer</code>, that will hold everything to the left
of the assignment operator <code>|&gt;</code>.</li>
<li>The <code>survey_data_long</code> object represents our dataset that
we want to pass through the pipe <code>|&gt;</code> to manipulate
it.</li>
<li>The <code>pivot_longer()</code> function reshapes the data from wide
to long. In this case we had several variables that started with
<code>feel-</code>, and this function will gather them into two columns:
one for the question name and one for the response value.</li>
<li>The <code>cols = starts_with("feel-")</code> function tells
<code>pivot_longer</code> which columns to gather. (You can see why
variable naming can help with data cleaning!)</li>
<li><code>names_to = "feel_question"</code> names of the new column that
will <strong>hold the original column names</strong> (ie. the question
identifiers. The new column will be called
<code>feel_question</code>.</li>
<li><code>values_to</code> “feel_response” names the new column that
will **hold the values (answers) that used to sit in the
<code>feel-</code> columns. The new column will be called
<code>feel_response</code>.</li>
<li>Close the bracket, and take a look to see what the data looks
like.</li>
</ol>
</div>
</div>
</div>
<div id="your-turn-1" class="section level2">
<h2>Your Turn!</h2>
<div class="question">
<p>Now that you’ve seen how the <code>pivot_long()</code> function
works, see if you can create a new object called
<code>survey_data_tidy</code>, that lenghthen the <code>usage-</code>
columns just as we did with the <code>feel-</code> columns.</p>
<p>Hint: The syntax is exactly the same as the example above, you just
need to change the values in quotations <code>""</code>.</p>
<pre class="r fold-hide"><code>survey_data_tidy &lt;- survey_data_longer |&gt;
  pivot_longer(
  cols = starts_with(&quot;usage_&quot;),
  names_to = &quot;usage_question&quot;,
  values_to = &quot;usage_response&quot;
)</code></pre>
</div>
<p>Take a look at the data:</p>
<pre class="r"><code>View(survey_data_tidy)</code></pre>
<p>It looks pretty weird! As mentioned, tidy data is very hard to scan
for a human, but really easy for R to scan. You might notice that
there’s over 26,000 rows, which may seem overwhelming and unnecessary.
The Tidy Data Principles are very much geared towards using R, and there
are times when making your data completely tidy might not suite your
purpose. However, the purpose of the exercise was to get you to think
about how you might want or need to structure your data, and you now
have code that you can easily adapt to play with your surveys.</p>
<div id="save-a-copy-of-the-data" class="section level3">
<h3>Save a copy of the data</h3>
<p>Now that we’ve fully tidied our dataset, save a copy of it:</p>
<pre class="r"><code>write_csv(survey_data_tidy, &quot;survey_data_tidy.csv&quot;)</code></pre>
</div>
</div>
<div id="making-data-wide" class="section level2">
<h2>Making data wide</h2>
<p>As mentioned, there are pros and cons to making data wide and long.
The benefit of creating a wider structure is that it easier for human
eyes to scan and creating basic summary tables.</p>
<p>If we revisit the R object <code>survey_data</code>, which was saved
as the <code>survey-data_clean-cols_no-ID.csv</code> file, we can step
back to a stage in which the <code>platforms</code> variable was still
quite messy.</p>
<pre class="r"><code>View(survey_data)</code></pre>
<p>Instead of creating a new row for each of the platforms via the Tidy
Data Principles, we can make the data wider and create a new column for
each of the platforms.</p>
<div class="walkthrough">
<p>Here’s how to do this:</p>
<pre class="r"><code>survey_data_wide &lt;- survey_data |&gt;
  mutate(platforms = strsplit(platforms, &quot;,&quot;)) |&gt;
  unnest_longer(platforms) |&gt;
  mutate(platforms = trimws(platforms), present = 1) |&gt;
  pivot_wider(
    names_from = platforms,
    values_from = present,
    values_fill = 0
  )</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ol style="list-style-type: decimal">
<li>We start by writing a new r object called
<code>survey_data_wide</code>, that will hold everything to the left of
the assignment operator <code>|&gt;</code>.</li>
<li>The <code>survey_data</code> object represents our dataset that we
want to pass through the pipe <code>|&gt;</code> to manipulate it.</li>
<li>The <code>mutate</code> function is used to modify a column, which
is applied to the <code>strsplit(platforms, ",")</code> function, to
tell it to split the comma-separated strings in the
<code>platforms</code> column into lists of individual platform
names.</li>
<li>We then pipe <code>|&gt;</code> this into the
<code>unnest_longer(platforms)</code> function to expand each element
into its own row (which is like making the data longer)</li>
<li>This is then piped <code>|&gt;</code> into
<code>mutate(platforms = trimws(platforms)</code> which continues to
manipulate the <code>platforms</code> column, and much like we did when
making this variable long, the <code>trimsw</code> removes white space
surrounding the values.</li>
<li>The <code>present = 1</code> function creates a new column called
<code>present</code> that has a value of 1 for every row. This is used
as a temporary marker to indicate that the platform exists for that
survey entry, and will not be there</li>
<li>Using another pipe <code>|&gt;</code>, this information goes into
the <code>pivot_wider</code> function, that works with a very similar
syntax as <code>pivot_longer</code> that we used earlier.<br />
</li>
<li><code>names_from = platforms</code> assigns new columns to the
unique platform names.</li>
<li><code>values_from = present</code> assigns values in the new columns
to come from the <code>present</code> column, which is
<code>1</code>.</li>
<li>Finally, with <code>values_fill = 0</code>, if a platform wasn’t
present for a survey entry, that column will get the value of
<code>0</code>.</li>
</ol>
<p>This will end up with a wide dataset where each row is a survey
entry, each platform is a column, and the value <code>1</code> means a
platform was listed, and <code>0</code> means a platform was not
listed.</p>
</div>
<div id="save-a-copy-of-the-data-1" class="section level3">
<h3>Save a copy of the data</h3>
<p>Let’s save a copy of this dataset, and we’ll be taking a look at it
in the next section.</p>
<pre class="r"><code>write_csv(survey_data_wide, &quot;survey_data_wide.csv&quot;)</code></pre>
</div>
<div id="save-your-script" class="section level3">
<h3>Save your script</h3>
<p>Before we wrap up, we want to save our script. You can do this by
clicking <code>file &gt; Save As...</code>. Because we set up an
RProject, R should automatically choose the correct directory to save
your script.</p>
<p>Let’s save the script as <code>survey_cleaning_script.R</code></p>
</div>
</div>
<div id="file-management" class="section level2">
<h2>File Management</h2>
<p>With just a few steps of data cleaning, we now have 6 data files in
our folder:</p>
<ul>
<li><code>social-media-survey_ORIGINAL.csv</code></li>
<li><code>social-media-survey.csv</code></li>
<li><code>survey_data_tidy.csv</code></li>
<li><code>survey_data_wide.csv</code></li>
<li><code>survey_data.Rproj</code></li>
<li><code>survey_cleaning_script.R</code></li>
<li><code>survey-data_clean-cols_IDs.csv</code></li>
<li><code>survey-data_clean-cols_no-ID.csv</code></li>
</ul>
<p>These names aren’t necessarily bad, but you can see that there are
some inconsistencies with the naming prefix
<code>social-media-survey</code> vs <code>survey-data</code>, and some
of the descriptors, <code>clean-cols_IDs</code> and
<code>clean-cols_no-ID</code> might not be as evident as we might
like.</p>
<p>It is always recommended to document and describe your files and
naming convention in a README file, which is described in details in the
<a href="Block2-3_Documentation.html">Documentation</a> session. You can
also refer to the <a href="Block2-1_Files-and-Folders.html">Organizing
Files and Folders</a> session for inspiration in how you might go about
renaming and structuring these files.</p>
</div>
<div id="finish" class="section level2">
<h2>Finish</h2>
<p>You have now seen some of the foundational functions to clean survey
data, and the various types of data that a survey might create. The goal
of this session is to give you a sense of how to approach your own
survey data, and to be comfortable enough with these code chunks that
you can switch out the data/variables for your own surveys, and work
through them in quick and reproducible ways!</p>
</div>
<div id="temperature-check" class="section level2">
<h2>Temperature Check</h2>
<p>Click the following link: <a
href="https://app.sli.do/event/4pXxFmSvNuvPwHnf5B8GR3">Survey Cleaning
Temperature Check</a></p>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkNvbGxlY3RpbmcgYW5kIENsZWFuaW5nIFN1cnZleSBEYXRhIg0KcGFnZXRpdGxlOiAiQ29sbGVjdGluZyBhbmQgQ2xlYW5pbmcgU3VydmV5IERhdGEiDQpvdXRwdXQ6DQogIGh0bWxfZG9jdW1lbnQ6DQogICAgY29kZV9mb2xkaW5nOiBzaG93ICMgYWxsb3dzIHRvZ2dsaW5nIG9mIHNob3dpbmcgYW5kIGhpZGluZyBjb2RlLiBSZW1vdmUgaWYgbm90IHVzaW5nIGNvZGUuDQogICAgY29kZV9kb3dubG9hZDogdHJ1ZSAjIGFsbG93cyB0aGUgdXNlciB0byBkb3dubG9hZCB0aGUgc291cmNlIC5SbWQgZmlsZS4gUmVtb3ZlIGlmIG5vdCB1c2luZyBjb2RlLg0KICAgIGluY2x1ZGVzOg0KICAgICAgYWZ0ZXJfYm9keTogZm9vdGVyLmh0bWwgIyBpbmNsdWRlIGEgY3VzdG9tIGZvb3Rlci4NCiAgICB0b2M6IHRydWUNCiAgICB0b2NfZGVwdGg6IDMNCiAgICB0b2NfZmxvYXQ6DQogICAgICBjb2xsYXBzZWQ6IGZhbHNlDQogICAgICBzbW9vdGhfc2Nyb2xsOiBmYWxzZQ0KLS0tDQpgYGB7ciBzZXR1cCwgaW5jbHVkZT1GQUxTRX0NCmtuaXRyOjpvcHRzX2NodW5rJHNldChtZXNzYWdlID0gRkFMU0UsIHdhcm5pbmdzID0gRkFMU0UpDQpgYGANCg0KIyMgQ29sbGVjdGluZyBhbmQgQ2xlYW5pbmcgU3VydmV5IERhdGENCg0KQmVmb3JlIHdlIGp1bXAgaW50byBjbGVhbmluZyBzdXJ2ZXkgZGF0YSwgaXQncyBoZWxwZnVsIHRvIGdldCBhIHNlbnNlIG9mIHdoYXQgdGhlIHN1cnZleSBhY3R1YWxseSBsb29rcyBsaWtlLiBJZGVhcyBvZiBzdXJ2ZXkgYW5kIHN0dWR5IGRlc2lnbiBhcmUgYSBiaXQgYmV5b25kIHRoZSBmb2N1cyBvZiB0aGlzIGNvdXJzZSwgYnV0IHlvdSdyZSBlbmNvdXJhZ2VkIHRvIHRoaW5rIGFib3V0IHRoZXNlIGNvbmNlcHRzIGFzIHlvdSBnbyB0aHJvdWdoIHRoZXNlIG1hdGVyaWFscy4gSWYgeW91J3JlIGF0dGVuZGluZyBhIHNlc3Npb24gbGl2ZSwgcGxlYXNlIGZlZWwgZnJlZSB0byBhc2sgcXVlc3Rpb25zIGFuZCBvZmZlciBpbnNpZ2h0cyENCg0KIyMjIE91ciBSZXNlYXJjaCBRdWVzdGlvbjogDQojIyMgKipIb3cgZG9lcyBzb2NpYWwgbWVkaWEgdXNhZ2UgaW5mbHVlbmNlIHRoZSBtZW50YWwgaGVhbHRoIG9mIHVuaXZlcnNpdHkgc3R1ZGVudHM/KioNCg0KVGhlcmUgY291bGQgYmUgYSBudW1iZXIgb2Ygd2F5cyB0byBhZGRyZXNzIHRoaXMgcXVlc3Rpb24sIGJ1dCBmb3IgdGhlIHB1cnBvc2Ugb2YgdGhpcyBjb3Vyc2Ugd2UncmUgZ29pbmcgdG8gZm9jdXMgb24gYSBmYWlybHkgc2hvcnQgc3VydmV5IGFzIGEgd2F5IHRvIGdldCBhIHNlbnNlIG1hbmFnaW5nIHRoaXMgdHlwZSBvZiBkYXRhLiAgDQoNCiMjIyBPdXIgU3VydmV5DQoNClRoZSBzdXJ2ZXkgd2UncmUgZ29pbmcgdG8gYmUgd29ya2luZyB3aXRoIHdhcyBjcmVhdGVkIHVzaW5nIEdvb2dsZSBGb3JtcyBiZWNhdXNlIGl0IGlzIGFuIG9wZW4gcGxhdGZvcm0gdGhhdCBpcyBmcmVlbHkgYWNjZXNzaWJsZSB0byBhbnlvbmUgd2l0aCBhIGNvbXB1dGVyLiAgVGhlIHN1cnZleSB3YXMgZGVzaWduZWQgaW4gc3VjaCBhIHdheSB0byB1c2UgdGhlIG1haW4gcXVlc3Rpb24gdHlwZXMgb2ZmZXJlZCBieSBzdXJ2ZXkgdG9vbHMuICBUaGlzIHdpbGwgYWxsb3cgdXMgdG8gc2VlIGhvdyB0aGVzZSBkaWZmZXJlbnQgcXVlc3Rpb24gdHlwZXMgcHJvZHVjZSBkaWZmZXJlbnQgdHlwZXMgb2YgZGF0YSwgYW5kIHRoZW4gZXhwbG9yZSBob3cgdG8gd29yayB3aXRoIHRoZXNlIGRpZmZlcmVudCBkYXRhIHR5cGVzLiAgRGVzcGl0ZSB1c2luZyBHb29nbGUgRm9ybXMsIHRoZSBhY3Rpb25zIHdlJ2xsIHBlcmZvcm0gaW4gdGhpcyB3b3Jrc2hvcCBhcHBseSB0byBhbnkgc3VydmV5IHRvb2wgdGhhdCB5b3UgbWlnaHQgdXNlLg0KDQpTbyB0byBzdGFydCB0aGluZ3Mgb2ZmLCB0YWtlIGEgY291cGxlIG1pbnV0ZXMgdG8gZ28gdGhyb3VnaCB0aGUgc3VydmV5OiBbc3VydmV5IGxpbmtdKGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2Zvcm1zL2QvZS8xRkFJcFFMU2NaRXA3TVBhQ3o2RzlUZ2lpWi1xNExqQWdmTUZzQUFhLTNSaE5acUhGVWZyUkVhdy92aWV3Zm9ybT91c3A9aGVhZGVyKQ0KDQojIyMgT3VyIERhdGENCg0KTm93IHRoYXQgd2Uga25vdyB3aGF0IHRoZSBzdXJ2ZXkgLyBkYXRhIGNvbGxlY3Rpb24gbG9va3MgbGlrZSwgbGV0J3MgdGFrZSBhIGxvb2sgYXQgdGhlIGRhdGEuICBUaGUgZGF0YXNldCB0aGF0IHdlJ2xsIGJlIHVzaW5nIGNvbnRhaW5zIG1vY2sgZW50cmllcyB0aGF0IHJlc2VtYmxlIHNvbWUgZ2VuZXJhbCB0cmVuZHMgeW91IG1pZ2h0IGZpbmQgaW4gYSByZWFsIHN1cnZleSBvZiB0aGlzIGtpbmQuDQoNCjxhIGhyZWY9Imh0dHBzOi8vbmlja3JvY2hsaW4uZ2l0aHViLmlvL3JkbS1qdW1wc3RhcnQyL2RhdGEvc3VydmV5LWNsZWFuaW5nLXdvcmtzaG9wL3NvY2lhbC1tZWRpYS1zdXJ2ZXkuY3N2IiBkb3dubG9hZD4NCiAgRG93bmxvYWQgdGhlIGRhdGFzZXQNCjwvYT4NCg0KOjo6cXVlc3Rpb24NCg0KTGV0J3MgdGFrZSBhIGxvb2sgYXQgdGhlIGRhdGFzZXQhDQoNCiogSXMgaXQgd2hhdCB5b3UgZXhwZWN0ZWQgdG8gc2VlPw0KKiBBcmUgdGhlcmUgYW55IGZpZWxkcyB0aGF0IHlvdSB0aGluayBtaWdodCBiZSB0cmlja3kgdG8gd29yayB3aXRoPw0KKiBDYW4geW91IGltYWdpbmUgaG93IHRoZSBkYXRhIG1pZ2h0IG5lZWQgdG8gY2hhbmdlIGluIG9yZGVyIHRvIGFzayBxdWVzdGlvbnMgb2YgaXQ/DQoNCjo6Og0KDQoNCiMjIyBCZWdpbm5pbmcgT3VyIFdvcmsNCg0KTm93IHRoYXQgd2UgaGF2ZSBvdXIgZGF0YSwgd2UgY2FuIHN0YXJ0IGdldHRpbmcgdG8gd29yayEgIA0KDQo6OjpxdWVzdGlvbg0KDQpUaGUgZmlyc3QgdGhpbmcgd2UgbmVlZCB0byBkbyBpcyB0byBjcmVhdGUgYSBwcm9qZWN0IGZvbGRlciB0byBrZWVwIG91ciBmaWxlcyBpbiBvbmUgcGxhY2UuIFRvIGtlZXAgZXZlcnl0aGluZyBjb25zaXN0ZW50LCBmb2xsb3cgdGhlc2Ugc3RlcHM6DQoNCjEpIEdvIHRvIHlvdXIgYERlc2t0b3BgIGZvbGRlcg0KMikgQ3JlYXRlIGEgZm9sZGVyIGNhbGxlZCBgc29jaWFsX21lZGlhX3Byb2plY3RgDQozKSBNb3ZlIHRoZSBmaWxlIHlvdSBqdXN0IGRvd25sb2FkZWQsIGNhbGxlZCBgc29jaWFsLW1lZGlhLXN1cnZleS5jc3ZgIHRvIHRoZSBgc29jaWFsX21lZGlhX3Byb2plY3RgIGZvbGRlcg0KNCkgSXQgaXMgYmVzdCBwcmFjdGljZSB0byAqKnNhdmUgYSBjb3B5IG9mIHlvdXIgb3JpZ2luYWwgZGF0YSBhbmQgbm90IHRvIHRvdWNoIGl0KiosIHRvIHJldGFpbiB0cmFuc3BhcmVuY3kgYW5kIHJlcHJvZHVjaWJpbGl0eS4gTWFrZSBhIGNvcHkgb2YgYHNvY2lhbC1tZWRpYS1zdXJ2ZXkuY3N2YCBhbmQgY2hhbmdlIHRoZSBuYW1lIG9mIHRoZSBjb3BpZWQgZmlsZSB0byBgc29jaWFsLW1lZGlhLXN1cnZleV9PUklHSU5BTC5jc3ZgDQoNCjo6Og0KDQo6Ojpub3RlDQoNCioqQSBxdWljayBub3RlIG9uIGZvbGRlciBhbmQgZmlsZSBuYW1pbmcqKg0KDQpNdWNoIGxpa2UgbmFtaW5nIG9iamVjdHMgaW4gUiwgdGhhdCB3YXMgY292ZXJlZCBpbiB0aGUgPGEgaHJlZj0iQmxvY2s4LTFfU1VSX0ludHJvLXRvLVIuaHRtbCI+dGhlIEludHJvZHVjdGlvbiB0byBSPC9hPiwgd2hlbiBuYW1pbmcgYm90aCAqKmZpbGVzIGFuZCBmb2xkZXJzKiogZm9sbG93IHRoZXNlIHByYWN0aWNlczoNCg0KKiBPbmx5IHVzZSBsZXR0ZXJzIGluIHRoZSBFbmdsaXNoIGFscGhhYmV0LCBudW1iZXIgMC05LCBkYXNoZXMgLSwgYW5kIHVuZGVyc2NvcmVzIF8NCiogRG8gbm90IHVzZSBzcGFjZXMgb3Igc3BlY2lhbCBjaGFyYWN0ZXJzIHN1Y2ggYXM6IH4hQCMkJV4mKigpKz3igKYNCiogU2VwYXJhdGUgbmFtaW5nIGVsZW1lbnRzIHdpdGggZGFzaGVzIC0gYW5kIHVuZGVyc2NvcmVzIF8NCg0KOjo6DQoNCiMjIFIgUHJvamVjdHMgJiBXb3JraW5nIERpcmVjdG9yaWVzDQoNCiMjIyBTZXR0aW5nIGEgV29ya2luZyBEaXJlY3RvcnkNCg0KV2hlbiB3b3JraW5nIGluIGEgY29kaW5nIGVudmlyb25tZW50IGxpa2UgUlN0dWRpbywgeW91IG5lZWQgdG8gbGV0IFIgKG9yIG90aGVyIGNvZGluZyBlbnZpcm9ubWVudHMpIGtub3cgd2hhdCBmb2xkZXIgeW91IHdhbnQgdG8gYmUgd29ya2luZyBmcm9tIHNvIHlvdSBjYW4gZWFzaWx5IGFjY2VzcyB5b3VyIGZpbGVzLiAgVGhpcyBjb25jZXB0IGlzIGtub3cgYXMgKipzZXR0aW5nIGEgd29ya2luZyBkaXJlY3RvcnkqKi4gIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGZpbGUgcGF0aHMgYW5kIGRpcmVjdG9yaWVzLCBzZWUgPGEgaHJlZj0iQmxvY2s0LTFfRmlsZS1QYXRocy5odG1sIj5GaWxlIGFuZCBEaXJlY3RvcnkgUGF0aHM8L2E+DQoNClRoZXJlIGFyZSB0d28gbWFpbiB3YXlzIG9mIGRvaW5nIHRoaXMgaW4gUjoNCg0KMSkgWW91IGNhbiB1c2UgdGhlIGBzZXR3ZCgpYCBmdW5jdGlvbiwgYnkgbWFudWFsbHkgaW5zZXJ0aW5nIHlvdXIgZmlsZSBwYXRoIGluIHRoZSBicmFja2V0cyBsaWtlIHRoaXM6DQogICogYHNldHdkKCJkaXJlY3RvcnktbmFtZS9zZWNvbmRhcnktZGlyZWN0b3J5L2V0Yy4uLiIpYCANCiAgKiBTZWUgc2VjdGlvbiBvbiBbRmlsZSBhbmQgRGlyZWN0b3J5IFBhdGhzXShCbG9jazQtMV9GaWxlLVBhdGhzLmh0bWwpIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHBhdGhzLg0KICANCjIpIFNlbGVjdGluZyB0aGUgYFNlc3Npb25gIHRhYiBpbiB0aGUgdG9vbGJhciwgYW5kIHNlbGVjdGluZyBgU2V0IFdvcmtpbmcgRGlyZWN0b3J5YDoNCg0KIVtdKGltYWdlcy9CbG9jazgtMl9zZXQtd2QuZ2lmKQ0KDQpCdXQgaGVyZeKAmXMgdGhlIHByb2JsZW0uLi4NCg0KVXNpbmcgYHNldHdkKClgIGNhbiBicmVhayB5b3VyIGNvZGUgd2hlbjoNCg0KIC0gU29tZW9uZSBlbHNlIHRyaWVzIHRvIHJ1biBpdCBvbiB0aGVpciBtYWNoaW5lLg0KIC0gWW91IG1vdmUgeW91ciBwcm9qZWN0IGZvbGRlci4NCiAtIFlvdSdyZSBydW5uaW5nIHlvdXIgY29kZSBvbiBhIHNlcnZlciBvciBpbiBjbG91ZCBlbnZpcm9ubWVudHMgbGlrZSBSU3R1ZGlvIENsb3VkLg0KDQpTaW5jZSBmaWxlIHBhdGhzIGFyZSBoYXJkY29kZWQgYW5kIGRlcGVuZCBvbiB5b3VyIG1hY2hpbmUsICoqaXQncyBub3QgcmVwcm9kdWNpYmxlKiouDQoNCiMjIyBDcmVhdGUgYW4gUiBQcm9qZWN0DQoNCkFuIFIgUHJvamVjdCBpcyBhIGZlYXR1cmUgaW4gUlN0dWRpbyAoYW5kIHN1cHBvcnRlZCBpbiBiYXNlIFIgdG9vKSB0aGF0IHByb3ZpZGVzIGEgc2VsZi1jb250YWluZWQgd29ya2luZyBlbnZpcm9ubWVudC4gV2hlbiB5b3UgY3JlYXRlIGFuIFIgUHJvamVjdCBpdCBjcmVhdGVzIGEgLlJwcm9qIGZpbGUgaW4gYSBmb2xkZXIgYW5kIHRoYXQgZm9sZGVyIGJlY29tZXMgdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHlvdXIgcHJvamVjdC4gRXZlcnkgdGltZSB5b3Ugb3BlbiB0aGUgcHJvamVjdCAodmlhIHRoZSAuUnByb2ogZmlsZSksIFIgYXV0b21hdGljYWxseSBzZXRzIHRoZSB3b3JraW5nIGRpcmVjdG9yeSB0byB0aGF0IGZvbGRlci4gWW91IGNhbiByZWZlcmVuY2UgZmlsZXMgcmVsYXRpdmUgdG8gdGhlIHByb2plY3Qgcm9vdCDigJQgbm8gbmVlZCB0byBoYXJkY29kZSBmaWxlIHBhdGhzLg0KDQpUaGlzIGlzIHN1cGVyIHVzZWZ1bCB3aGVuIHlvdSdyZSB3b3JraW5nIG9uIG11bHRpcGxlIGFuYWx5c2VzLCBzaGFyaW5nIGNvZGUgd2l0aCBjb2xsYWJvcmF0b3JzLCBvciB2ZXJzaW9uLWNvbnRyb2xsaW5nIHdpdGggR2l0LiAqKkl0IGlzIGEgZ29vZCBwcmFjdGljZSBmb3IgcmVwcm9kdWNpYmlsaXR5LioqDQoNClRvIGNyZWF0ZSBhbiBSIFByb2plY3QsIHNlbGVjdCBGaWxlID4gTmV3IFByb2plY3QNCg0KIVtdKGltYWdlcy9kYXkyX0NyZWF0ZVByb2plY3QuZ2lmKQ0KDQoNCjo6OnF1ZXN0aW9uDQpMZXQncyBjcmVhdGUgb3VyIGZpcnN0IFJQcm9qZWN0LiBMZXQncyBmaWd1cmUgb3V0IHdoYXQgd2Ugc2hvdWxkIGNhbGwgaXQhDQo6OjoNCg0KIyMgTGV0J3MgR2V0IFN0YXJ0ZWQhDQoNCkxldCdzIGdldCBzdGFydGVkIGJ5IG9wZW5pbmcgYSBuZXcgUiBzY3JpcHQuDQoNClRvIGNyZWF0ZSBhbiBSIHNjcmlwdCBmaWxlLCBzZWxlY3QgRmlsZSA+IE5ldyBGaWxlID4gUiBTY3JpcHQNCg0KIVtdKGltYWdlcy9ibG9jazNfY3JlYXRlLXItc2NyaXB0LmdpZikNCg0KDQojIyMgUGFja2FnZXMgYW5kIExpYnJhcmllcw0KDQpOb3cgdGhhdCB3ZSd2ZSBzZXQgb3VyIHdvcmtpbmcgZGlyZWN0b3J5LCB0aGVyZSdzIG9uZSBtb3JlIHRoaW5nIHRvIGNvdmVyIGJlZm9yZSB3ZSBqdW1wIGludG8gdGhlIGRhdGEsIHdoaWNoIGlzIHRoZSBpZGVhcyBvZiAqKnBhY2thZ2VzIGFuZCBsaWJyYXJpZXMqKiBpbiBSLg0KDQpXaGVuIHlvdSBmaXJzdCBkb3dubG9hZCBSLCBpdCBjb21lcyBlcXVpcHBlZCB3aXRoIGEgbnVtYmVyIG9mIHByZS1pbnN0YWxsZWQgZnVuY3Rpb25zLCBvciBjYXBhYmlsaXRpZXMsIHRoYXQgeW91IGNhbiBzdGFydCB1c2luZyBpbW1lZGlhdGVseS4gIFRoaXMgaXMgb2Z0ZW4gY2FsbGVkICJCYXNlIFIiLiAgSG93ZXZlciwgZm9yIGNlcnRhaW4gdGFza3MgYW5kIHdvcmtmbG93cywgaXQgY2FuIGJlIGJlbmVmaWNpYWwgdG8gdXNlIG1vcmUgc3BlY2lhbGl6ZWQgdG9vbHMsIG9yIGZ1bmN0aW9ucywgdG8gYWNjb21wbGlzaCB3b3JrIGFuZCBmYWNpbGl0YXRlIHdvcmtmbG93cyBtb3JlIGVmZmljaWVudGx5LiAgVGhpcyBpcyB3aGVyZSBwYWNrYWdlcyBhbmQgbGlicmFyaWVzIGNvbWUgaW50byBwbGF5Lg0KDQo6Ojpub3RlDQoNCiogKipQYWNrYWdlcyoqOiBQYWNrYWdlcyBhcmUgYW4gZXh0ZW5zaW9uIG9mIHRoZSBwcmUtYnVpbHQgZnVuY3Rpb25zIGluIFIsIGFuZCBjYW4gYmUgaW5zdGFsbGVkIHRvIGJyaW5nIGluIHNwZWNpZmljIGZ1bmN0aW9ucyB0byBhY2NvbXBsaXNoIHRhc2tzLCBhbW9uZyBtYW55IG90aGVyIHRoaW5ncy4gIFRoZXJlIGFyZSAqKnRvbnMqKiBvZiBSIHBhY2thZ2VzIG91dCB0aGVyZSwgYnV0IGhlcmUgaXMgYSBsaXN0IG9mIHNvbWUgb2YgdGhlIG1vc3QgY29tbW9uL3VzZWZ1bCBvbmVzOiBbUXVpY2sgbGlzdCBvZiB1c2VmdWwgUiBwYWNrYWdlc10oaHR0cHM6Ly9zdXBwb3J0LnBvc2l0LmNvL2hjL2VuLXVzL2FydGljbGVzLzIwMTA1Nzk4Ny1RdWljay1saXN0LW9mLXVzZWZ1bC1SLXBhY2thZ2VzKQ0KDQoqICoqTGlicmFyaWVzKio6IE9uY2UgeW91IGhhdmUgaW5zdGFsbGVkIGEgcGFja2FnZSwgdGhleSBhcmUgc3RvcmVkIGFzIGxpYnJhcmllcyBpbiBSLiAgWW91IG9ubHkgaGF2ZSB0byBpbnN0YWxsIHRoZW0gb25jZSwgYW5kIGFueXRpbWUgeW91IHdhbnQgdG8gdXNlIHRoZSBwYWNrYWdlIHlvdSBjYW4gdXNlIHRoZSBgbGlicmFyeSgpYCBmdW5jdGlvbiwgd2hpY2ggaXMgZGVzY3JpYmVkIGJlbG93Lg0KDQo6OjoNCg0KDQojIyMgVGlkeXZlcnNlDQoNClRoZSBUaWR5dmVyc2UgaXMgYSB2ZXJ5IGNvbW1vbmx5IHVzZWQgcGFja2FnZSBmb3IgcmVzZWFyY2ggYW5kIGRhdGEgc2NpZW5jZSBhY3Rpdml0aWVzLCBhbmQgaW5zdGVhZCBvZiBiZWluZyBhIHNpbmdsZSBwYWNrYWdlLCBpdCBpcyBhIGNvbGxlY3Rpb24gb2YgcGFja2FnZXMgdGhhdCBhcmUgZGVzaWduZWQgdG8gd29yayB0b2dldGhlciBhbmQgdGhhdCBmb2N1cyBvbiB0aGUgY29ubmVjdGlvbnMgYmV0d2VlbiBhY3Rpdml0aWVzIGluIHRoZSBkYXRhIHNjaWVuY2Ugd29ya2Zsb3cuICBFYWNoIHBhY2thZ2UgZm9sbG93cyB0aGUgc2FtZSBzeW50YXgsIHdoaWNoIG1ha2VzIGxlYXJuaW5nIHRoZW0gZWFzaWVyLCBhbmQgdGhlIHdlYnNpdGUgZnVuY3Rpb25zIGFzIGEgcmVhbGx5IGdvb2QgcmVmZXJlbmNlIHBvaW50IGlmIHlvdSdyZSBzdHJ1Z2dsaW5nIHdpdGggaG93IHRvIGFwcHJvYWNoIGEgc3BlY2lmaWMgdGFzay4NCg0KIVtdKGltYWdlcy9ibG9jazgtMl9kYXRhLXNjaWVuY2Utd29ya2Zsb3cuanBnKQ0KDQoNCg0KTGV0J3MgdGFrZSBhIGNsb3NlciBsb29rISAgW1RpZHl2ZXJzZV0oaHR0cHM6Ly93d3cudGlkeXZlcnNlLm9yZy9wYWNrYWdlcy8pDQoNCjxicj4NCg0KIyMjIEluc3RhbGwgUGFja2FnZQ0KVG8gaW5zdGFsbCBhIHBhY2thZ2Ugd2UgdXNlIHRoZSBmdW5jdGlvbiBgaW5zdGFsbC5wYWNrYWdlcygpYC4gDQoNCldoZW4geW91IGluc3RhbGwgYSBwYWNrYWdlLCB5b3Ugc2hvdWxkIGRvIHRoaXMgaW4gdGhlICoqUiBjb25zb2xlKiBiZWNhdXNlIHlvdSBkb24ndCBuZWVkIHRoaXMgc2F2ZWQgaW4geW91ciBzY3JpcHQuDQoNCmBgYHtyLCBldmFsPUZBTFNFfQ0KaW5zdGFsbC5wYWNrYWdlcygidGlkeXZlcnNlIikNCmBgYA0KDQojIyMgTG9hZCBMaWJyYXJpZXMNClBhY2thZ2VzIGFyZSBzdG9yZWQgaW4gbGlicmFyaWVzLiBPbmNlIGEgcGFja2FnZSBpcyBpbnN0YWxsZWQsIHdlIG5lZWQgdG8gY2FsbCB0aGUgbGlicmFyeSB3aXRoIHRoZSBmdW5jdGlvbiBgbGlicmFyeSgpYC4gIA0KDQpJdCdzIGJlc3QgcHJhY3RpY2UgdG8gbG9hZCBsaWJyYXJpZXMgaW4geW91ciBzY3JpcHQgc28gdGhhdCBvdGhlcnMgY2FuIHNlZSB3aGF0IGxpYnJhcmllcyBuZWVkIHRvIGJlIGxvYWRlZCB0byBydW4gdGhlIHNjcmlwdC4NCg0KYGBge3J9DQpsaWJyYXJ5KHRpZHl2ZXJzZSkNCmBgYA0KDQo6OjpmbGFnDQpOb3RlIHRoYXQgdGhlIHBhY2thZ2UgbmFtZSBuZWVkcyB0byBiZSBpbiBxdW90YXRpb25zIHdoZW4gaW5zdGFsbGluZyB0aGUgcGFja2FnZSwgYnV0IG5vdCB3aGVuIGxvYWRpbmcgdGhlIGxpYnJhcnkuDQoNCkJlY2F1c2UgcGFja2FnZXMgb25seSBuZWVkIHRvIGJlIGluc3RhbGxlZCBvbmNlLCB3ZSBjYW4gZG8gdGhpcyBpbiB0aGUgUiBjb25zb2xlIGFzIG9wcG9zZWQgdG8gaW4gdGhlIHNjcmlwdC4NCg0KQmVjYXVzZSBsaWJyYXJpZXMgbmVlZCB0byBiZSBsb2FkZWQgaW4gZWFjaCB3b3JraW5nIHNlc3Npb24sIHdlIGNhbiBkbyB0aGlzIGluIHRoZSBSIHNjcmlwdCBzbyB0aGF0IG90aGVycyBjYW4gc2VlIHdoYXQgbGlicmFyaWVzIHdlIGFyZSB1c2luZyBhbmQgbmVlZCB0byBiZSBsb2FkZWQuDQo6OjoNCg0KIyMgUmVhZGluZyBEYXRhDQoNCiFbXShpbWFnZXMvQmxvY2s4LTJfaW1wb3J0LnBuZykNCg0KSW4gb3JkZXIgdG8gc3RhcnQgd29ya2luZyB3aXRoIGEgZGF0YXNldCBpbiBSLCB3ZSBmaXJzdCBuZWVkIHRvIGltcG9ydCwgb3IgInJlYWQgaW4iLCB0aGUgZGF0YS4gIFRvIGRvIHRoaXMsIHdlIHdpbGwgYmUgdXNpbmcgdGhlIFtyZWFkciBwYWNrYWdlXShodHRwczovL3JlYWRyLnRpZHl2ZXJzZS5vcmcvKSBpbiB0aGUgVGlkeXZlcnNlLiANCg0KIyMjIFJlYWQgYSBjc3YgZmlsZQ0KQmVjYXVzZSBvdXIgZGF0YSBpcyBpbiBgLmNzdmAgZm9ybWF0LCB3ZSdsbCBiZSB1c2luZyB0aGUgYHJlYWRfY3N2KClgIGZ1Y3Rpb24uDQoNClRvIGltcG9ydCBhIGNzdiBmaWxlIHdlIGNhbiB1c2UgdGhlIGByZWFkX2NzdigpYCBmdW5jdGlvbiBhbmQgYXNzaWduIGl0IHRvIGEgbmV3IG9iamVjdCB3ZSB3aWxsIGNhbGwgYHN1cnZleV9kYXRhYC4gV2UgY3JlYXRlIGEgbmV3IG9iamVjdCB0byBiZSBhYmxlIHRvIGNhbGwgaXQgaW4gZGlmZmVyZW50IGZ1bmN0aW9ucyBsYXRlciBvbi4NCmBgYHtyLCBldmFsPUZBTFNFfQ0Kc3VydmV5X2RhdGEgPC0gcmVhZF9jc3YoInNvY2lhbC1tZWRpYS1zdXJ2ZXkuY3N2IikNCmBgYA0KDQpgYGB7ciwgaW5jbHVkZT1GQUxTRX0NCnN1cnZleV9kYXRhIDwtIHJlYWRfY3N2KCJkYXRhL3N1cnZleS1jbGVhbmluZy13b3Jrc2hvcC9zb2NpYWwtbWVkaWEtc3VydmV5LmNzdiIpDQpgYGANCg0KDQojIyBFeHBsb3JpbmcgRGF0YQ0KDQpCZWZvcmUgd2Ugc3RhcnQgbWFuaXB1bGF0aW5nIHRoZSBkYXRhLCBpdCdzIGdvb2QgdG8gZ2V0IGEgc2Vuc2Ugb2Ygc29tZSB3YXlzIHRvIHF1aWNrbHkgZXhwbG9yZSB0aGUgZGF0YS4NCg0KIyMjIExvb2tpbmcgYXQgdGhlIERhdGFzZXQNClRvIGxvb2sgYXQgYSBzcHJlYWRzaGVldCB2ZXJzaW9uIG9mIHlvdXIgZGF0YSB3ZSBjYW4gdXNlIHRoZSBgVmlldygpYCBmdW5jdGlvbi4NCmBgYHtyLCBldmFsPVRSVUV9DQpWaWV3KHN1cnZleV9kYXRhKQ0KYGBgDQoNCiMjIyBMaXN0aW5nIENvbHVtbiBOYW1lcw0KVG8gYXNrIGZvciBhIGxpc3Qgb2YgYWxsIHRoZSBjb2x1bW4gbmFtZXMgaW4gb3VyIGRhdGFzZXQgd2UgY2FuIHVzZSB0aGUgYG5hbWVzKClgIGZ1bmN0aW9uLg0KYGBge3IsIGV2YWw9VFJVRX0NCm5hbWVzKHN1cnZleV9kYXRhKQ0KYGBgDQoNCg0KIyMjIEhlYWQgRnVuY3Rpb24NClRoZSBoZWFkIGZ1bmN0aW9uIHdpbGwgZGlzcGxheSB0aGUgdG9wIHJvd3Mgb2YgdGhlIGRhdGFzZXQuIEl0IHdpbGwgaW5jbHVkZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZGVmYXVsdCBkYXRhIHR5cGUgYXNzaWduZWQgdG8gZWFjaCBjb2x1bW4uDQpgYGB7ciwgZXZhbD1UUlVFfQ0KaGVhZChzdXJ2ZXlfZGF0YSkNCmBgYA0KDQoNCiMjIENsZWFuaW5nIERhdGENCg0KV2hlbiB3ZSB0YWxrIGFib3V0ICJjbGVhbmluZyBkYXRhIiwgd2UncmUgdGFsa2luZyBhYm91dCBtYW5pcHVsYXRpbmcgdGhlIG9yaWdpbmFsIGRhdGEgc28gdGhhdCBpdCdzIGVhc2llciB0byBzdGFydCBleHBsb3JpbmcgdHJlbmRzLCBhbmFseXppbmcsIGFuZCB2aXN1YWxpemluZy4gIEFzIHdlIGdvIHRocm91Z2ggdGhpcyBwcm9jZXNzLCBpdCBjYW4gYmUgaGVscGZ1bCB0byBzYXZlIGRpZmZlcmVudCB2ZXJzaW9ucywgb3Igc3RhZ2VzIG9mIHRoZSBkYXRhLCB0byBoZWxwIHByb21vdGUgYSB0cmFuc3BhcmVudCBhbmQgcmVwcm9kdWNpYmxlIHByb2Nlc3MuICBJbiB0aGlzIHNlc3Npb24sIHdlJ3JlIGdvaW5nIHRvIGZvY3VzIG9uIHNvbWUgY29tbW9uIGNsZWFuaW5nIHRlY2huaXF1ZXMgdGhhdCBhcmUgdXNlZCBvbiBzdXJ2ZXkgZGF0YS4gIA0KDQpJbiB0aGUgW0ludHJvZHVjdGlvbiB0byBSIHNlc3Npb25dKEJsb2NrOC0xX1NVUl9JbnRyby10by1SLmh0bWwpIHdlIGRpc2N1c3NlZCAqKm9iamVjdHMqKiBhbmQgKipmdW5jdGlvbnMqKiwgYW5kIHBsYXllZCB3aXRoIHRoZSBpZGVhIG9mIG9iamVjdHMgc3RvcmluZyBpbmZvcm1hdGlvbiwgYW5kIGZ1bmN0aW9ucyBtYW5pcHVsYXRpbmcgdGhlIG9iamVjdC9kYXRhLg0KDQpOb3cgd2UncmUgZ29pbmcgdG8gc3RhcnQgaW1wbGVtZW50aW5nICoqcGlwZXMqKiBhcyBhIHdheSB0byBjb25uZWN0IG9iamVjdHMgdG8gKipmdW5jdGlvbnMqKiBhbmQgKiphcmd1bWVudHMqKi4NCg0KIyMjIyBQaXBlcw0KDQpQaXBlcyBhcmUgdXNlZCB0byBjaGFpbiBzdGVwcyBvZiBpbnN0cnVjdGlvbnMgb3IgYWN0aW9ucyB0b2dldGhlciwgYW5kIG9mdGVuIGludm9sdmUgd3JpdGluZyBvdmVyIGFuIG9iamVjdCB0byBnaXZlIGl0IGEgbmV3IHZhbHVlLiBXZSdsbCB3YWxrIHRocm91Z2ggc29tZSBleGFtcGxlcyBvZiBob3cgdGhpcyB3b3JrcywgYW5kIHN0YXJ0IHRvIHNlZSBob3cgdGhlIGZ1bGwgc3ludGF4IG9mIFIgY29tZXMgdG9nZXRoZXIuDQoNCiFbXShpbWFnZXMvZGF5Ml9SU3ludGF4LnBuZykNCg0KDQo8YnI+DQoNCiMjIyBDaGFuZ2luZyBDb2x1bW4gTmFtZXMNCg0KWW91J2xsIG5vdGljZSB0aGF0IHRoZSBjb2x1bW4gbmFtZXMgYXJlIHJlZmxlY3RpdmUgb2YgdGhlIHF1ZXN0aW9ucyBpbiB0aGUgc3VydmV5LiBTb21lIG9mIHRoZXNlIHdpbGwgd29yaywgdGhvc2UgdGhhdCBhcmUgdmVyeSBsb25nIGFuZCBoYXZlIHNwYWNlcyBpbiB0aGUgbmFtZXMgY2FuIGJlIGFubm95aW5nIHRvIHdvcmsgd2l0aC4gIFRoZSBmaXJzdCBzdGVwIGluIG91ciBjbGVhbmluZyB3aWxsIGJlIHRvIGdldCBhbGwgb2YgdGhlIGNvbHVtbiBuYW1lcyBpbiBhIHdheSB0aGF0IHdpbGwgYmUgZWFzeSB0byB3b3JrIHdpdGguDQoNClRvIGNoYW5nZSBjb2x1bW4gbmFtZXMgd2UgY2FuIHVzZSB0aGUgZnVuY3Rpb24gYHJlbmFtZSgpYC4gIFRoZSBmdW5jdGlvbiBgcmVuYW1lKClgIGlzIHBhcnQgb2YgdGhlIFtkcGx5ciBwYWNrYWdlXShodHRwczovL2RwbHlyLnRpZHl2ZXJzZS5vcmcvaW5kZXguaHRtbCkgdGhhdCB3YXMgaW5zdGFsbGVkIHdpdGggdGlkeXZlcnNlLg0KDQo6Ojp3YWxrdGhyb3VnaA0KVHlwZSB0aGUgZm9sbG93aW5nIGNvZGUgdG8gY2hhbmdlIHRoZSBjb2x1bW4gbmFtZSBmcm9tICJZZWFyIG9mIFN0dWR5IiB0byAieWVhcl9vZl9zdHVkeSINCmBgYHtyfQ0Kc3VydmV5X2RhdGEgPC0gc3VydmV5X2RhdGEgfD4NCiAgcmVuYW1lKCJ5ZWFyX29mX3N0dWR5IiA9ICJZZWFyIG9mIFN0dWR5IikNCmBgYA0KDQoqKlN0ZXAtYnktc3RlcCBleHBsYW5hdGlvbjoqKg0KDQoqIFRoaXMgY29tbWFuZCBmaXJzdCBzdGFydHMgb2ZmIHdpdGggdGhlIGBzdXJ2ZXlfZGF0YWAgb2JqZWN0LCB3aGljaCBpcyBvdXIgZGF0YXNldC4NCiogVGhlIGFzc2lnbm1lbnQgb3BlcmF0b3IgY29tZXMgbmV4dCwgYW5kIHdpbGwgcmUtd3JpdGUgdGhlIGluZm9ybWF0aW9uIHN0b3JlZCBpbiBgc3VydmV5X2RhdGFgIHdpdGggYWxsIHRoZSBpbmZvcm1hdGlvbiB0aGF0IGlzIHRvIHRoZSByaWdodCBzaWRlIG9mIHRoZSBvcGVyYXRvci4NCiogV2UgdGhlbiB1c2UgdGhlIGBzdXJ2ZXlfZGF0YWAgb2JqZWN0IGFuZCB0aGUgcGlwZSBgfD5gIHRvIHRlbGwgUiB0aGF0IHdlIHdhbnQgdG8gdGFrZSB0aGUgZGF0YSB0aGF0IGlzIHN0b3JlZCBpbiBgc3VydmV5X2RhdGFgLCBhbmQgdGhlbiBkbyBzb21ldGhpbmcgdG8gaXQgKHdoaWNoIGlzIHdoYXQgY29tZXMgYWZ0ZXIgdGhlIHBpcGUpLg0KKiBUaGUgYHJlbmFtZWAgZnVuY3Rpb24gaXMgdXNlZCB0byByZW5hbWUgY29sdW1ucywgYW5kIGlzIGFsd2F5cyBmb2xsb3dlZCBieSBicmFja2V0cy4gIEluc2lkZSB0aG9zZSBicmFja2V0cywgd2UnbGwgcHV0IHRoZSBuZXcgY29sdW1uIG5hbWUgdGhhdCB3ZSB3YW50IGluIHF1b3RhdGlvbiBtYXJrcyBgIiJgLCBmb2xsb3dlZCBieSBhbiBlcXVhbCBzaWduIGA9YCwgZm9sbG93ZWQgYnkgdGhlIGV4aXN0aW5nIGNvbHVtbiBuYW1lIGluIHF1b3RhdGlvbiBtYXJrcyBgIiJgLg0KKiBXZSB0aGVuIHJ1biB0aGUgY29tbWFuZCBhbmQgaG9wZSBpdCB3b3JrcyENCjo6Og0KDQoNCiMjIFlvdXIgVHVybiENCg0KOjo6cXVlc3Rpb24NCkZpcnN0LCB1c2UgdGhlIGZ1bmN0aW9uYG5hbWVzKClgIHRvIGRpc3BsYXkgdGhlIGNvbHVtbiBuYW1lcy4NCmBgYHtyLCBldmFsPUZBTFNFfQ0KbmFtZXMoc3VydmV5X2RhdGEpDQpgYGANCjo6Og0KDQo6OjpxdWVzdGlvbg0KTm93LCBzZWUgaWYgeW91IGNhbiBjaGFuZ2UgdGhlIGBIb3cgbWFueSBob3VycyBwZXIgZGF5IGRvIHlvdSBzcGVuZCBvbiBzb2NpYWwgbWVkaWE/YCBjb2x1bW4gbmFtZSB0byBgaG91cnMtcGVyLWRheWANCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJ30NCnN1cnZleV9kYXRhIDwtIHN1cnZleV9kYXRhIHw+DQogIHJlbmFtZSgiaG91cnNfcGVyX2RheSIgPSAiSG93IG1hbnkgaG91cnMgcGVyIGRheSBkbyB5b3Ugc3BlbmQgb24gc29jaWFsIG1lZGlhPyIpIA0KYGBgDQoNCjo6Og0KDQo6OjpxdWVzdGlvbg0KTmV4dCwgdHJ5IHRvIGNoYW5nZSB0aGUgZm9sbG93aW5nIDMgY29sdW1uIG5hbWVzOg0KDQoqIENoYW5nZSBgV2hpY2ggc29jaWFsIG1lZGlhIHBsYXRmb3JtcyBkbyB5b3UgdXNlIGF0IGxlYXN0IG9uY2UgYSB3ZWVrP2AgdG8gYHBsYXRmb3Jtc2ANCiogQ2hhbmdlIGBTb2NpYWwgbWVkaWEgbWFrZXMgbWUgZmVlbCBjb25uZWN0ZWRgIHRvIGBmZWVsX2Nvbm5lY3RlZGANCiogQ2hhbmdlIGBTb2NpYWwgbWVkaWEgaW5jcmVhc2VzIG15IHN0cmVzc2AgdG8gYGZlZWxfaW5jcmVhc2Vfc3RyZXNzYA0KDQoqKkhpbnQ6KiogSXQgY2FuIGJlIHRlZGlvdXMgdG8gZG8gdGhlc2UgY2hhbmdlcyBvbmUgYnkgb25lLCBidXQgYnkgdXNpbmcgY29tbWFzIGAsYCB5b3UgY2FuIHJlbmFtZSBjb2x1bW4gbmFtZXMgd2l0aCBhIHNpbmdsZSBjb2RlIGNodW5rLiAgDQpgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZSd9DQpzdXJ2ZXlfZGF0YSA8LSBzdXJ2ZXlfZGF0YSB8Pg0KICByZW5hbWUoInBsYXRmb3JtcyIgPSAiV2hpY2ggc29jaWFsIG1lZGlhIHBsYXRmb3JtcyBkbyB5b3UgdXNlIGF0IGxlYXN0IG9uY2UgYSB3ZWVrPyIsDQogICAgICAgICAgImZlZWxfY29ubmVjdGVkIiA9ICJTb2NpYWwgbWVkaWEgbWFrZXMgbWUgZmVlbCBjb25uZWN0ZWQiLA0KICAgICAgICAgICJmZWVsX2luY3JlYXNlX3N0cmVzcyIgPSAiU29jaWFsIG1lZGlhIGluY3JlYXNlcyBteSBzdHJlc3MiKSANCmBgYA0KOjo6DQoNCjo6OnF1ZXN0aW9uDQpOb3csIGxldCdzIGNoYW5nZSB0aGUgcmVzdCBvZiB0aGUgY29sdW1uIG5hbWVzIGNvcHkgdGhlIGZvbGxvd2luZyBjb2RlLiAoSWYgeW91IGZlZWwgeW91J3JlIHN0YXJ0aW5nIHRvIHVuZGVyc3RhbmQgaG93IHRoaXMgd29ya3MsIHlvdSBjYW4gc2hvdyB0aGUgY29kZSBiZWxvdyBhbmQgYGNvcGUgKyBwYXN0ZWAgaXQgaW50byB5b3VyIHNjcmlwdCwgb3IgaWYgeW91IHdhbnQgc29tZSBtb3JlIHByYWN0aWNlLCBmZWVsIGZyZWUgdG8gZG8gaXQgeW91cnNlbGYhDQoNCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJ30NCnN1cnZleV9kYXRhIDwtIHN1cnZleV9kYXRhIHw+DQogIHJlbmFtZSggImZlZWxfZGlzdHJhY3RlZCIgPSAiSSBmaW5kIHNvY2lhbCBtZWRpYSBkaXN0cmFjdGluZyBmcm9tIHN0dWRpZXMiLA0KICAgICAgICAgImZlZWxfaW1wcm92ZWRfbW9vZCIgPSAiU29jaWFsIG1lZGlhIHBvc2l0aXZlbHkgaW1wYWN0cyBteSBtb29kIiwNCiAgICAgICAgICJ1c2FnZV9zdGF5X2luX3RvdWNoIiA9ICJTdGF5aW5nIGNvbm5lY3RlZCB3aXRoIGZyaWVuZHMvZmFtaWx5IiwNCiAgICAgICAgICJ1c2FnZV9lbnRlcnRhaW5tZW50IiA9ICJFbnRlcnRhaW5tZW50L3Bhc3NpbmcgdGltZSIsDQogICAgICAgICAidXNhZ2VfbmV0d29ya2luZyIgPSAiQWNhZGVtaWMgb3IgcHJvZmVzc2lvbmFsIG5ldHdvcmtpbmciLA0KICAgICAgICAgInVzYWdlX25ld3MiID0gIlN0YXlpbmcgaW5mb3JtZWQgYWJvdXQgbmV3cy9ldmVudHMiLA0KICAgICAgICAgInVzYWdlX2V4cHJlc3Npb24iID0gIlNlbGYtZXhwcmVzc2lvbi9jcmVhdGl2aXR5IiwNCiAgICAgICAgICJ0aW1lc3RhbXAiID0gIlRpbWVzdGFtcCIsDQogICAgICAgICAibmFtZSIgPSAiTmFtZSIsDQogICAgICAgICAiZW1haWwiID0gIkVtYWlsIiwNCiAgICAgICAgICJhZ2UiID0gIkFnZSIsDQogICAgICAgICAiZ2VuZGVyIiA9ICJHZW5kZXIiKQ0KYGBgDQoNCjo6Og0KDQoNCiMjIFBlcnNvbmFsIElkZW5maWVycywgSUQgQ29kZXMsIGFuZCBEYXRhIFZlcnNpb25pbmcNCg0KWW91IHByb2JhYmx5IG5vdGljZWQgdGhhdCBpbiB0aGlzIHN1cnZleSB3ZSBjb2xsZWN0ZWQgbmFtZXMgYW5kIGVtYWlsIGFkZHJlc3Nlcy4gVGhpcyBjYW4gYmUgbmVjZXNzYXJ5IGZvciBzZXZlcmFsIHJlYXNvbnMsIGJ1dCBpdCBhbHNvIHBvc2VzIGV0aGljYWwgaXNzdWVzIHdpdGggcmVzcGVjdCB0byB3aG8gaXMgYWJsZSB0byBzZWUgdGhpcyBpbmZvcm1hdGlvbi4gSXQgaXMgY29tbW9uIHByYWN0aWNlIHRvIHJlbW92ZSBwZXJzb25hbCBpZGVudGlmaWVycyBmcm9tIHN1cnZleSBkYXRhLCBidXQgeW91IG1heSBhbHNvIHdpc2ggdG8gY3JlYXRlIGEgY29kZSBmb3IgZWFjaCBlbnRyeSBzaG91bGQgeW91IGV2ZXIgbmVlZCB0byBjb25uZWN0IGluZm9ybWF0aW9uIGJhY2sgdG8gdGhlIHJlc3BvbmRlbnQuDQoNCkxldCdzIHRyeSB0aGlzIGlzIGEgZmV3IHN0ZXBzOg0KDQojIyMgQWRkIGFuIElEIGNvbHVtbg0KDQpUaGUgYG11dGF0ZSgpYCBmdW5jdGlvbiwgdGhhdCBpcyBwYXJ0IG9mIHRoZSBbZHBseXIgcGFja2FnZV0oaHR0cHM6Ly9kcGx5ci50aWR5dmVyc2Uub3JnL2luZGV4Lmh0bWwpLCBpcyB1c2VmdWwgd2hlbiB5b3Ugd2FudCB0byBjcmVhdGUgbmV3IGNvbHVtbnMgdGhhdCBhcmUgZnVuY3Rpb25zIG9mIGV4aXN0aW5nIHZhcmlhYmxlcy4NCg0KV2hpbGUgbm90IHRlY2huaWNhbGx5IHRoZSBmdW5jdGlvbiBvZiBhbiBleGlzdGluZyB2YXJpYWJsZSwgd2UgY2FuIHVzZSBgbXV0dWF0ZWAgd2l0aCB0aGUgYHJvd19udW1iZXIoKWAgZnVuY3Rpb24gdG8gY3JlYXRlIGEgbmV3IGNvbHVtbiB0aGF0IHdpbGwgY29udGFpbiB0aGUgbnVtYmVyIG9mIGVhY2ggcm93LCB0aHVzIGdpdmVuIGVudHJ5IGEgdW5pcXVlIElEIG51bWJlci4NCg0KDQpgYGB7ciwgZXZhbD1GQUxTRX0NCnN1cnZleV9kYXRhIDwtIHN1cnZleV9kYXRhIHw+DQogIG11dGF0ZShJRCA9IHJvd19udW1iZXIoKSkNCmBgYA0KDQo6Ojp3YWxrdGhyb3VnaA0KWW91IGNhbiBzZWUgdGhhdCB0aGUgZ3JhbW1hciB3b3JrcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGByZW5hbWVgIGZ1bmN0aW9uLCB3aGljaCBpcyBvbmUgb2YgdGhlIHN0cmVuZ3RocyBvZiB1c2luZyB0aGUgVGlkeXZlcnNlLiAgDQoNCiogVGhlIG11dGF0ZSBmdW5jdGlvbiBpcyBmb2xsb3dlZCBieSBicmFja2V0cywgYW5kIHRoZSBmaXJzdCB2YWx1ZSB0aGF0IGlzIGVudGVyZWQgaXMgd2hhdCB5b3Ugd2FudCB0aGUgbmV3IGNvbHVtbiB0byBiZSBjYWxsZWQuDQoqIEFmdGVyIHRoZSBgPWAgc2lnbiwgaW5zZXJ0IHdoYXQgaXMgdG8gZ28gaW4gdGhlIHJvd3Mgb2YgdGhlIG5ldyBjb2x1bW4uDQoqIEluIHRoaXMgY2FzZSwgYHJvd19udW1iZXIoKWAgaXMgYWRkaW5nIHRoZSBudW1iZXIgb2YgdGhlIGNvcnJlc3BvbmRpbmcgcm93IHRvIHRoZSBjb2x1bW4uDQoNCldlJ2xsIHBsYXkgd2l0aCBtb3JlIHVzZXMgb2YgYG11dGF0ZWAgaW4ganVzdCBhIGxpdHRsZSBiaXQhDQo6OjoNCg0KPGJyPg0KDQojIyMgTW92ZSB0aGUgSUQgY29sdW1uIHRvIHRoZSBsZWZ0LW1vc3QgcG9zaXRpb24gb2YgdGhlIGRhdGENCg0KSGF2aW5nIGFuIElEIGNvbHVtbiBhcyB0aGUgbGVmdC1tb3N0LCBvciBmaXJzdCwgY29sdW1uIGluIHlvdXIgZGF0YXNldCBtYWtlcyB0aGluZ3MgZ2VuZXJhbGx5IGVhc2llciB0byBrZWVwIHRyYWNrIG9mLg0KDQpUaGUgYHJlbG9jYXRlKClgIGZ1bmN0aW9uLCB3aGljaCBpcyBhbHNvIHBhcnQgb2YgdGhlICoqZHBseXIqKiBwYWNrYWdlLCB3aGljaCBkb2VzIGp1c3Qgd2hhdCBpdHMgbmFtZSBpbXBsaWVzOiBpdCByZWxvY2F0ZXMgY29sdW1ucyBpbiBhIGRhdGFzZXQuDQoNClRoZSBkZWZhdWx0IG9mIGByZWxvY2F0ZWAgaXMgdG8gcHV0IHRoZSBzcGVjaWZpZWQgY29sdW1uIGluIHRoZSBmaXJzdCBwb3NpdGlvbiwgc28gd2UgZG9uJ3QgbmVlZCB0byBzcGVjaWZ5IGxvY2F0aW9uIGZvciB0aGlzIHRhc2suDQoNCmBgYHtyLCBldmFsPUZBTFNFfQ0Kc3VydmV5X2RhdGEgPC0gc3VydmV5X2RhdGEgfD4NCiAgcmVsb2NhdGUoSUQpDQpgYGANCg0KOjo6bm90ZQ0KRXZlcnkgdGltZSB5b3UgbWFrZSBhIGNoYW5nZSB0byB5b3VyIGRhdGEsIHlvdSBjYW4gdXNlIHRoZSBgVmlldyhzdXJ2ZXlfZGF0YSlgIGZ1bmN0aW9uIHRvIGNoZWNrIHdoYXQgd2FzIGRvbmUuDQo6OjoNCg0KQmVmb3JlIHdlIGdvIGFueSBmdXJ0aGVyLCBsZXQncyBzYXZlIGFub3RoZXIgY29weSBvZiB0aGlzIGRhdGEuICBUaGlzIHdpbGwgYWxsb3cgdGhlIGRhdGEgaG9sZGVyIHRvIGhhdmUgYSBjb3B5IG9mIHRoZSBkYXRhIHRoYXQgaGFzIGJvdGggdGhlIHBlcnNvbmFsIGlkZW50aWZpZXJzIGFuZCB0aGUgSUQgY29kZXMuICBXZSB3b24ndCBiZSBhbmFseXppbmcgdGhpcyBkYXRhc2V0LCBidXQgaXQgd2lsbCBiZSBuZWNlc3Nhcnkgc2hvdWxkIHlvdSBuZWVkIHRvIHJlY29ubmVjdCB3aXRoIHJlc3BvbmRlbnRzLiAgDQoNCjxicj4NCg0KIyMjIyBTYXZpbmcgYSBkYXRhc2V0DQoNCk11Y2ggbGlrZSB3ZSBkaWQgd2l0aCByZWFkaW5nIGAuY3N2YCBkYXRhIGludG8gUiwgdGhlcmUgaXMgYSBzaW1pbGFyIGNvbW1hbmQgdG8gc2F2ZSwgb3IgIndyaXRlIiBgLmNzdmAgZGF0YSBiYWNrIHRvIHlvdXIgY29tcHV0ZXIgY2FsbGVkIGB3cml0ZV9jc3YoKWAuICBUaGUgc3ludGF4IGlzIGFzIGZvbGxvd3M6DQoNCmB3cml0ZV9jc3YoZGF0YS1vYmplY3QtbmFtZSwgZmlsZT0iZmlsZS1wYXRoL2RhdGFmaWxlLW5hbWUuY3N2IilgDQoNCklmIHlvdSB1c2UgdGhlIHNhbWUgZmlsZSBuYW1lIGFzIHRoZSBvbmUgeW91IGFyZSB3b3JraW5nIG9uLCBpdCB3aWxsIGNoYW5nZSB0aGF0IGZpbGUgYmFzZWQgb24gd2hhdCB5b3UndmUgZG9uZS4gIEhvd2V2ZXIsICoqd2UgZG9uJ3Qgd2FudCB0byB0b3VjaCBvdXIgb3JpZ2luYWwgZGF0YSoqLCBzbyB3ZSdyZSBnb2luZyB0byBtYWtlIGEgbmV3IGZpbGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBoYXMgY2xlYW4gY29sdW1ucywgSUQgY29kZXMsIGFuZCBwZXJzb25hbCBpZGVudGlmaWVycy4NCg0KYGBge3IsIGV2YWw9RkFMU0V9DQp3cml0ZV9jc3Yoc3VydmV5X2RhdGEsICJzdXJ2ZXktZGF0YV9jbGVhbi1jb2xzX0lEcy5jc3YiKQ0KYGBgDQoNCg0KIyMjIEJhY2sgdG8gQ2xlYW5pbmchDQoNCk5vdyB0aGF0IHdlJ3ZlIHNhdmVkIHRoYXQgdmVyc2lvbiBvZiB0aGUgZGF0YSwgbGV0J3Mgbm93IHJlbW92ZSB0aGUgYGVtYWlsYCBhbmQgYG5hbWVgIGNvbHVtbnMgdG8gZGUtaWRlbnRpZnkgdGhlIGRhdGFzZXQsIGFuZCBhbHNvIHJlbW92ZSBzb21lIHVubmVjZXNzYXJ5IGNvbHVtbnMuDQoNCiMjIyMgUmVtb3ZpbmcgQ29sdW1ucw0KDQpUaGVyZSBhcmUgYSBudW1iZXIgb2Ygd2F5cyB0byByZW1vdmUgY29sdW1ucyBpbiBSLCB3ZSdsbCBmb2N1cyBvbiB0aGUgdGhlIGBzZWxlY3RgIGZ1bmN0aW9uIGZyb20gdGhlIGBkcGx5cmAgcGFja2FnZSBpbiBUaWR5dmVyc2UuDQoNClRoaXMgZm9sbG93cyB0aGUgc2FtZSBzeW50YXggdGhhdCB3ZSd2ZSBiZWVuIHVzaW5nLCBhbmQgYWZ0ZXIgdGhlIGBzZWxlY3RgIGZ1bmN0aW9uLCB5b3UgaW5zZXJ0IGEgZGFzaCBgLWAsIG9yIG1pbnVzIHN5bWJvbCwgcGx1cyB0aGUgbmFtZSBvZiB0aGUgY29sdW1uIHlvdSB3YW50IHRvIHJlbW92ZS4NCg0KTGV0J3Mgc3RhcnQgYmUgcmVtb3ZpbmcgdGhlIGB0aW1lc3RhbXBgIGNvbHVtbiBieSB1c2luZyBpdHMgY29sdW1uIG5hbWUuDQoNCmBgYHtyLCBldmFsPUZBTFNFfQ0Kc3VydmV5X2RhdGEgPC0gc3VydmV5X2RhdGEgfD4NCiAgc2VsZWN0KC10aW1lc3RhbXApDQpgYGANCg0KWW91IGNhbiB0YWtlIGEgbG9vayBhdCB0aGUgZGF0YXNldCBhbmQgbm93IHNlZSB0aGF0IHRoZSBgdGltZXN0YW1wYCBjb2x1bW4gaXMgbm93IGdvbmUuDQoNCkxldCdzIG5vdyByZW1vdmUgdGhlIGlkZW50aWZpZXJzIGBuYW1lYCBhbmQgYGVtYWlsYC4gIA0KDQo6OjpxdWVzdGlvbg0KDQpTZWUgaWYgeW91IGNhbiByZW1vdmUgdGhlIGBuYW1lYCBhbmQgYGVtYWlsYCBjb2x1bW5zLCBhcyB3ZSB3YW50IHRvIGdldCByaWQgb2YgdGhlIGlkZW50aWZ5aW5nIHZhcmlhYmxlcy4NCg0KSGludDogVG8gZG8gdGhpcyBpcyBhIHNpbmdsZSBjb21tYW5kLCBzZWUgaWYgeW91IGNhbiBmaWd1cmUgb3V0IGhvdyB0byB1c2UgdGhlIGBjKClgIGZ1bmN0aW9uIHRoYXQgd2FzIGludHJvZHVjZWQgaW4gdGhlIFtJbnRyb2R1Y3Rpb24gdG8gUiBzZXNzaW9uXShCbG9jazgtMV9TVVJfSW50cm8tdG8tUi5odG1sKQ0KYGBge3IsIGNsYXNzLnNvdXJjZSA9ICdmb2xkLWhpZGUnLCBldmFsID0gRkFMU0V9DQoNCnN1cnZleV9kYXRhIDwtIHN1cnZleV9kYXRhIHw+DQogIHNlbGVjdCgtYyhuYW1lLCBlbWFpbCkpDQpgYGANCjo6Og0KDQoNCjxicj4NCg0KIyMjIyBTYXZlIEFub3RoZXIgVmVyc2lvbiBvZiB0aGUgRGF0YQ0KDQpOb3cgdGhhdCB3ZSBoYXZlIGEgZGF0YXNldCB0aGF0IGhhcyBjbGVhbmVkIGNvbHVtbnMsIG5vIGlkZW50aWZpZXJzLCBhbmQgbm8gdW5uZWNlc3NhcnkgY29sdW1ucywgbGV0J3Mgc2F2ZSBhIGNvcHkgb2YgdGhpcyBzaG91bGQgd2UgZXZlciBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGJlZ2lubmluZy4NCg0KYGBge3IsIGV2YWw9RkFMU0V9DQp3cml0ZV9jc3Yoc3VydmV5X2RhdGEsICJzdXJ2ZXktZGF0YV9jbGVhbi1jb2xzX25vLUlELmNzdiIpDQpgYGANCg0KIyMjIENsZWFuaW5nIFZhbHVlcw0KDQpOb3cgdGhhdCB3ZSd2ZSBjbGVhbmVkIHVwIHRoZSB2YXJpYWJsZXMvY29sdW1ucywgbGV0J3MgdGFrZSBhIGxvb2sgYXQgb3VyIGRhdGFzZXQgYW5kIHNlZSB3aGF0IHZhbHVlcyBtaWdodCBuZWVkIHNvbWUgd29yay4NCg0KYGBge3IsIGV2YWw9RkFMU0V9DQpWaWV3KHN1cnZleV9kYXRhKQ0KYGBgDQoNCiMjIENsZWFuaW5nIFN1cnZleSBWYWx1ZXMNCg0KTm93IHRoYXQgd2UndmUgY2xlYW5lZCB1cCBvdXIgaGVhZGVycywgaXQncyB0aW1lIHRvIHN0YXJ0IGxvb2tpbmcgYXQgdGhlIHZhbHVlcyB0byBzZWUgaWYgd2UnbGwgYmUgZWFzaWx5IGFibGUgdG8gYW5hbHl6ZSB0aGVtLCBvciBpZiB0aGV5IG5lZWQgY2xlYW5pbmcgdG9vLiAgDQoNCklmIHlvdSB0YWtlIGEgbG9vayBhdCB0aGUgYHBsYXRmb3Jtc2AgY29sdW1uLCB5b3UnbGwgc2VlIHRoYXQgdGhlIHZhbHVlcyBhcmUgcHJldHR5IG1lc3N5LCBhbmQgY2FuIGluY2x1ZGUgYW55IGNvbWJpbmF0aW9uIG9mIHVwIHRvIDYgb3B0aW9ucy4gVGhpcyBpcyB2ZXJ5IGhhcmQgdG8gd29yayB3aXRoLCBzbyB3ZSdsbCBuZWVkIHRvIGZpZ3VyZSBvdXQgdGhlIGJlc3Qgd2F5IHRvIGZvcm1hdCB0aGluZ3MuDQoNCiMjIyBXaWRlIERhdGEsIExvbmcgRGF0YSwgYW5kIHRoZSBUaWR5IERhdGEgUHJpbmNpcGxlcw0KDQpXaGVuIGNvbnNpZGVyaW5nIHRoZXNlIHR5cGVzIG9mIG1lc3N5IGNvbHVtbnMsIHRoZXJlIGFyZSB0d28gZGlmZmVyZW50IHN0cmF0ZWdpZXMgd2UgY2FuIHRha2UgdG8gY2xlYW4gdGhlbSB1cDoNCg0KMSkgTWFrZSB0aGUgZGF0YSAqKmxvbmcsIG9yIHRpZHkqKiwgd2hpY2ggYWltcyB0byByZWR1Y2UgY29sdW1ucyBidXQgY3JlYXRlcyBtb3JlIHJvd3MuDQoyKSBNYWtlIHRoZSBkYXRhICoqd2lkZSoqLCB3aGljaCBjcmVhdGVzIG1vcmUgY29sdW1ucyBhbmQgY3JlYXRlcyBhIHdpZGVyIHNwcmVhZHNoZWV0Lg0KDQoNCkluIHRoZSBuZXh0IHNlc3Npb24gb2YgdGhpcyBzZXJpZXMsIFtNYWtpbmcgU2Vuc2Ugb2YgU3VydmV5IERhdGFdKEJsb2NrOC0zX1NVUl9NYWtpbmctU2Vuc2UuaHRtbCksIHdlIHdpbGwgYmUgbG9va2luZyBhdCB0aGUgcHJvcyBhbmQgY29ucyBvZiB3aWRlIHZzIGxvbmcgZGF0YSwgYnV0IGluIHRoaXMgc2Vzc2lvbiB3ZSB3aWxsIGZvY3VzIG9uIHRoZSB0ZWNobmlxdWVzIHRvIHBsYXkgd2l0aCB0aGUgc2hhcGUgb2Ygb3VyIGRhdGEuDQoNCg0KIyMjIE1ha2luZyBEYXRhIExvbmcgb3IgIlRpZHkiDQoNCkluIFIsIGFuZCBzcGVjaWZpY2FsbHkgdGhlIFRpZHl2ZXJzZSwgdGhlIFtUaWR5IERhdGEgUHJpbmNpcGxlc10oaHR0cHM6Ly9jcmFuLnItcHJvamVjdC5vcmcvd2ViL3BhY2thZ2VzL3RpZHlyL3ZpZ25ldHRlcy90aWR5LWRhdGEuaHRtbCkgc3BlY2lmeSBxdWFsaXRpZXMgb2Ygd2hhdCBpcyBjb25zaWRlcmVkICJ0aWR5IGRhdGEiLCB3aXRoIGRhdGEgdGhhdCBkb2Vzbid0IG1lZXQgYWxsIGNyaXRlcmlhIGJlaW5nICJtZXNzeSBkYXRhIi4gVGhleSBwcm92aWRlIGEgc3RhbmRhcmQgd2F5IHRvIG9yZ2FuaXplIGRhdGEgdG8gImZhY2lsaXRhdGUgaW5pdGlhbCBleHBsb3JhdGlvbiBhbmQgYW5hbHlzaXMgb2YgdGhlIGRhdGEsIGFuZCB0byBzaW1wbGlmeSB0aGUgZGV2ZWxvcG1lbnQgb2YgZGF0YSBhbmFseXNpcyB0b29scyB0aGF0IHdvcmsgd2VsbCB0b2dldGhlciIgIChbc291cmNlXShodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvcGFja2FnZXMvdGlkeXIvdmlnbmV0dGVzL3RpZHktZGF0YS5odG1sKSkuIA0KDQoqKlRpZHkgRGF0YSBQcmluY2lwbGVzOioqDQoNCiogRWFjaCB2YXJpYWJsZSBpcyBhIGNvbHVtbi4NCiogRWFjaCBvYnNlcnZhdGlvbiBpcyBhIHJvdy4NCiogRWFjaCB2YWx1ZSBpcyBhIGNlbGwuIA0KDQpIZXJlIGlzIGFuIGV4YW1wbGUgb2Ygd2hhdCB3b3VsZCBiZSBjb25zaWRlcmVkIGEgbWVzc3kgZGF0YXNldDoNCg0KIVtdKGltYWdlcy9ibG9jazgtMl90aWR5LWRhdGExLnBuZykNCg0KV2hpbGUgc3RydWN0dXJpbmcgZGF0YSBpbiB0aGlzIHdheSBpcyBtdWNoIGVhc2llciBmb3IgYSBodW1hbiB0byBzY2FuIGFuZCBmb3Igc3VtbWFyeSB0YWJsZXMsIGl0J3MgdHJpY2tpZXIgZm9yIGEgY29kaW5nIGxhbmd1YWdlIHRvIHBhcnNlIGFuZCB3b3JrIHdpdGguICBUaGUgdmFyaW91cyBwYWNrYWdlcyBvZiB0aGUgVGlkeXZlcnNlIGFyZSBzcGVjaWZpY2FsbHkgZ2VhcmVkIHRvd2FyZHMgd29ya2luZyB3aXRoIHRpZHkgZGF0YSwgYW5kIG1ha2luZyB5b3VyIGRhdGEgdGlkeSB3aWxsIG1ha2UgZmFjZXRpbmcsIGdyb3VwaW5nLCBtb2RlbGxpbmcsIGFuZCB2aXN1YWxpemluZyBtdWNoIGVhc2llci4NCg0KSGVyZSdzIGFuIGV4YW1wbGUgb2Ygd2hhdCBhIHRpZHkgdmVyc2lvbiBvZiB0aGlzIGRhdGEgd291bGQgbG9vayBsaWtlOg0KDQohW10oaW1hZ2VzL2Jsb2NrOC0yX3RpZHktZGF0YTIucG5nKQ0KDQpBcyB5b3UnbGwgbm90aWNlLCB0aGUgcmVwZWF0aW5nIHZhbHVlcyBpbiB0aGUgYE5hbWVgIGNvbHVtbiBzZWVtcyBjbHVua3kgYW5kIHdlaXJkIHRvIHNjYW4uICBCdXQgYSB3YXkgdG8gdGhpbmsgYWJvdXQgdGhpbmsgYWJvdXQgd2h5IHRoaXMgbWlnaHQgYmUgdXNlZnVsIHdvdWxkIGJlIGlmIGluc3RlYWQgb2YgMyBxdWl6cywgdGhlcmUgd2VyZSA1MC4gIEhhdmluZyBhIHVuaXF1ZSBjb2x1bW4gZm9yIGVhY2ggd291bGQgYmUgdGVkaW91cyBpbiBpdHMgb3duIHdheSwgYW5kIHRoaXMgaXMganVzdCBhIHNpbmdsZSB2YXJpYWJsZS4gVGhlcmUgY291bGQgYmUgc2V2ZXJhbCBzZXRzIG9mIHdpZGUgc3Bhbm5pbmcgY29sdW1ucyB0byBjYXB0dXJlIHdoYXQgY291bGQgYmUgY2FwdHVyZWQgaW4gYSBzaW5nbGUgdmFyaWFibGUuICBUaGUgY29uY2VwdCBvZiB0aWR5IGRhdGEgZm9jdXNlcyBvbiBtaW5pbWl6aW5nIHRoZSBhbW91bnQgb2YgY29sdW1ucyBpbiBmYXZvdXIgb2YgZmV3ZXIgY29sdW1ucyB3aXRoIHJpY2ggYW1vdW50cyBvZiBvYnNlcnZhdGlvbnMuDQoNCiMjIE1ha2luZyBhIERhdGFzZXQgVGlkeQ0KDQpUaGUgW3RpZHlyXShodHRwczovL3RpZHlyLnRpZHl2ZXJzZS5vcmcvKSBwYWNrYWdlIGluIHRoZSBUaWR5dmVyc2Ugc3BlY2lhbGl6ZXMgaW4gbWFraW5nIGRhdGEgdGlkeS4NCg0KVGhlIGBzZXBlcmF0ZV9sb25nZXJfZGVsaW0oKWAgZnVuY3Rpb24gc3BlY2lhbGl6ZXMgaW4gZGVhbGluZyB3aXRoIHRoZSBtZXNzeSB2YWx1ZXMgaW4gb3VyIGBwbGF0Zm9ybXNgIGNvbHVtbi4NCg0KVGhlIGB0cmltc3dgIGZ1bmN0aW9uIGlzIHVzZWZ1bCB0byBhZGQgd2l0aCB0aGUgYHNlcGVhcmF0ZV9sb25nZXJfZGVsaW0oKWAgZnVuY3Rpb24sIGJlY2F1c2UgaXQgcmVtb3ZlcyBhbGwgdGhlIHdoaXRlIHNwYWNlIHN1cnJvdW5kaW5nIG9uIGVpdGhlciBzaWRlIG9mIGEgdmFsdWUsIGF2b2lkaW5nIGFueSBjb21wbGljYXRpb25zIHRoaXMgY291bGQgYnJpbmcgdXAuDQoNCjo6OndhbGt0aHJvdWdoDQoNCkxldCdzIGdpdmUgdGhpcyBhIHRyeSENCg0KYGBge3J9DQpzdXJ2ZXlfZGF0YV9sb25nIDwtIHN1cnZleV9kYXRhIHw+DQogIHNlcGFyYXRlX2xvbmdlcl9kZWxpbShjb2xzID0gcGxhdGZvcm1zLCBkZWxpbSA9ICIsIikgfD4gDQogIG11dGF0ZShwbGF0Zm9ybXMgPSB0cmltd3MocGxhdGZvcm1zKSkgDQpgYGANCg0KKipTdGVwLWJ5LXN0ZXAgZXhwbGFuYXRpb24qKg0KDQoxKSBXZSBzdGFydCBvZmYgYnkgY3JlYXRpbmcgYSBuZXcgciBvYmplY3QgY2FsbGVkIGBzdXJ2ZXlfZGF0YV9sb25nYCwgd2hpY2ggaXMgZ29pbmcgdG8gdGFrZSBvbiBhbGwgdGhlIGluZm9ybWF0aW9uIHRoYXQgaXMgcGFzc2VkIHRvIGl0IGZyb20gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIGFzc2lnbm1lbnQgb3BlcmF0b3IgYDwtYC4NCjIpIFRoZSBgc3VydmV5X2RhdGFgIG9iamVjdCByZXByZXNlbnRzIG91ciBkYXRhc2V0IHRoYXQgd2Ugd2FudCB0byBwYXNzIHRocm91Z2ggdGhlIHBpcGUgYHw+YCB0byBtYW5pcHVsYXRlIGl0Lg0KMykgVGhlIGBzZXBlYXJhdGVfbG9uZ2VyX2RlbGltYCBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSBgcGxhdGZvcm1zYCBjb2x1bW4gdG8gY3JlYXRlIGEgbmV3IHJvdyBmb3IgZWFjaCBvZiB0aGUgdmFsdWVzIGluIHRoZSBjZWxsLCBhbmQgYmVjYXVzZSB0aGUgdmFsdWVzIHNlcGFyYXRlZCBieSBjb21tYXMsIHRoZSBgZGVsaW0gPSAiLCJgIGZ1bmN0aW9uIHRlbGxzIFIgdG8gc2VwYXJhdGUgZWFjaCBuZXcgcm93IGFmdGVyIGEgY29tbWEuDQo0KSBUaGUgZGF0YSBvYmplY3Qgd2l0aCB0aGUgc2VwYXJhdGUgcm93cyBpcyB0aGVuIHBpcGVkIGludG8gdGhlIG5leHQgZnVuY3Rpb24sIHdoaWNoIHVzZXMgdGhlIGBtdXRhdGVgIGZ1bmN0aW9uIHRvIHRlbGwgUiB0aGF0IHdlIHdhbnQgdG8gbW9kaWZ5IHRoZSBuZXdseSB1cGRhdGVkIGBwbGF0Zm9ybXNgIHZhbHVlcywgYW5kIHRoZSBgdHJpbXN3YCB0aGVuIHJlbW92ZXMgYW55IHdoaXRlc3BhY2Ugb24gZWl0aGVyIHNpZGUgb2YgdGhlIHZhbHVlcy4NCjUpIEV0IHZvaWxhIQ0KDQo6OjoNCg0KDQpJZiB3ZSB0YWtlIGFub3RoZXIgbG9vayBhdCB0aGUgZGF0YXNldCwgeW91J2xsIHNlZSB0aGF0IHRoZSBgcGxhdGZvcm1zYCB2YXJpYWJsZSBub3cgaGFzIHNpbmdsZSBvYnNlcnZhdGlvbnMgaW4gZWFjaCBjZWxsLg0KDQojIyMgTW9yZSBUaWR5aW5nDQoNCkluIGFkZGl0aW9uIHRvIHRoZSBgcGxhdGZvcm1zYCB2YXJpYWJsZSwgdGhlIHN1cnZleSBjb250YWluZWQgdHdvIGFkZGl0aW9uYWwgbXVsdGlwbGUtY2hvaWNlIHF1ZXN0aW9uczoNCg0KKiAiUGxlYXNlIGluZGljYXRlIGhvdyBtdWNoIHlvdSBhZ3JlZSBvciBkaXNhZ3JlZSB3aXRoIHRoZSBmb2xsb3dpbmcgc3RhdGVtZW50cyBhYm91dCBzb2NpYWwgbWVkaWEgYW5kIHlvdXIgbWVudGFsIGhlYWx0aDoiDQoNCiogIlJhbmsgdGhlIGZvbGxvd2luZyByZWFzb25zIGZvciB1c2luZyBzb2NpYWwgbWVkaWEgaW4gb3JkZXIgb2YgaW1wb3J0YW5jZSB0byB5b3UgKDEgPSBtb3N0IGltcG9ydGFudCwgNSA9IGxlYXN0IGltcG9ydGFudCk6Ig0KDQpZb3UnbGwgbm90aWNlIHRoYXQgZWFjaCBvZiB0aGVzZSBxdWVzdGlvbnMgY3JlYXRlIGNyZWF0ZSA0IGFuZCA1IGNvbHVtbnMsIHJlc3BlY3RpdmVseSwgdG8gY2FwdHVyZSB0aGUgcmVzcG9uc2VzLiAgVGhpcyBpc24ndCBuZWNlc3NhcmlseSBhIGJhZCB0aGluZywgYnV0IGluIHRoZSBzcGlyaXQgb2YgbWFraW5nIG91ciBkYXRhIHRpZHksIGxldCdzIHNlZSB0cnkgdG8gcmVkdWNlIHRoZSBhbW91bnQgb2YgdmFyaWFibGVzIHRvIHJlcHJlc2VudCB0aGVzZSB2YWx1ZXMuDQoNCjo6OnF1ZXN0aW9uDQoNClRha2UgYSBsb29rIGF0IHRoZSBkYXRhc2V0LCBmb2N1c2luZyBvbiB0aGUgdmFyaWFibGVzIHRoYXQgYmVnaW4gd2l0aCBgZmVlbC1gIGFuZCBgdXNhZ2UtYCwgYW5kIHRoaW5rIGFib3V0IGhvdyB5b3UgbWlnaHQgbWFrZSB0aGVzZSB2YXJpYWJsZXMgdGlkeS4NCg0KOjo6DQoNClRoZXNlIHZhcmlhYmxlcyBhcmUgYSBiaXQgdHJpY2tpZXIgdG8gY29uY2VwdHVhbGl6ZSB0aGFuIHRoZSBwbGF0Zm9ybXMgdmFyaWFibGUsIGJ1dCBSIGhhcyBhIGZ1bmN0aW9uIHRoYXQgaXMgZGVzaWduZWQgdG8gaGFuZGxlIHRoaW5ncyBsaWtlIHRoaXMsIGFuZCB3aWxsIGhvcGVmdWxseSBtYWtlIHNlbnNlIHdoZW4geW91IHNlZSBpdCENCg0KOjo6d2Fsa3Rocm91Z2gNCg0KSGVyZSdzIHRoZSBjb2RlIHRvIGRvIHRoaXM6DQoNCmBgYHtyfQ0Kc3VydmV5X2RhdGFfbG9uZ2VyIDwtIHN1cnZleV9kYXRhX2xvbmcgfD4NCiAgcGl2b3RfbG9uZ2VyKA0KICAgIGNvbHMgPSBzdGFydHNfd2l0aCgiZmVlbF8iKSwNCiAgICBuYW1lc190byA9ICJmZWVsX3F1ZXN0aW9uIiwNCiAgICB2YWx1ZXNfdG8gPSAiZmVlbF9yZXNwb25zZSINCiAgKQ0KYGBgDQoNCioqU3RlcC1ieS1zdGVwIGV4cGxhbmF0aW9uOioqDQoNCjEpIFdlIHN0YXJ0IGJ5IHdyaXRpbmcgYSBuZXcgciBvYmplY3QgY2FsbGVkIGBzdXJ2ZXlfZGF0YV9sb25nZXJgLCB0aGF0IHdpbGwgaG9sZCBldmVyeXRoaW5nIHRvIHRoZSBsZWZ0IG9mIHRoZSBhc3NpZ25tZW50IG9wZXJhdG9yIGB8PmAuDQoyKSBUaGUgYHN1cnZleV9kYXRhX2xvbmdgIG9iamVjdCByZXByZXNlbnRzIG91ciBkYXRhc2V0IHRoYXQgd2Ugd2FudCB0byBwYXNzIHRocm91Z2ggdGhlIHBpcGUgYHw+YCB0byBtYW5pcHVsYXRlIGl0Lg0KMykgVGhlIGBwaXZvdF9sb25nZXIoKWAgZnVuY3Rpb24gcmVzaGFwZXMgdGhlIGRhdGEgZnJvbSB3aWRlIHRvIGxvbmcuICBJbiB0aGlzIGNhc2Ugd2UgaGFkIHNldmVyYWwgdmFyaWFibGVzIHRoYXQgc3RhcnRlZCB3aXRoIGBmZWVsLWAsIGFuZCB0aGlzIGZ1bmN0aW9uIHdpbGwgZ2F0aGVyIHRoZW0gaW50byB0d28gY29sdW1uczogb25lIGZvciB0aGUgcXVlc3Rpb24gbmFtZSBhbmQgb25lIGZvciB0aGUgcmVzcG9uc2UgdmFsdWUuDQo0KSBUaGUgYGNvbHMgPSBzdGFydHNfd2l0aCgiZmVlbC0iKWAgZnVuY3Rpb24gdGVsbHMgYHBpdm90X2xvbmdlcmAgd2hpY2ggY29sdW1ucyB0byBnYXRoZXIuIChZb3UgY2FuIHNlZSB3aHkgdmFyaWFibGUgbmFtaW5nIGNhbiBoZWxwIHdpdGggZGF0YSBjbGVhbmluZyEpDQo1KSBgbmFtZXNfdG8gPSAiZmVlbF9xdWVzdGlvbiJgIG5hbWVzIG9mIHRoZSBuZXcgY29sdW1uIHRoYXQgd2lsbCAqKmhvbGQgdGhlIG9yaWdpbmFsIGNvbHVtbiBuYW1lcyoqIChpZS4gdGhlIHF1ZXN0aW9uIGlkZW50aWZpZXJzLiAgVGhlIG5ldyBjb2x1bW4gd2lsbCBiZSBjYWxsZWQgYGZlZWxfcXVlc3Rpb25gLg0KNikgYHZhbHVlc190b2AgImZlZWxfcmVzcG9uc2UiIG5hbWVzIHRoZSBuZXcgY29sdW1uIHRoYXQgd2lsbCAqKmhvbGQgdGhlIHZhbHVlcyAoYW5zd2VycykgdGhhdCB1c2VkIHRvIHNpdCBpbiB0aGUgYGZlZWwtYCBjb2x1bW5zLiAgVGhlIG5ldyBjb2x1bW4gd2lsbCBiZSBjYWxsZWQgYGZlZWxfcmVzcG9uc2VgLg0KNykgQ2xvc2UgdGhlIGJyYWNrZXQsIGFuZCB0YWtlIGEgbG9vayB0byBzZWUgd2hhdCB0aGUgZGF0YSBsb29rcyBsaWtlLg0KDQo6OjoNCg0KIyMgWW91ciBUdXJuIQ0KDQo6OjogcXVlc3Rpb24NCg0KTm93IHRoYXQgeW91J3ZlIHNlZW4gaG93IHRoZSBgcGl2b3RfbG9uZygpYCBmdW5jdGlvbiB3b3Jrcywgc2VlIGlmIHlvdSBjYW4gY3JlYXRlIGEgbmV3IG9iamVjdCBjYWxsZWQgYHN1cnZleV9kYXRhX3RpZHlgLCB0aGF0IGxlbmdodGhlbiB0aGUgYHVzYWdlLWAgY29sdW1ucyBqdXN0IGFzIHdlIGRpZCB3aXRoIHRoZSBgZmVlbC1gIGNvbHVtbnMuDQoNCkhpbnQ6IFRoZSBzeW50YXggaXMgZXhhY3RseSB0aGUgc2FtZSBhcyB0aGUgZXhhbXBsZSBhYm92ZSwgeW91IGp1c3QgbmVlZCB0byBjaGFuZ2UgdGhlIHZhbHVlcyBpbiBxdW90YXRpb25zIGAiImAuDQoNCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJywgZXZhbCA9IEZBTFNFfQ0Kc3VydmV5X2RhdGFfdGlkeSA8LSBzdXJ2ZXlfZGF0YV9sb25nZXIgfD4NCiAgcGl2b3RfbG9uZ2VyKA0KICBjb2xzID0gc3RhcnRzX3dpdGgoInVzYWdlXyIpLA0KICBuYW1lc190byA9ICJ1c2FnZV9xdWVzdGlvbiIsDQogIHZhbHVlc190byA9ICJ1c2FnZV9yZXNwb25zZSINCikNCmBgYA0KDQo6OjoNCg0KVGFrZSBhIGxvb2sgYXQgdGhlIGRhdGE6DQoNCmBgYHtyLCBldmFsPUZBTFNFfQ0KVmlldyhzdXJ2ZXlfZGF0YV90aWR5KQ0KYGBgDQoNCkl0IGxvb2tzIHByZXR0eSB3ZWlyZCEgIEFzIG1lbnRpb25lZCwgdGlkeSBkYXRhIGlzIHZlcnkgaGFyZCB0byBzY2FuIGZvciBhIGh1bWFuLCBidXQgcmVhbGx5IGVhc3kgZm9yIFIgdG8gc2Nhbi4gWW91IG1pZ2h0IG5vdGljZSB0aGF0IHRoZXJlJ3Mgb3ZlciAyNiwwMDAgcm93cywgd2hpY2ggbWF5IHNlZW0gb3ZlcndoZWxtaW5nIGFuZCB1bm5lY2Vzc2FyeS4gIFRoZSBUaWR5IERhdGEgUHJpbmNpcGxlcyBhcmUgdmVyeSBtdWNoIGdlYXJlZCB0b3dhcmRzIHVzaW5nIFIsIGFuZCB0aGVyZSBhcmUgdGltZXMgd2hlbiBtYWtpbmcgeW91ciBkYXRhIGNvbXBsZXRlbHkgdGlkeSBtaWdodCBub3Qgc3VpdGUgeW91ciBwdXJwb3NlLiAgSG93ZXZlciwgdGhlIHB1cnBvc2Ugb2YgdGhlIGV4ZXJjaXNlIHdhcyB0byBnZXQgeW91IHRvIHRoaW5rIGFib3V0IGhvdyB5b3UgbWlnaHQgd2FudCBvciBuZWVkIHRvIHN0cnVjdHVyZSB5b3VyIGRhdGEsIGFuZCB5b3Ugbm93IGhhdmUgY29kZSB0aGF0IHlvdSBjYW4gZWFzaWx5IGFkYXB0IHRvIHBsYXkgd2l0aCB5b3VyIHN1cnZleXMuDQoNCg0KIyMjIFNhdmUgYSBjb3B5IG9mIHRoZSBkYXRhDQoNCk5vdyB0aGF0IHdlJ3ZlIGZ1bGx5IHRpZGllZCBvdXIgZGF0YXNldCwgc2F2ZSBhIGNvcHkgb2YgaXQ6DQoNCmBgYHtyLCBldmFsPUZBTFNFfQ0Kd3JpdGVfY3N2KHN1cnZleV9kYXRhX3RpZHksICJzdXJ2ZXlfZGF0YV90aWR5LmNzdiIpDQpgYGANCg0KIyMgTWFraW5nIGRhdGEgd2lkZQ0KDQpBcyBtZW50aW9uZWQsIHRoZXJlIGFyZSBwcm9zIGFuZCBjb25zIHRvIG1ha2luZyBkYXRhIHdpZGUgYW5kIGxvbmcuIFRoZSBiZW5lZml0IG9mIGNyZWF0aW5nIGEgd2lkZXIgc3RydWN0dXJlIGlzIHRoYXQgaXQgZWFzaWVyIGZvciBodW1hbiBleWVzIHRvIHNjYW4gYW5kIGNyZWF0aW5nIGJhc2ljIHN1bW1hcnkgdGFibGVzLiAgDQoNCklmIHdlIHJldmlzaXQgdGhlIFIgb2JqZWN0IGBzdXJ2ZXlfZGF0YWAsIHdoaWNoIHdhcyBzYXZlZCBhcyB0aGUgYHN1cnZleS1kYXRhX2NsZWFuLWNvbHNfbm8tSUQuY3N2YCBmaWxlLCB3ZSBjYW4gc3RlcCBiYWNrIHRvIGEgc3RhZ2UgaW4gd2hpY2ggdGhlIGBwbGF0Zm9ybXNgIHZhcmlhYmxlIHdhcyBzdGlsbCBxdWl0ZSBtZXNzeS4NCg0KDQpgYGB7ciwgZXZhbD1GQUxTRX0NClZpZXcoc3VydmV5X2RhdGEpDQpgYGANCg0KSW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyByb3cgZm9yIGVhY2ggb2YgdGhlIHBsYXRmb3JtcyB2aWEgdGhlIFRpZHkgRGF0YSBQcmluY2lwbGVzLCB3ZSBjYW4gbWFrZSB0aGUgZGF0YSB3aWRlciBhbmQgY3JlYXRlIGEgbmV3IGNvbHVtbiBmb3IgZWFjaCBvZiB0aGUgcGxhdGZvcm1zLg0KDQo6Ojp3YWxrdGhyb3VnaA0KDQpIZXJlJ3MgaG93IHRvIGRvIHRoaXM6DQoNCmBgYHtyfQ0Kc3VydmV5X2RhdGFfd2lkZSA8LSBzdXJ2ZXlfZGF0YSB8Pg0KICBtdXRhdGUocGxhdGZvcm1zID0gc3Ryc3BsaXQocGxhdGZvcm1zLCAiLCIpKSB8Pg0KICB1bm5lc3RfbG9uZ2VyKHBsYXRmb3JtcykgfD4NCiAgbXV0YXRlKHBsYXRmb3JtcyA9IHRyaW13cyhwbGF0Zm9ybXMpLCBwcmVzZW50ID0gMSkgfD4NCiAgcGl2b3Rfd2lkZXIoDQogICAgbmFtZXNfZnJvbSA9IHBsYXRmb3JtcywNCiAgICB2YWx1ZXNfZnJvbSA9IHByZXNlbnQsDQogICAgdmFsdWVzX2ZpbGwgPSAwDQogICkNCmBgYA0KDQoqKlN0ZXAtYnktc3RlcCBleHBsYW5hdGlvbjoqKg0KDQoxKSBXZSBzdGFydCBieSB3cml0aW5nIGEgbmV3IHIgb2JqZWN0IGNhbGxlZCBgc3VydmV5X2RhdGFfd2lkZWAsIHRoYXQgd2lsbCBob2xkIGV2ZXJ5dGhpbmcgdG8gdGhlIGxlZnQgb2YgdGhlIGFzc2lnbm1lbnQgb3BlcmF0b3IgYHw+YC4NCjIpIFRoZSBgc3VydmV5X2RhdGFgIG9iamVjdCByZXByZXNlbnRzIG91ciBkYXRhc2V0IHRoYXQgd2Ugd2FudCB0byBwYXNzIHRocm91Z2ggdGhlIHBpcGUgYHw+YCB0byBtYW5pcHVsYXRlIGl0Lg0KMykgVGhlIGBtdXRhdGVgIGZ1bmN0aW9uIGlzIHVzZWQgdG8gbW9kaWZ5IGEgY29sdW1uLCB3aGljaCBpcyBhcHBsaWVkIHRvIHRoZSBgc3Ryc3BsaXQocGxhdGZvcm1zLCAiLCIpYCBmdW5jdGlvbiwgdG8gdGVsbCBpdCB0byBzcGxpdCB0aGUgY29tbWEtc2VwYXJhdGVkIHN0cmluZ3MgaW4gdGhlIGBwbGF0Zm9ybXNgIGNvbHVtbiBpbnRvIGxpc3RzIG9mIGluZGl2aWR1YWwgcGxhdGZvcm0gbmFtZXMuDQo0KSBXZSB0aGVuIHBpcGUgYHw+YCB0aGlzIGludG8gdGhlIGB1bm5lc3RfbG9uZ2VyKHBsYXRmb3JtcylgIGZ1bmN0aW9uIHRvIGV4cGFuZCBlYWNoIGVsZW1lbnQgaW50byBpdHMgb3duIHJvdyAod2hpY2ggaXMgbGlrZSBtYWtpbmcgdGhlIGRhdGEgbG9uZ2VyKQ0KNSkgVGhpcyBpcyB0aGVuIHBpcGVkIGB8PmAgaW50byBgbXV0YXRlKHBsYXRmb3JtcyA9IHRyaW13cyhwbGF0Zm9ybXMpYCB3aGljaCBjb250aW51ZXMgdG8gbWFuaXB1bGF0ZSB0aGUgYHBsYXRmb3Jtc2AgY29sdW1uLCBhbmQgbXVjaCBsaWtlIHdlIGRpZCB3aGVuIG1ha2luZyB0aGlzIHZhcmlhYmxlIGxvbmcsIHRoZSBgdHJpbXN3YCByZW1vdmVzIHdoaXRlIHNwYWNlIHN1cnJvdW5kaW5nIHRoZSB2YWx1ZXMuDQo2KSBUaGUgYHByZXNlbnQgPSAxYCBmdW5jdGlvbiBjcmVhdGVzIGEgbmV3IGNvbHVtbiBjYWxsZWQgYHByZXNlbnRgIHRoYXQgaGFzIGEgdmFsdWUgb2YgMSBmb3IgZXZlcnkgcm93LiAgVGhpcyBpcyB1c2VkIGFzIGEgdGVtcG9yYXJ5IG1hcmtlciB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwbGF0Zm9ybSBleGlzdHMgZm9yIHRoYXQgc3VydmV5IGVudHJ5LCBhbmQgd2lsbCBub3QgYmUgdGhlcmUgDQo3KSBVc2luZyBhbm90aGVyIHBpcGUgYHw+YCwgdGhpcyBpbmZvcm1hdGlvbiBnb2VzIGludG8gdGhlIGBwaXZvdF93aWRlcmAgZnVuY3Rpb24sIHRoYXQgd29ya3Mgd2l0aCBhIHZlcnkgc2ltaWxhciBzeW50YXggYXMgYHBpdm90X2xvbmdlcmAgdGhhdCB3ZSB1c2VkIGVhcmxpZXIuICANCjgpIGBuYW1lc19mcm9tID0gcGxhdGZvcm1zYCBhc3NpZ25zIG5ldyBjb2x1bW5zIHRvIHRoZSB1bmlxdWUgcGxhdGZvcm0gbmFtZXMuDQo5KSBgdmFsdWVzX2Zyb20gPSBwcmVzZW50YCBhc3NpZ25zIHZhbHVlcyBpbiB0aGUgbmV3IGNvbHVtbnMgdG8gY29tZSBmcm9tIHRoZSBgcHJlc2VudGAgY29sdW1uLCB3aGljaCBpcyBgMWAuDQoxMCkgRmluYWxseSwgd2l0aCBgdmFsdWVzX2ZpbGwgPSAwYCwgaWYgYSBwbGF0Zm9ybSB3YXNuJ3QgcHJlc2VudCBmb3IgYSBzdXJ2ZXkgZW50cnksIHRoYXQgY29sdW1uIHdpbGwgZ2V0IHRoZSB2YWx1ZSBvZiBgMGAuDQoNClRoaXMgd2lsbCBlbmQgdXAgd2l0aCBhIHdpZGUgZGF0YXNldCB3aGVyZSBlYWNoIHJvdyBpcyBhIHN1cnZleSBlbnRyeSwgZWFjaCBwbGF0Zm9ybSBpcyBhIGNvbHVtbiwgYW5kIHRoZSB2YWx1ZSBgMWAgbWVhbnMgYSBwbGF0Zm9ybSB3YXMgbGlzdGVkLCBhbmQgYDBgIG1lYW5zIGEgcGxhdGZvcm0gd2FzIG5vdCBsaXN0ZWQuDQoNCjo6Og0KDQojIyMgU2F2ZSBhIGNvcHkgb2YgdGhlIGRhdGENCg0KTGV0J3Mgc2F2ZSBhIGNvcHkgb2YgdGhpcyBkYXRhc2V0LCBhbmQgd2UnbGwgYmUgdGFraW5nIGEgbG9vayBhdCBpdCBpbiB0aGUgbmV4dCBzZWN0aW9uLg0KDQpgYGB7ciwgZXZhbD1GQUxTRX0NCndyaXRlX2NzdihzdXJ2ZXlfZGF0YV93aWRlLCAic3VydmV5X2RhdGFfd2lkZS5jc3YiKQ0KYGBgDQoNCg0KIyMjIFNhdmUgeW91ciBzY3JpcHQNCg0KQmVmb3JlIHdlIHdyYXAgdXAsIHdlIHdhbnQgdG8gc2F2ZSBvdXIgc2NyaXB0LiBZb3UgY2FuIGRvIHRoaXMgYnkgY2xpY2tpbmcgYGZpbGUgPiBTYXZlIEFzLi4uYC4gQmVjYXVzZSB3ZSBzZXQgdXAgYW4gUlByb2plY3QsIFIgc2hvdWxkIGF1dG9tYXRpY2FsbHkgY2hvb3NlIHRoZSBjb3JyZWN0IGRpcmVjdG9yeSB0byBzYXZlIHlvdXIgc2NyaXB0Lg0KDQpMZXQncyBzYXZlIHRoZSBzY3JpcHQgYXMgYHN1cnZleV9jbGVhbmluZ19zY3JpcHQuUmANCg0KIyMgRmlsZSBNYW5hZ2VtZW50DQoNCldpdGgganVzdCBhIGZldyBzdGVwcyBvZiBkYXRhIGNsZWFuaW5nLCB3ZSBub3cgaGF2ZSA2IGRhdGEgZmlsZXMgaW4gb3VyIGZvbGRlcjoNCg0KLSBgc29jaWFsLW1lZGlhLXN1cnZleV9PUklHSU5BTC5jc3ZgDQotIGBzb2NpYWwtbWVkaWEtc3VydmV5LmNzdmANCi0gYHN1cnZleV9kYXRhX3RpZHkuY3N2YA0KLSBgc3VydmV5X2RhdGFfd2lkZS5jc3ZgDQotIGBzdXJ2ZXlfZGF0YS5ScHJvamANCi0gYHN1cnZleV9jbGVhbmluZ19zY3JpcHQuUmANCi0gYHN1cnZleS1kYXRhX2NsZWFuLWNvbHNfSURzLmNzdmANCi0gYHN1cnZleS1kYXRhX2NsZWFuLWNvbHNfbm8tSUQuY3N2YA0KDQoNClRoZXNlIG5hbWVzIGFyZW4ndCBuZWNlc3NhcmlseSBiYWQsIGJ1dCB5b3UgY2FuIHNlZSB0aGF0IHRoZXJlIGFyZSBzb21lIGluY29uc2lzdGVuY2llcyB3aXRoIHRoZSBuYW1pbmcgcHJlZml4IGBzb2NpYWwtbWVkaWEtc3VydmV5YCB2cyBgc3VydmV5LWRhdGFgLCBhbmQgc29tZSBvZiB0aGUgZGVzY3JpcHRvcnMsIGBjbGVhbi1jb2xzX0lEc2AgYW5kIGBjbGVhbi1jb2xzX25vLUlEYCBtaWdodCBub3QgYmUgYXMgZXZpZGVudCBhcyB3ZSBtaWdodCBsaWtlLiAgDQoNCkl0IGlzIGFsd2F5cyByZWNvbW1lbmRlZCB0byBkb2N1bWVudCBhbmQgZGVzY3JpYmUgeW91ciBmaWxlcyBhbmQgbmFtaW5nIGNvbnZlbnRpb24gaW4gYSBSRUFETUUgZmlsZSwgd2hpY2ggaXMgZGVzY3JpYmVkIGluIGRldGFpbHMgaW4gdGhlIFtEb2N1bWVudGF0aW9uIF0oQmxvY2syLTNfRG9jdW1lbnRhdGlvbi5odG1sKSBzZXNzaW9uLiBZb3UgY2FuIGFsc28gcmVmZXIgdG8gdGhlIFtPcmdhbml6aW5nIEZpbGVzIGFuZCBGb2xkZXJzXShCbG9jazItMV9GaWxlcy1hbmQtRm9sZGVycy5odG1sKSBzZXNzaW9uIGZvciBpbnNwaXJhdGlvbiBpbiBob3cgeW91IG1pZ2h0IGdvIGFib3V0IHJlbmFtaW5nIGFuZCBzdHJ1Y3R1cmluZyB0aGVzZSBmaWxlcy4NCg0KDQojIyBGaW5pc2gNCg0KWW91IGhhdmUgbm93IHNlZW4gc29tZSBvZiB0aGUgZm91bmRhdGlvbmFsIGZ1bmN0aW9ucyB0byBjbGVhbiBzdXJ2ZXkgZGF0YSwgYW5kIHRoZSB2YXJpb3VzIHR5cGVzIG9mIGRhdGEgdGhhdCBhIHN1cnZleSBtaWdodCBjcmVhdGUuIFRoZSBnb2FsIG9mIHRoaXMgc2Vzc2lvbiBpcyB0byBnaXZlIHlvdSBhIHNlbnNlIG9mIGhvdyB0byBhcHByb2FjaCB5b3VyIG93biBzdXJ2ZXkgZGF0YSwgYW5kIHRvIGJlIGNvbWZvcnRhYmxlIGVub3VnaCB3aXRoIHRoZXNlIGNvZGUgY2h1bmtzIHRoYXQgeW91IGNhbiBzd2l0Y2ggb3V0IHRoZSBkYXRhL3ZhcmlhYmxlcyBmb3IgeW91ciBvd24gc3VydmV5cywgYW5kIHdvcmsgdGhyb3VnaCB0aGVtIGluIHF1aWNrIGFuZCByZXByb2R1Y2libGUgd2F5cyENCg0KDQojIyBUZW1wZXJhdHVyZSBDaGVjaw0KDQpDbGljayB0aGUgZm9sbG93aW5nIGxpbms6IFtTdXJ2ZXkgQ2xlYW5pbmcgVGVtcGVyYXR1cmUgQ2hlY2tdKGh0dHBzOi8vYXBwLnNsaS5kby9ldmVudC80cFh4Rm1Tdk51dlB3SG5mNUI4R1IzKQ0KDQoNCg0K</div>
<div id="footer">
    <hr />
    <div class = "inst-logos">
      <img src="images/institutions/carleton.png" />
      <img src="images/institutions/calgary.png" />
      <img src="images/institutions/ubc.png" />
      <img class="uvic"  src="images/institutions/uvic.png" />
    </div>

<br>
    <div>
      <img class = "cc-licence" src="images/institutions/CC-License.png" />
      <p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-nc/4.0/" target ="blank">Creative Commons Attribution-NonCommercial 4.0 International License</p>
</div>
<br>
Built and rendered courtesy of <a href="https://rmarkdown.rstudio.com/index.html" target ="blank">RMarkdown from RStudio</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Block8-2_SUR_Collect-and-Clean.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
