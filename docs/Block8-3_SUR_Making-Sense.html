<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Making Sense of Survey Data</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KSGZ4ESKQ3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  
  gtag('config', 'G-KSGZ4ESKQ3');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">RDM Jumpstart</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 1
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block1_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block1-1_Intro-RDM.html">Introduction to Research Data Management</a>
    </li>
    <li>
      <a href="Block1-2_Intro-DMP.html">Introduction to Data Management Plans</a>
    </li>
    <li>
      <a href="Block1-3_OSF.html">Introduction to OSF</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 2
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block2_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block2-1_Files-and-Folders.html">Organizing Files and Folders</a>
    </li>
    <li>
      <a href="Block2-2_Naming-Conventions.html">Naming Conventions and Folder Structure</a>
    </li>
    <li>
      <a href="Block2-3_Documentation.html">Documentation</a>
    </li>
    <li>
      <a href="Block2-4_Documentation-in-Action.html">Documentation in Action</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 3
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block3_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block3-1_Excel-to-R.html">Reproducible Research and Moving from Excel to Scripting</a>
    </li>
    <li>
      <a href="Block3-2_Intro-to-R.html">Introduction to R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 4
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block4_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block4-1_File-Paths.html">File and Directory Paths</a>
    </li>
    <li>
      <a href="Block4-2_First-Steps.html">First Steps in R</a>
    </li>
    <li>
      <a href="Block4-3_Data-Types.html">Data Types and Structures in R</a>
    </li>
    <li>
      <a href="Block4-4_Updating-Documentation.html">Updating Documentation</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 5
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block5_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block5-1_Viz-Types.html">Types of Visualizations</a>
    </li>
    <li>
      <a href="Block5-2_ggplot.html">Visualizations with ggplot</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 6
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block6_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block6-1_Sharing-and-Deposit.html">Sharing and Depositing Data</a>
    </li>
    <li>
      <a href="Block6-2_DMP-wrap.html">DMP and Project Wrap-Up</a>
    </li>
    <li>
      <a href="Block6-3_Borealis.html">Borealis Deposit</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Bonus Blocks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block7_Bonus_Filter-and-Select.html">R: Filter and Select</a>
    </li>
    <li>
      <a href="Block7_Bonus_Saving-Output.html">R: Saving Outputs</a>
    </li>
    <li>
      <a href="Block7_Bonus_Troubleshooting.html">R: Troubleshooting</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Working with a Survey
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block8_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block8-1_SUR_Intro-to-R.html">Introduction to R</a>
    </li>
    <li>
      <a href="Block8-2_SUR_Collect-and-Clean.html">Collecting and Cleaning Survey Data</a>
    </li>
    <li>
      <a href="Block8-3_SUR_Making-Sense.html">Making Sense of Survey Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Extras
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Resources</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="codeOfConduct.html">Code of Conduct</a>
        </li>
        <li>
          <a href="Block7_EXT-RCheatsheet.html">R Cheatsheet</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Roadmaps</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-RDMRoadmap.html">RDM Roadmap</a>
        </li>
        <li>
          <a href="Block7_EXT-CRRoadmap.html">Reproducible Roadmap</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Concetps in Reproduciblity</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-BaseRtidyverse.html">Base R &amp; Tidyverse</a>
        </li>
        <li>
          <a href="Block7_EXT-ScriptsNotebooks.html">Scripts &amp; Notebooks</a>
        </li>
        <li>
          <a href="Block7_EXT-idePaths.html">IDEs &amp; Relative Paths</a>
        </li>
        <li>
          <a href="Block7_EXT-ChallengesToRDM.html">Challenges to Good RDM Practices</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Additional Content</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-dd.html">Creating a data dictionary</a>
        </li>
        <li>
          <a href="Block7_EXT-dirsFiles.html">Directories and files</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Setup</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-DMP-setup.html">DMP Assistant Setup</a>
        </li>
        <li>
          <a href="Block7_EXT-osfSetup.html">OSF Setup</a>
        </li>
        <li>
          <a href="Block7_EXT-RRStudio.html">R &amp; RStudio Setup</a>
        </li>
        <li>
          <a href="Block7_EXT-Borealis.html">Borealis Setup</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="contributors.html">Contributors</a>
    </li>
    <li>
      <a href="Feedback.html">Feedback</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Making Sense of Survey Data</h1>

</div>


<div id="making-sense-of-survey-data" class="section level2">
<h2>Making Sense of Survey Data</h2>
<p>Now that we have cleaned up our survey data, we can start asking
questions about it! By the end of the previous session,
<a href="Block8-2_SUR_Collect-and_clean.html">Collecting and Cleaning
Survey Data</a>, we generated two cleaned datasets:</p>
<ul>
<li><code>survey_data_tidy.csv</code></li>
<li><code>survey-data_wide.csv</code></li>
</ul>
<p>Long, or “tidy” data and wide data each have their pros and cons, and
in this session we’re going to explore the benefits and drawbacks of
each as we explore our data. But first, let’s take a moment to do some
thinking:</p>
<p>To begin, let’s open up our <code>.RProj</code> file, so that our
working directory will be captured. Now, let’s create a new R script,
and call it <code>survey_analysis_script.R</code>.</p>
<div id="load-the-tidyverse" class="section level3">
<h3>Load the Tidyverse</h3>
<p>Now that we’ve started a new script, we need to load the libraries
that we’ll be using, which in this case is just the Tidyverse.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
</div>
<div id="load-the-data" class="section level3">
<h3>Load the data</h3>
<p>We can now load the two datasets that were generated in the previous
session:</p>
<pre class="r"><code>survey_data_tidy &lt;- read_csv(&quot;survey_data_tidy.csv&quot;)</code></pre>
<pre class="r"><code>survey_data_wide &lt;- read_csv(&quot;survey_data_wide.csv&quot;)</code></pre>
<div class="question">
<ol style="list-style-type: decimal">
<li>Take a look at <code>survey_data_tidy</code> and
<code>survey-data_wide</code> using the <code>View()</code>
command.</li>
</ol>
<pre class="r fold-hide"><code>View(survey_data_tidy)
View(survey_data_wide)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>In groups, spend a few minutes talking about some things you’d
like to know about the data (ie. groups you’d like to count, possible
relationships, etc.).</p></li>
<li><p>Taking a closer look at the <code>tidy</code> and
<code>wide</code> datasets, can you think of reasons why certain
questions might be better with either one of the datasets?</p></li>
</ol>
</div>
</div>
</div>
<div id="exploring-wide-data" class="section level2">
<h2>Exploring Wide Data</h2>
<p>Wide data is easier for humans to read and interpret, and lends
itself well to asking simple questions from single variables, or
columns, of data. Tidy data is better for asking more complicated
questions, as well as asking about multiple variables and possible
relationships between them. Let’s first start with some simple questions
we can ask from the <strong>wide version</strong> of our data.</p>
<p>A simple first step when exploring a dataset is getting counts of
individual variables. To do this, we can use the <code>count()</code>
function:</p>
<div class="walkthrough">
<p><strong>What does the sample breadkdown of gender?</strong></p>
<pre class="r"><code>survey_data_wide |&gt;
  count(gender)</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ol style="list-style-type: decimal">
<li>We start with the <code>survey_data_wide</code> object and use the
pipe, <code>|&gt;</code>, to indicate we want to do something with
it.</li>
<li>We then use the <code>count()</code> function to give us a total sum
of whatever variable/column name we put inside the brackets.</li>
</ol>
</div>
<p><strong>What is the sample breakdown of age?</strong></p>
<pre class="r"><code>survey_data_wide |&gt;
  count(age)</code></pre>
<p>In addition to looking at single variables with the
<code>count()</code> function, we can also generate quick summary tables
across multiple variables by separating them with commas
<code>,</code>:</p>
<p><strong>What is the sample breakdown of age and gender?</strong></p>
<pre class="r"><code>survey_data_wide |&gt;
  count(age, gender)</code></pre>
<pre><code>## # A tibble: 24 × 3
##      age gender               n
##    &lt;dbl&gt; &lt;chr&gt;            &lt;int&gt;
##  1    18 Female              31
##  2    18 Male                34
##  3    18 Non-binary/Other     3
##  4    19 Female              25
##  5    19 Male                24
##  6    19 Non-binary/Other     6
##  7    20 Female              28
##  8    20 Male                17
##  9    20 Non-binary/Other     3
## 10    21 Female              12
## # ℹ 14 more rows</code></pre>
<p>You’ll see the note that there are 14 more rows, and that you can use
the <code>print()</code> function to view more. You can do this you can
do this by specifiying the amount of rows (in this case there are
24)</p>
<pre class="r"><code>survey_data_wide |&gt;
  count(age, gender) |&gt;
  print(n = 24)</code></pre>
<p>You can keep adding additional variables to these, noting that each
variable will add additional rows. If you don’t want to look at the
values in the R console, you can use the <code>View()</code> function to
open it in a separate tab.</p>
<pre class="r"><code>survey_data_wide |&gt;
  count(age, gender, year_of_study) |&gt;
  View()</code></pre>
<p>If this is something you want to come back to, you can save it into
an R object.</p>
<pre class="r"><code>demographics_count &lt;- survey_data_wide |&gt;
  count(age, gender, year_of_study)

View(demographics_count)</code></pre>
<p>A final thing that can be helpful with the <code>count()</code>
function is adding in the proportion that each sum represents in the
total sample.</p>
<div class="walkthrough">
<pre class="r"><code>survey_data_wide |&gt;
  count(gender) |&gt;
  mutate(prop = n / sum(n))</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ol style="list-style-type: decimal">
<li>Start by piping the <code>survey_wide</code> object to the
<code>count()</code> function like we’ve been doing.</li>
<li>Add another pipe to indicate we are passing that count to another
function.</li>
<li><code>mutate(prop</code> creates a new column called
<code>prop</code>, which stands for proportion (you can name this
whatever you want).</li>
<li>Everything on the right side of the <code>=</code> is assigned to
the new <code>prop</code> column.</li>
<li><code>n</code> is the count for each gender category, and
<code>sum(n)</code> is the total number of every row/person in the
sample.</li>
<li><code>n / sum(n))</code> calculates
<code>"count of each category" / "total count"</code>, which gives a
proportion.</li>
</ol>
</div>
</div>
<div id="your-turn" class="section level2">
<h2>Your Turn!</h2>
<div class="question">
<p>See if you can create the following from the
<code>survey_data_wide</code> object:</p>
<ol style="list-style-type: decimal">
<li>A count of each <code>year_of_study</code> category.</li>
</ol>
<pre class="r fold-hide"><code>survey_data_wide |&gt;
  count(year_of_study)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>A count of each <code>year_of_study</code> and
<code>hours_per_day</code>.</li>
</ol>
<pre class="r fold-hide"><code>survey_data_wide |&gt;
  count(year_of_study, hours_per_day)</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>The count of <code>year_of_study</code> and its proportion.</li>
</ol>
<pre class="r fold-hide"><code>survey_data_wide |&gt;
  count(year_of_study) |&gt;
  mutate(prop = n / sum(n))</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>The count of <code>year_of_study</code>, <code>hours_per_day</code>,
and the proportion</li>
</ol>
<pre class="r fold-hide"><code>survey_data_wide |&gt;
  count(year_of_study, hours_per_day) |&gt;
  mutate(prop = n / sum(n))</code></pre>
</div>
</div>
<div id="simple-barplots-as-exploration" class="section level2">
<h2>Simple Barplots as Exploration</h2>
<p>In addition to creating summary tables to explore data, creating
simple plots can be another way to explore your data.</p>
<p>One way to do this, is using the base R <code>barplot()</code>
function. This can be done in a few steps.</p>
<p>In this example, we’re going to plot the categories of the
<code>hours_per_day</code> columns.</p>
<p>First, let’s look at the <code>$</code> operator. When placed after a
data object in R, it allows you to isolate specified columns.</p>
<pre class="r"><code>survey_data_wide$hours_per_day</code></pre>
<p>This will show all the values in that column in the R console. Give
it a try with other columns!</p>
<p>Next, we can also use the <code>table</code> function here, to
generate a quick summary table of that column.</p>
<pre class="r"><code>table(survey_data_wide$hours_per_day)</code></pre>
<p>Give this a try with some other columns!</p>
<p>Now we’re going to save this table as an object called
<code>hours_table</code>.</p>
<pre class="r"><code>hours_table &lt;- table(survey_data_wide$hours_per_day)</code></pre>
<p>Finally, we can feed the <code>hours_table</code> object into the
<code>barplot()</code> function to get our plot.</p>
<pre class="r"><code>barplot(hours_table)</code></pre>
<p><img src="Block8-3_SUR_Making-Sense_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>You might notice that the bars aren’t in any particular order, which
can be a bit annoying. Let’s clean this up by creating adding another
step.</p>
<pre class="r"><code>hours_sorted &lt;- sort(hours_table, decreasing = TRUE)</code></pre>
<pre class="r"><code>barplot(hours_sorted)</code></pre>
<p><img src="Block8-3_SUR_Making-Sense_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>The <code>sort</code> function is telling R that we want to reorder
the values in <code>hours_table</code>, and the
<code>decreasing = TRUE</code> allows us to see the values from biggest
to smallest. You can change this to <code>decreasing = FALSE</code> to
see smallest to biggest.</p>
<p>When exploring data, it’s not always necessary to add labels to our
plots. However, this chart might be something you want to communicate,
so let’s add some labels!</p>
<pre class="r"><code>barplot(hours_sorted,
        main = &quot;Hours per day on social media&quot;,
        xlab = &quot;Hours per day&quot;,
        ylab = &quot;Number of students&quot;)</code></pre>
<p><img src="Block8-3_SUR_Making-Sense_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>With the <code>barplot()</code> function:</p>
<ul>
<li><code>main</code> is the title of the chart.</li>
<li><code>xlab</code> is the label on the x (horizontal) axis.</li>
<li><code>ylad</code> is the label on the y (vertical) axis.</li>
</ul>
</div>
<div id="your-turn-1" class="section level2">
<h2>Your Turn!</h2>
<div class="question">
<ol style="list-style-type: decimal">
<li>Make a barplot for the <code>feel_increase_stress</code> variable,
that orders the bars from biggest to smallest, and has labels for the
title, and both axes.</li>
</ol>
<p>Hint: break this into 3 steps:</p>
<ul>
<li>Create an object that creates a table of the
<code>feel_increase_stress</code> column</li>
<li>Create another object that sorts the table in decreasing order</li>
<li>Create a barplot and add 3 layers of labels.</li>
</ul>
<pre class="r fold-hide"><code>stress_count &lt;- table(survey_data_wide$feel_increase_stress)

stress_sorted &lt;- sort(stress_count, decreasing = TRUE)

barplot(stress_sorted,
        main = &quot;Social media makes me feel anxious or stressed&quot;,
        xlab = &quot;Feeling anxious or stressed&quot;,
        ylab = &quot;Number of students&quot;)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Try this with another column!</li>
</ol>
</div>
</div>
<div id="moving-to-tidy-data" class="section level2">
<h2>Moving to Tidy Data</h2>
<p>As we’ve seen, working with wide data can be helpful for generating
quick summaries and counts. But what if we want to ask something that’s
a bit more complicated?</p>
<div class="question">
<p>In groups, take a look at the data and talk about how you might go
about answering the question, <strong>which platforms are most
used?</strong></p>
</div>
<p>There are certainly ways to do this with the wide data. One way would
be to use the <code>count()</code> function for each individual column.
However, this is a bit clunky, and then you would have to then deal with
merging the responses into a table (not impossible, but it’s more work).
There is a way to do this is a single code chunk, but it becomes overly
long and complicated:</p>
<pre class="r"><code>platform_counts_wide &lt;- survey_wide |&gt;
  summarise(
    across(
      c(`LinkedIn`, Instagram, Reddit, Facebook,
        `X (Twitter)`, TikTok, Snapchat),
      ~ sum(.x))) |&gt;
  pivot_longer(
    cols = everything(),
    names_to = &quot;platform&quot;,
    values_to = &quot;n_users&quot;) |&gt;
  arrange(desc(n_users))

platform_counts_wide</code></pre>
<p>We don’t need to understand this code chunk, it is just an example of
what the code looks like. However, if we shift to <strong>tidy</strong>
data, the code becomes much shorter and simpler.</p>
<p>First, let’s start by taking another look at the tidy data.</p>
<pre class="r"><code>View(survey_data_tidy)</code></pre>
<p>You can see that there is the single <code>platforms</code> column
that we are able to query.</p>
<p>Now, let’s do a count of the different categories in this column.</p>
<pre class="r"><code>survey_data_tidy |&gt;
  count(platforms, name = &quot;n_students&quot;)</code></pre>
<pre><code>## # A tibble: 7 × 2
##   platforms   n_students
##   &lt;chr&gt;            &lt;int&gt;
## 1 Facebook          3200
## 2 Instagram         5340
## 3 LinkedIn          2520
## 4 Reddit            4100
## 5 Snapchat          2420
## 6 TikTok            5480
## 7 X (Twitter)       2960</code></pre>
<p>In this code, we are using the <code>count()</code> function like we
just did, and the <code>name = "n_students"</code> creates a new column
name for the number for each column. <code>"n_students"</code> was used
to show this is the number of students, but you can put anything you
want here, or leave it blank if preferred.</p>
<p>You can see that this code is very simple, but there is a big problem
with the numbers! Because our tidy data adds additional rows to data, we
are seeing numbers in the thousands when our sample size is only 300.
However, when we cleaned the data, we created a unique ID for each
entry. This was to help with re-identifying responses if needed, but it
can also help us with eliminating redundant rows.</p>
<pre class="r"><code>survey_data_tidy |&gt;
  distinct(ID, platforms) |&gt;
  count(platforms, name = &quot;n_students&quot;)</code></pre>
<pre><code>## # A tibble: 7 × 2
##   platforms   n_students
##   &lt;chr&gt;            &lt;int&gt;
## 1 Facebook           160
## 2 Instagram          267
## 3 LinkedIn           126
## 4 Reddit             205
## 5 Snapchat           121
## 6 TikTok             274
## 7 X (Twitter)        148</code></pre>
<p>The <code>distinct()</code> function is telling R that we only want
to keep unique combinations of each student <code>ID</code> and
<code>platform</code>, which eliminates any of the redundancy of the
tidy data. As you can see, the numbers are now accurate to our
sample.</p>
<p>As with before, it can be nice to arrange the numbers from biggest to
smallest.</p>
<pre class="r"><code>survey_data_tidy |&gt;
  distinct(ID, platforms) |&gt;
  count(platforms, name = &quot;n_students&quot;) |&gt;
  arrange(desc(n_students))</code></pre>
<pre><code>## # A tibble: 7 × 2
##   platforms   n_students
##   &lt;chr&gt;            &lt;int&gt;
## 1 TikTok             274
## 2 Instagram          267
## 3 Reddit             205
## 4 Facebook           160
## 5 X (Twitter)        148
## 6 LinkedIn           126
## 7 Snapchat           121</code></pre>
<p>In this case, the <code>arrange()</code> function tells R that we
want to change the order of something, and <code>desc(n_students)</code>
specifies that we want the <code>n_students</code> column, which is the
values for each platform, to be listed in descending order (biggest to
smallest).</p>
<p>Finally, once we’re happy with the output of this code chunk, we can
save it as an R object to revisit. We’ll call the object
<code>platform_count</code>, and now we can easily view and work with it
going forward.</p>
<pre class="r"><code>platform_count &lt;- survey_data_tidy |&gt;
  distinct(ID, platforms) |&gt;
  count(platforms, name = &quot;n_students&quot;) |&gt;
  arrange(desc(n_students))</code></pre>
</div>
<div id="going-deeper-with-tidy-data" class="section level2">
<h2>Going Deeper with Tidy Data</h2>
<p>Let’s keep digging into the tidy data, and start asking questions
that are related to our bigger research question, <strong>“How does
social media usage influence the mental health of university
students?</strong></p>
<div id="comparison-operators" class="section level3">
<h3><strong>Comparison Operators</strong></h3>
<p>Comparison operators allow us to look for specific criteria in our
dataset. These return <code>TRUE</code> or <code>FALSE</code> based on
whether the condition is met.</p>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Meaning</th>
<th>Example</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>==</code></td>
<td>Equal to</td>
<td><code>5 == 5</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>Not equal to</td>
<td><code>5 != 3</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td><code>&lt;</code></td>
<td>Less than</td>
<td><code>3 &lt; 5</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td><code>&gt;</code></td>
<td>Greater than</td>
<td><code>5 &gt; 3</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td><code>&lt;=</code></td>
<td>Less than or equal to</td>
<td><code>3 &lt;= 3</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>Greater than or equal to</td>
<td><code>5 &gt;= 3</code></td>
<td><code>TRUE</code></td>
</tr>
</tbody>
</table>
<p>Once we understand these basic comparison operators, we can combine
them using logical operators to create more complex filtering
conditions.</p>
</div>
<div id="logical-operators" class="section level3">
<h3><strong>Logical Operators</strong></h3>
<p>Logical operators allow us to filter data based on multiple
conditions.</p>
<table>
<colgroup>
<col width="14%" />
<col width="47%" />
<col width="20%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th>Operator</th>
<th>Meaning</th>
<th>Example</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&amp;</code></td>
<td>Logical AND (Both conditions must be TRUE)</td>
<td><code>(5 &gt; 3) &amp; (4 &lt; 6)</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td>Logical OR (At least one condition must be TRUE)</td>
<td><code>(5 &gt; 3) | (4 &gt; 6)</code></td>
<td><code>TRUE</code></td>
</tr>
<tr class="odd">
<td><code>!</code></td>
<td>Logical NOT (Reverses TRUE/FALSE)</td>
<td><code>!(5 &gt; 3)</code></td>
<td><code>FALSE</code></td>
</tr>
</tbody>
</table>
</div>
<div id="asking-questions-with-filtering" class="section level3">
<h3>Asking Questions with Filtering</h3>
<div class="note">
<p>The <code>filter()</code> function returns only the rows that meet a
specified condition.</p>
</div>
<p>From the <code>feel-question</code> column in our tidy data, these
values indicating whether social media makes students feel connected to
others (<code>feel_connected</code>), anxious or stressed
(<code>feel_increase_stress</code>), distracts them from academic work
(<code>feel_distracted</code>), or improves their mood
(<code>feel_improved_mood</code>).</p>
<p>As part of the bigger research question, “How does social media usage
influence the mental health of university students?”, we can use this
variable to start asking the question, <strong>“how many students feel X
because of their social media use?</strong></p>
<div class="walkthrough">
<p>Let’s first start by asking, “how many students feel <strong>anxious
or stressed</strong> because of social media?</p>
<pre class="r"><code>stressed_count &lt;- survey_data_tidy |&gt;
  distinct(ID, feel_question, feel_response) |&gt;
  filter(feel_question == &quot;feel_increase_stress&quot;) |&gt;
  count(feel_response, name = &quot;feel_increase_stress&quot;) |&gt;
  arrange(desc(feel_increase_stress))

stressed_count</code></pre>
<pre><code>## # A tibble: 5 × 2
##   feel_response     feel_increase_stress
##   &lt;chr&gt;                            &lt;int&gt;
## 1 Agree                               69
## 2 Disagree                            69
## 3 Neutral                             68
## 4 Strongly disagree                   48
## 5 Strongly agree                      46</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ul>
<li>We start by creating a new R object that will save this information,
called <code>stressed_count</code>.</li>
<li>We then pipe the <code>survey_data_tidy</code> object to indicate we
will manipulate it in some way.</li>
<li>Next, <code>distinct(ID, feel_question, feel_response)</code> tells
R to only keep unique combinations of <code>ID</code>,
<code>feel-question</code>, and <code>feel_response</code>.</li>
<li>This is then piped through to the <code>filter()</code> command, and
<code>feel_question == feel_increase_stress</code> looks for only for
the stressed values in the <code>feel_question</code> column.</li>
<li>This is piped into the <code>count()</code> function, to indicate we
want a count of every unique <code>feel_increase_stress</code> answer in
the <code>feel_response</code> column, and gives names the new column of
counts <code>feel_increase_stress</code>.</li>
<li>Finally, the <code>arrange(desc(feel_increase_stres))</code> line
arranges the values from biggest to smallest.</li>
</ul>
</div>
</div>
</div>
<div id="your-turn-2" class="section level2">
<h2>Your Turn!</h2>
<div class="question">
<p>Hint: Use the code chunk above to guide your solution.</p>
<ol style="list-style-type: decimal">
<li>How many students feel <em>more connected</em> because of their
social media use?</li>
</ol>
<pre class="r fold-hide"><code>connected_count &lt;- survey_data_tidy |&gt;
  distinct(ID, feel_question, feel_response) |&gt;
  filter(feel_question == &quot;feel_connected&quot;) |&gt;
  count(feel_response, name = &quot;feel_connected&quot;) |&gt;
  arrange(desc(feel_connected))

connected_count</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>How many students feel <em>distracted</em> by their social media
use?</li>
</ol>
<pre class="r fold-hide"><code>distracted_count &lt;- survey_data_tidy |&gt;
  distinct(ID, feel_question, feel_response) |&gt;
  filter(feel_question == &quot;feel_distracted&quot;) |&gt;
  count(feel_response, name = &quot;feel_distracted&quot;) |&gt;
  arrange(desc(feel_distracted))

distracted_count</code></pre>
</div>
</div>
<div id="asking-a-research-question" class="section level2">
<h2>Asking a Research Question</h2>
<p>So far the questions we have been asking of our data have related to
counts, which can be very helpful, but may not get to the bigger
research question we want to ask. As part of the bigger research
question, we might want to ask, <strong>“How does heavy usage of social
media affect mental health compared to light usage?</strong></p>
<p>There will be a few steps to answer this question, but let’s break
them down and take them one at a time:</p>
<ol style="list-style-type: decimal">
<li>Define heavy vs. light users</li>
<li>Because the <code>feel_response</code> values are in a Likert scale,
we need to convert them to numbers to allow us to get averages.</li>
<li>Get the average score for each <code>feel_question</code> for both
light and heavy users.</li>
<li>Combine the groups</li>
<li>Plot the comparison</li>
</ol>
<p>Let’s get started!</p>
<div id="defining-heavy-vs.-light-users" class="section level3">
<h3>Defining heavy vs. light users</h3>
<p>In the <code>hours_per_day</code> question, survey respondents were
given four possible answers:</p>
<ul>
<li>Less than 2 hours</li>
<li>2-4 hours</li>
<li>4-6 hours</li>
<li>More than 6 hours</li>
</ul>
<p>For the sake of our analysis, let’s say that respondents that
selected “Less than 2 hours” and “2-4 hours” are <strong>light
users</strong>, and those that selected “4-6 hours” and “More than 6
hours” are <strong>heavy users</strong>.</p>
<div class="walkthrough">
<p>Let’s create a new column in our data to classify respondents as
“light” or “heavy” users based on this criteria.</p>
<pre class="r"><code>survey_data_tidy &lt;- survey_data_tidy |&gt;
  mutate(
    usage_group = case_when(
      hours_per_day %in% c(&quot;Less than 2 hours&quot;, &quot;2-4 hours&quot;) ~ &quot;Light&quot;,
      hours_per_day %in% c(&quot;4-6 hours&quot;, &quot;More than 6 hours&quot;) ~ &quot;Heavy&quot;,
    )
  )</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ul>
<li><code>survey_data_tidy &lt;- survey_data_tidy |&gt;</code> is
telling R that we want to add/do something new to
<code>survey_data_tidy</code> object, and save it back into the
object.</li>
<li>This data is piped into the <code>mutate()</code> function, which is
going to create a new column in our data called
<code>usage_group</code>.</li>
<li>Everything after the <code>=</code> will be where we define what
goes into this new column.</li>
<li>The <code>case_when()</code> function works in the following way:
“if X condition is true, then do Y”.<br />
</li>
<li><code>hours_per_day %in%</code> checks for values that are in the
<code>hours_per_day</code> column, which are specified in the following
brackets.</li>
<li>The <code>c</code> in
<code>c("Less than 2 hours", "2-4 hours")</code> tells R we are looking
for multiple values in the <code>hours_per_day</code> column, which in
this case is “Less than 2 hours” and “2-4 hours”.</li>
<li>If <code>hours_per_day</code> equals either of these values, they
will be give the value “Light” in the new column.</li>
<li><code>hours_per_day %in% c("4-6 hours", "More than 6 hours") ~ "Heavy"</code>
does this same process, but if these new conditions are met, they will
be given the value “Heavy” in the new column.</li>
</ul>
</div>
<p>Let’s take a look at <code>survey_data_tidy</code> to see this new
column.</p>
<pre class="r"><code>View(survey_data_tidy)</code></pre>
</div>
<div id="convert-feel-responses-to-numbers" class="section level3">
<h3>Convert Feel Responses to Numbers</h3>
<p>The feel responses are in a Likert/textual format, and calculating
the average of text isn’t something that is possible (the text must be
counted or quantified, then calculated). To allow us to find the
average, we’re going to create another column that applies numerical
values to each Likert response.</p>
<div class="walkthrough">
<p>Converting Likert responses to numbers.</p>
<pre class="r"><code>survey_data_tidy &lt;- survey_data_tidy |&gt;
  mutate(
    feel_score = case_when(
      feel_response == &quot;Strongly disagree&quot; ~ 1,
      feel_response == &quot;Disagree&quot;          ~ 2,
      feel_response == &quot;Neutral&quot;           ~ 3,
      feel_response == &quot;Agree&quot;             ~ 4,
      feel_response == &quot;Strongly agree&quot;    ~ 5,
    )
  )</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ul>
<li><code>survey_data_tidy &lt;- survey_data_tidy |&gt;</code> is
telling R that we want to add/do something new to
<code>survey_data_tidy</code> object, and save it back into the
object.</li>
<li>The data is piped into the <code>mutate()</code> function, which is
going to create a new column.</li>
<li>The new column will be called <code>feel_score</code>, and will
contain all the information after the <code>=</code>.</li>
<li>Much like the previous example, we are using
<code>case_when()</code> to tell R that if X, then Y.</li>
<li>In this case <code>feel_response == "Strongly disagree" ~ 1</code>,
we are saying, “if the <code>feel_response</code> column has a value
that is”Strongly disagree”, we want to add the value “1” in the new
column.</li>
<li>Repeat for each value in the Likert scale, and we’re ready to
calculate!</li>
</ul>
</div>
<p>Let’s take another look at <code>survey_data_tidy</code>.</p>
<pre class="r"><code>View(survey_data_tidy)</code></pre>
<p>We’re getting close! Let’s now calculate the average for light users.
We’ll do this in two distinct steps.</p>
<div class="walkthrough">
<p>Step 1: Isolate light users into their own grouping</p>
<pre class="r"><code>light_users &lt;- survey_data_tidy |&gt;
  filter(usage_group == &quot;Light&quot;)</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ul>
<li>We’re creating a new R object called <code>light_users</code>, that
will help us easily calculate values in this group.</li>
<li>After piping <code>survey_data_tidy</code>, we use the
<code>filter(user_group == "Light")</code> to select only those rows in
the <code>user_group</code> column that have the value “Light”.</li>
</ul>
</div>
<p>We can view this new object:</p>
<pre class="r"><code>View(light_users)</code></pre>
<div class="walkthrough">
<p>Step 2: Calculate the average of light users’ feel responses</p>
<pre class="r"><code>light_avgs &lt;- light_users |&gt;
  group_by(feel_question) |&gt;
  summarise(
    avg_feel = mean(feel_score),
    .groups = &quot;drop&quot;) |&gt;
  mutate(usage_group = &quot;Light&quot;)</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ul>
<li>We are creating a new object called <code>light_avgs</code> that
will hold the averages for all feel responses for light users.</li>
<li>Pipe the data from the <code>light_users</code> object into
<code>group_by(feel_question)</code>, which tells R to calculate results
separately for each feel question.</li>
<li>This is piped into the <code>summarise()</code> function, which sets
up for the actual calculation we want to conduct.</li>
<li><code>avg_feel</code> will create a new column with the values on
the right side of the <code>=</code>.</li>
<li><code>mean(feel_score)</code> calculates the average score for each
feel response. This will give a table with one row per
<code>feel_question</code>, and one column containing the average for
each (<code>avg_feel</code>).</li>
<li><code>.groups = "drop"</code> tells R to get rid of the grouping
structure it uses to calculate the values. In plain language, “we’re
done grouping, give me a regular table now”.</li>
<li>This is piped into <code>mutate(user_group = "Light")</code> to add
a new column to the table called <code>user_group</code>, and every row
will get the value “Light”. This step is helpful because when we combine
the light and heavy users into one dataset for plotting, this will keep
all the values sorted by their usage groups.</li>
</ul>
</div>
<p>Let’s take a look at the new table we created!</p>
<pre class="r"><code>light_avgs</code></pre>
</div>
</div>
<div id="your-turn-3" class="section level2">
<h2>Your Turn!</h2>
<div class="question">
<p>Now that you’ve seen how this works for the light users, see if you
can do this for heavy users. This is a secret of using a coding
language, where you don’t need to write every line from scratch, and you
just need to understand code chunks enough to know what parts to
change.</p>
<ol style="list-style-type: decimal">
<li>Isolate heavy users into their own group, and save it as an object
called <code>heavy_users</code></li>
</ol>
<pre class="r fold-hide"><code>heavy_users &lt;- survey_data_tidy |&gt;
  filter(usage_group == &quot;Heavy&quot;)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Calculate the average of heavy users’ feel responses, and save it as
an object called <code>heavy_avgs</code>.</li>
</ol>
<pre class="r fold-hide"><code>heavy_avgs &lt;- heavy_users |&gt;
  group_by(feel_question) |&gt;
  summarise(
    avg_feel = mean(feel_score),
    .groups = &quot;drop&quot;) |&gt;
  mutate(usage_group = &quot;Heavy&quot;)</code></pre>
</div>
<div id="combine-the-groups" class="section level3">
<h3>Combine the Groups</h3>
<p>We’re getting close! The next step we need to do is combine the light
and heavy usage groups to make it very easy to plot. This can be done
with a single line of code.</p>
<div class="walkthrough">
<p>Combining the light and heavy user averages.</p>
<pre class="r"><code>feel_avgs &lt;- bind_rows(light_avgs, heavy_avgs)</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ul>
<li>We’re creating a new R object called <code>feel_avgs</code> that
will have the averages for all feel responses for both light and heavy
users.</li>
<li>the <code>bind_rows()</code> function takes two or more data frames
that have the **same columns*, and combines them by stacking them
vertically.</li>
<li><code>lights_avgs</code> and <code>heavy_avgs</code> are the two
objects that have the averages, and this will effectively combine
them.</li>
</ul>
</div>
<p>Let’s take a look.</p>
<pre class="r"><code>feel_avgs</code></pre>
</div>
<div id="plotting-the-results" class="section level3">
<h3>Plotting the Results</h3>
<p>Now that we have our data ready to go, we can now put it into a plot.
Earlier in this session we used the <code>barplot()</code> function,
which is great as a quick way to visualize data in bar charts. However,
a much more powerful visualization package, that is part of the
Tidyverse, is ggplot2.</p>
<p>This will not be a deep dive into ggplot2, but if you are interested
in learning more, check out the session on
<a href="Block5-2_ggplot.html">Visualization with ggplot</a>.</p>
<p>ggplot offers a number of different visualization types, and as it
works in “layers”, you can keep adding more elements to your
visualizations, making it an extremely powerful and precise tool. As
mentioned, this won’t be a deep dive, but we’ll take a look at what
visualizing our data in ggplot can do for our data.</p>
<div class="walkthrough">
<p>Visualizing the questions “How does heavy usage of social media
affect mental health compared to light usage?”</p>
<pre class="r"><code>ggplot(feel_avgs, aes(x = feel_question, y = avg_feel, fill = usage_group)) +
  geom_col(position = &quot;dodge&quot;)</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<ul>
<li>Every visualization with ggplot starts with the
<code>ggplot()</code> command to tell R that we’re going to make a
plot.</li>
<li>The first element to go in the brackets is the data we want to plot,
which in this case is <code>feel_avgs</code>.</li>
<li>After a comma <code>,</code> we use the <code>aes()</code> function
to describe the aesthetics of what the plot will look like. In this
case, we specify that the x-axis will contain <code>feel_question</code>
column in the table, and the y-axis will contain <code>avg_feel</code>,
which is the averages. <code>fill = usage_group</code> indicates that we
want each usage group to be filled with a different colour.</li>
<li>Now that we’ve specified the aesthetics, we insert a plus sign
<code>+</code> to add additional elements.</li>
<li><code>geom_col()</code> specifies the geom, or type of chart we want
to make (there are many!), and <code>position = "dodge"</code> tells R
that we want a separate column for light and heavy users, instead of a
stacked column.</li>
</ul>
</div>
<p>You’ll see that there’s now a plot in the viewer pane in RStudio
(bottom right). Before we get to the data insights from the plot, it’s
worth noting that there’s an issue with the chart. On the y-axis, we see
numbers, which aren’t very good at communicating the Likert scale we’re
visualizing, and the numbers end at 3 (they are chopped off because
that’s where the averages stop). To communicate these findings more
effectively, let’s update the y-axis to be more descriptive and easier
to interpret.</p>
<div class="walkthrough">
<p>Cleaning up the y-axis of our plot</p>
<pre class="r"><code>ggplot(feel_avgs, aes(x = feel_question, y = avg_feel, fill = usage_group)) +
  geom_col(position = &quot;dodge&quot;) +
  scale_y_continuous(
    breaks = 1:5,
    labels = c(
      &quot;1 = Strongly disagree&quot;,
      &quot;2 = Disagree&quot;,
      &quot;3 = Neutral&quot;,
      &quot;4 = Agree&quot;,
      &quot;5 = Strongly agree&quot;
    )
  ) +
  expand_limits(y = 5)</code></pre>
<p><strong>Step-by-step explanation:</strong></p>
<p>Beginning where we left off at the first plot,</p>
<ul>
<li>We and a plus sign <code>+</code> to tell R we want to add another
layer.</li>
<li><code>scale_y_continuous(</code> tells R we want to change how the
y-axis looks, and everything in these brackets will add to this.</li>
<li><code>breaks = 1:5</code> tells R that we want to put tick marks at
the values 1, 2, 3, 4, 5. <code>1:5</code> is shorthand for all the
numbers between 1-5.</li>
<li>Don’t forget to separate the line with the comma
<code>,</code>!</li>
<li><code>labels = c("1 = Strongly disagree, ...)</code> replaces the
numbers on the y-axis with whatever textual labels are put in the
quotation marks. Because we specified <code>breaks = 1:5</code>, it will
accept five values. This can be expanded or reduced according to your
plot.</li>
<li>There are two end brackets <code>))</code> that need to be closed.
One for <code>scale_y_continuous(</code> command, and one for
<code>labels = c(</code>.</li>
<li>Add another plus sign <code>+</code> to add another layer.</li>
<li><code>expand_limits(y = 5)</code> expands the chart to five tick
marks, to make sure we can show the full scale.</li>
</ul>
</div>
</div>
</div>
<div id="your-turn-4" class="section level2">
<h2>Your Turn</h2>
<div class="question">
<p>The goal of this question is to test yourself in deciphering code
that you might not be familiar with.</p>
<ol style="list-style-type: decimal">
<li>Copy + paste this code in your RStudio editor and run it to see the
results.</li>
<li>Try to determine what each part of the code is doing.</li>
</ol>
<p>Hint: Each functional element, or layer, of ggplot is separated by
the plus sign <code>+</code>.</p>
<pre class="r"><code>avg_feel_plot &lt;- ggplot(feel_avgs, aes(x = feel_question, y = avg_feel, fill = usage_group)) +
  geom_col(position = &quot;dodge&quot;) +
  scale_y_continuous(
    breaks = 1:5,
    labels = c(
      &quot;1 = Strongly disagree&quot;,
      &quot;2 = Disagree&quot;,
      &quot;3 = Neutral&quot;,
      &quot;4 = Agree&quot;,
      &quot;5 = Strongly agree&quot;
    )
  ) +
  expand_limits(y = 5) +
  scale_x_discrete(
    labels = c(
      feel_connected      = &quot;Makes me feel connected&quot;,
      feel_distracted     = &quot;Makes me feel distracted&quot;,
      feel_improved_mood  = &quot;Improves my mood&quot;,
      feel_increase_stress = &quot;Increases my stress&quot;)) +
  scale_fill_discrete(
    name   = NULL,
    labels = c(&quot;Heavy users&quot;, &quot;Light users&quot;)) +
  labs(
    x     = &quot;Agree or disagree about social media and your mental health:&quot;,
    y     = &quot;Average feeling response&quot;,
    title = &quot;Social media and mental health across light and heavy users&quot;) +
  theme( axis.title.y = element_text(angle = 0, vjust = 0.5))

avg_feel_plot</code></pre>
</div>
</div>
<div id="wrapping-up" class="section level2">
<h2>Wrapping Up</h2>
<div id="saving-files" class="section level3">
<h3>Saving files</h3>
<p>We haven’t generated as many files as we did in the previous session,
but you’ll want to save two things:</p>
<ol style="list-style-type: decimal">
<li>The R script for this session: <code>file &gt; save</code></li>
<li>The <code>survey_data_tidy.csv</code> file that has new
columns:</li>
</ol>
<pre class="r"><code>write_csv(survey_data_tidy, &quot;survey_data_analyzed.csv&quot;)</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>The final plot we created:</li>
</ol>
<pre class="r"><code>ggsave(filename = &quot;avg_feel_plot.pdf&quot;, 
  plot = avg_feel_plot, 
  width = 8, 
  height = 6)</code></pre>
<p>In addition to these files, you can imagine that you might want to
save other snapshots of the data (ie. <code>light_users</code>,
<code>heavy_users</code>, etc.).</p>
</div>
<div id="rdata-files" class="section level3">
<h3>RData Files</h3>
<p>In addition to saving data files as <code>.csv</code>, there is also
the option to save files as <code>.RData</code> files. While a
<code>.csv</code> file saves the data, <code>.RData</code> files
preserve all the objects you have created in the data file, as well as
data types and structures. This wasn’t as useful in the previous
session, because each data file we were saving was a snapshot of a
version, but this dataset now has several objects that we might want to
revisit and build upon. This is how you do this:</p>
<pre class="r"><code>save(survey_data_tidt, &quot;survey_data_analyzed.RData&quot;)</code></pre>
<p>To read in a file saved <code>.RData</code> file, you can use the
<code>load</code> command:</p>
<pre class="r"><code>load(&quot;survey_data_analyzed.RData&quot;)</code></pre>
</div>
<div id="revisiting-our-file-list" class="section level3">
<h3>Revisiting our file list:</h3>
<ul>
<li><code>avg_feel_plot.pdf</code></li>
<li><code>social-media-survey_ORIGINAL.csv</code></li>
<li><code>social-media-survey.csv</code></li>
<li><code>survey_analysis_script.R</code></li>
<li><code>survey_data_analyzed.csv</code></li>
<li><code>survey_data_analyzed.RData</code></li>
<li><code>survey_data_tidy.csv</code></li>
<li><code>survey_data_wide.csv</code></li>
<li><code>survey_data.Rproj</code></li>
<li><code>survey_cleaning_script.R</code></li>
<li><code>survey-data_clean-cols_IDs.csv</code></li>
<li><code>survey-data_clean-cols_no-ID.csv</code></li>
</ul>
<p>You can see that there’s some inconsistency with how files are named
(hyphens <code>-</code> vs underscores <code>_</code>), and you might
want to think about creating folders to start organizing things. While
this is the end of the session, feel free to give this some thought and
map out how you might want to structure these files in folders, and
potentially rename then to better suit your use.</p>
</div>
</div>
<div id="finish" class="section level2">
<h2>Finish</h2>
<p>And that’s it for the workshop! We covered a lot of ground, but there
is also a lot that we weren’t able to cover. The hope is that these
sessions helped build some confidence in your ability to work with R,
and that you use this as a jumping off point for your learning
journey.</p>
</div>
<div id="session-feedback" class="section level2">
<h2>Session Feedback</h2>
<p>Click on the following link: <a
href="https://uvic.libwizard.com/f/survey-data-feedback">Session
feedback</a></p>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTWFraW5nIFNlbnNlIG9mIFN1cnZleSBEYXRhIgpwYWdldGl0bGU6ICJNYWtpbmcgU2Vuc2Ugb2YgU3VydmV5IERhdGEiCm91dHB1dDoKICBodG1sX2RvY3VtZW50OgogICAgY29kZV9mb2xkaW5nOiBzaG93ICMgYWxsb3dzIHRvZ2dsaW5nIG9mIHNob3dpbmcgYW5kIGhpZGluZyBjb2RlLiBSZW1vdmUgaWYgbm90IHVzaW5nIGNvZGUuCiAgICBjb2RlX2Rvd25sb2FkOiB0cnVlICMgYWxsb3dzIHRoZSB1c2VyIHRvIGRvd25sb2FkIHRoZSBzb3VyY2UgLlJtZCBmaWxlLiBSZW1vdmUgaWYgbm90IHVzaW5nIGNvZGUuCiAgICBpbmNsdWRlczoKICAgICAgYWZ0ZXJfYm9keTogZm9vdGVyLmh0bWwgIyBpbmNsdWRlIGEgY3VzdG9tIGZvb3Rlci4KICAgIHRvYzogdHJ1ZQogICAgdG9jX2RlcHRoOiAzCiAgICB0b2NfZmxvYXQ6CiAgICAgIGNvbGxhcHNlZDogZmFsc2UKICAgICAgc21vb3RoX3Njcm9sbDogZmFsc2UKLS0tCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQobWVzc2FnZSA9IEZBTFNFLCB3YXJuaW5ncyA9IEZBTFNFKQpgYGAKCiMjIE1ha2luZyBTZW5zZSBvZiBTdXJ2ZXkgRGF0YQoKTm93IHRoYXQgd2UgaGF2ZSBjbGVhbmVkIHVwIG91ciBzdXJ2ZXkgZGF0YSwgd2UgY2FuIHN0YXJ0IGFza2luZyBxdWVzdGlvbnMgYWJvdXQgaXQhIEJ5IHRoZSBlbmQgb2YgdGhlIHByZXZpb3VzIHNlc3Npb24sIDxhIGhyZWY9IkJsb2NrOC0yX1NVUl9Db2xsZWN0LWFuZF9jbGVhbi5odG1sIj5Db2xsZWN0aW5nIGFuZCBDbGVhbmluZyBTdXJ2ZXkgRGF0YTwvYT4sIHdlIGdlbmVyYXRlZCB0d28gY2xlYW5lZCBkYXRhc2V0czoKCiogYHN1cnZleV9kYXRhX3RpZHkuY3N2YAoqIGBzdXJ2ZXktZGF0YV93aWRlLmNzdmAKCkxvbmcsIG9yICJ0aWR5IiBkYXRhIGFuZCB3aWRlIGRhdGEgZWFjaCBoYXZlIHRoZWlyIHByb3MgYW5kIGNvbnMsIGFuZCBpbiB0aGlzIHNlc3Npb24gd2UncmUgZ29pbmcgdG8gZXhwbG9yZSB0aGUgYmVuZWZpdHMgYW5kIGRyYXdiYWNrcyBvZiBlYWNoIGFzIHdlIGV4cGxvcmUgb3VyIGRhdGEuIEJ1dCBmaXJzdCwgbGV0J3MgdGFrZSBhIG1vbWVudCB0byBkbyBzb21lIHRoaW5raW5nOgoKVG8gYmVnaW4sIGxldCdzIG9wZW4gdXAgb3VyIGAuUlByb2pgIGZpbGUsIHNvIHRoYXQgb3VyIHdvcmtpbmcgZGlyZWN0b3J5IHdpbGwgYmUgY2FwdHVyZWQuIE5vdywgbGV0J3MgY3JlYXRlIGEgbmV3IFIgc2NyaXB0LCBhbmQgY2FsbCBpdCBgc3VydmV5X2FuYWx5c2lzX3NjcmlwdC5SYC4gCgojIyMgTG9hZCB0aGUgVGlkeXZlcnNlCgpOb3cgdGhhdCB3ZSd2ZSBzdGFydGVkIGEgbmV3IHNjcmlwdCwgd2UgbmVlZCB0byBsb2FkIHRoZSBsaWJyYXJpZXMgdGhhdCB3ZSdsbCBiZSB1c2luZywgd2hpY2ggaW4gdGhpcyBjYXNlIGlzIGp1c3QgdGhlIFRpZHl2ZXJzZS4KCmBgYHtyLCBldmFsPVRSVUUsIGluY2x1ZGU9RkFMU0V9CmxpYnJhcnkodGlkeXZlcnNlKQpgYGAKCmBgYHtyLCBldmFsPUZBTFNFfQpsaWJyYXJ5KHRpZHl2ZXJzZSkKYGBgCgojIyMgTG9hZCB0aGUgZGF0YQoKV2UgY2FuIG5vdyBsb2FkIHRoZSB0d28gZGF0YXNldHMgdGhhdCB3ZXJlIGdlbmVyYXRlZCBpbiB0aGUgcHJldmlvdXMgc2Vzc2lvbjoKCmBgYHtyLCBldmFsPVRSVUUsIGluY2x1ZGU9RkFMU0V9CnN1cnZleV9kYXRhX3RpZHkgPC0gcmVhZF9jc3YoImRhdGEvc3VydmV5LWNsZWFuaW5nLXdvcmtzaG9wL3N1cnZleV9kYXRhX3RpZHkuY3N2IikKYGBgCgpgYGB7ciwgZXZhbD1UUlVFLCBpbmNsdWRlPUZBTFNFfQpzdXJ2ZXlfZGF0YV93aWRlIDwtIHJlYWRfY3N2KCJkYXRhL3N1cnZleS1jbGVhbmluZy13b3Jrc2hvcC9zdXJ2ZXlfZGF0YV93aWRlLmNzdiIpCmBgYAoKYGBge3IsIGV2YWw9RkFMU0V9CnN1cnZleV9kYXRhX3RpZHkgPC0gcmVhZF9jc3YoInN1cnZleV9kYXRhX3RpZHkuY3N2IikKYGBgCgpgYGB7ciwgZXZhbD1GQUxTRX0Kc3VydmV5X2RhdGFfd2lkZSA8LSByZWFkX2Nzdigic3VydmV5X2RhdGFfd2lkZS5jc3YiKQpgYGAKCgo6OjpxdWVzdGlvbgoKMSkgVGFrZSBhIGxvb2sgYXQgYHN1cnZleV9kYXRhX3RpZHlgIGFuZCBgc3VydmV5LWRhdGFfd2lkZWAgdXNpbmcgdGhlIGBWaWV3KClgIGNvbW1hbmQuIApgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIGV2YWwgPSBGQUxTRX0KVmlldyhzdXJ2ZXlfZGF0YV90aWR5KQpWaWV3KHN1cnZleV9kYXRhX3dpZGUpCmBgYAoyKSBJbiBncm91cHMsIHNwZW5kIGEgZmV3IG1pbnV0ZXMgdGFsa2luZyBhYm91dCBzb21lIHRoaW5ncyB5b3UnZCBsaWtlIHRvIGtub3cgYWJvdXQgdGhlIGRhdGEgKGllLiBncm91cHMgeW91J2QgbGlrZSB0byBjb3VudCwgcG9zc2libGUgcmVsYXRpb25zaGlwcywgZXRjLikuCgozKSBUYWtpbmcgYSBjbG9zZXIgbG9vayBhdCB0aGUgYHRpZHlgIGFuZCBgd2lkZWAgZGF0YXNldHMsIGNhbiB5b3UgdGhpbmsgb2YgcmVhc29ucyB3aHkgY2VydGFpbiBxdWVzdGlvbnMgbWlnaHQgYmUgYmV0dGVyIHdpdGggZWl0aGVyIG9uZSBvZiB0aGUgZGF0YXNldHM/Cgo6OjoKCiMjIEV4cGxvcmluZyBXaWRlIERhdGEKCldpZGUgZGF0YSBpcyBlYXNpZXIgZm9yIGh1bWFucyB0byByZWFkIGFuZCBpbnRlcnByZXQsIGFuZCBsZW5kcyBpdHNlbGYgd2VsbCB0byBhc2tpbmcgc2ltcGxlIHF1ZXN0aW9ucyBmcm9tIHNpbmdsZSB2YXJpYWJsZXMsIG9yIGNvbHVtbnMsIG9mIGRhdGEuIFRpZHkgZGF0YSBpcyBiZXR0ZXIgZm9yIGFza2luZyBtb3JlIGNvbXBsaWNhdGVkIHF1ZXN0aW9ucywgYXMgd2VsbCBhcyBhc2tpbmcgYWJvdXQgbXVsdGlwbGUgdmFyaWFibGVzIGFuZCBwb3NzaWJsZSByZWxhdGlvbnNoaXBzIGJldHdlZW4gdGhlbS4gTGV0J3MgZmlyc3Qgc3RhcnQgd2l0aCBzb21lIHNpbXBsZSBxdWVzdGlvbnMgd2UgY2FuIGFzayBmcm9tIHRoZSAqKndpZGUgdmVyc2lvbioqIG9mIG91ciBkYXRhLgoKQSBzaW1wbGUgZmlyc3Qgc3RlcCB3aGVuIGV4cGxvcmluZyBhIGRhdGFzZXQgaXMgZ2V0dGluZyBjb3VudHMgb2YgaW5kaXZpZHVhbCB2YXJpYWJsZXMuIFRvIGRvIHRoaXMsIHdlIGNhbiB1c2UgdGhlIGBjb3VudCgpYCBmdW5jdGlvbjoKCjo6OndhbGt0aHJvdWdoCgoqKldoYXQgZG9lcyB0aGUgc2FtcGxlIGJyZWFka2Rvd24gb2YgZ2VuZGVyPyoqCmBgYHtyLCBldmFsPUZBTFNFfQpzdXJ2ZXlfZGF0YV93aWRlIHw+CiAgY291bnQoZ2VuZGVyKQpgYGAKCioqU3RlcC1ieS1zdGVwIGV4cGxhbmF0aW9uOioqCgoxKSBXZSBzdGFydCB3aXRoIHRoZSBgc3VydmV5X2RhdGFfd2lkZWAgb2JqZWN0IGFuZCB1c2UgdGhlIHBpcGUsIGB8PmAsIHRvIGluZGljYXRlIHdlIHdhbnQgdG8gZG8gc29tZXRoaW5nIHdpdGggaXQuCjIpIFdlIHRoZW4gdXNlIHRoZSBgY291bnQoKWAgZnVuY3Rpb24gdG8gZ2l2ZSB1cyBhIHRvdGFsIHN1bSBvZiB3aGF0ZXZlciB2YXJpYWJsZS9jb2x1bW4gbmFtZSB3ZSBwdXQgaW5zaWRlIHRoZSBicmFja2V0cy4KOjo6CgoqKldoYXQgaXMgdGhlIHNhbXBsZSBicmVha2Rvd24gb2YgYWdlPyoqCmBgYHtyLCBldmFsPUZBTFNFfQpzdXJ2ZXlfZGF0YV93aWRlIHw+CiAgY291bnQoYWdlKQpgYGAKCkluIGFkZGl0aW9uIHRvIGxvb2tpbmcgYXQgc2luZ2xlIHZhcmlhYmxlcyB3aXRoIHRoZSBgY291bnQoKWAgZnVuY3Rpb24sIHdlIGNhbiBhbHNvIGdlbmVyYXRlIHF1aWNrIHN1bW1hcnkgdGFibGVzIGFjcm9zcyBtdWx0aXBsZSB2YXJpYWJsZXMgYnkgc2VwYXJhdGluZyB0aGVtIHdpdGggY29tbWFzIGAsYDoKCioqV2hhdCBpcyB0aGUgc2FtcGxlIGJyZWFrZG93biBvZiBhZ2UgYW5kIGdlbmRlcj8qKgpgYGB7ciwgZXZhbD1UUlVFfQpzdXJ2ZXlfZGF0YV93aWRlIHw+CiAgY291bnQoYWdlLCBnZW5kZXIpCmBgYAoKWW91J2xsIHNlZSB0aGUgbm90ZSB0aGF0IHRoZXJlIGFyZSAxNCBtb3JlIHJvd3MsIGFuZCB0aGF0IHlvdSBjYW4gdXNlIHRoZSBgcHJpbnQoKWAgZnVuY3Rpb24gdG8gdmlldyBtb3JlLiBZb3UgY2FuIGRvIHRoaXMgeW91IGNhbiBkbyB0aGlzIGJ5IHNwZWNpZml5aW5nIHRoZSBhbW91bnQgb2Ygcm93cyAoaW4gdGhpcyBjYXNlIHRoZXJlIGFyZSAyNCkKYGBge3IsIGV2YWw9RkFMU0V9CnN1cnZleV9kYXRhX3dpZGUgfD4KICBjb3VudChhZ2UsIGdlbmRlcikgfD4KICBwcmludChuID0gMjQpCmBgYAoKWW91IGNhbiBrZWVwIGFkZGluZyBhZGRpdGlvbmFsIHZhcmlhYmxlcyB0byB0aGVzZSwgbm90aW5nIHRoYXQgZWFjaCB2YXJpYWJsZSB3aWxsIGFkZCBhZGRpdGlvbmFsIHJvd3MuIElmIHlvdSBkb24ndCB3YW50IHRvIGxvb2sgYXQgdGhlIHZhbHVlcyBpbiB0aGUgUiBjb25zb2xlLCB5b3UgY2FuIHVzZSB0aGUgYFZpZXcoKWAgZnVuY3Rpb24gdG8gb3BlbiBpdCBpbiBhIHNlcGFyYXRlIHRhYi4KYGBge3IsIGV2YWw9RkFMU0V9CnN1cnZleV9kYXRhX3dpZGUgfD4KICBjb3VudChhZ2UsIGdlbmRlciwgeWVhcl9vZl9zdHVkeSkgfD4KICBWaWV3KCkKYGBgCgpJZiB0aGlzIGlzIHNvbWV0aGluZyB5b3Ugd2FudCB0byBjb21lIGJhY2sgdG8sIHlvdSBjYW4gc2F2ZSBpdCBpbnRvIGFuIFIgb2JqZWN0LgpgYGB7ciwgZXZhbD1GQUxTRX0KZGVtb2dyYXBoaWNzX2NvdW50IDwtIHN1cnZleV9kYXRhX3dpZGUgfD4KICBjb3VudChhZ2UsIGdlbmRlciwgeWVhcl9vZl9zdHVkeSkKClZpZXcoZGVtb2dyYXBoaWNzX2NvdW50KQpgYGAKCkEgZmluYWwgdGhpbmcgdGhhdCBjYW4gYmUgaGVscGZ1bCB3aXRoIHRoZSBgY291bnQoKWAgZnVuY3Rpb24gaXMgYWRkaW5nIGluIHRoZSBwcm9wb3J0aW9uIHRoYXQgZWFjaCBzdW0gcmVwcmVzZW50cyBpbiB0aGUgdG90YWwgc2FtcGxlLgoKOjo6d2Fsa3Rocm91Z2gKYGBge3IsIGV2YWw9RkFMU0V9CnN1cnZleV9kYXRhX3dpZGUgfD4KICBjb3VudChnZW5kZXIpIHw+CiAgbXV0YXRlKHByb3AgPSBuIC8gc3VtKG4pKQpgYGAKCioqU3RlcC1ieS1zdGVwIGV4cGxhbmF0aW9uOioqCgoxKSBTdGFydCBieSBwaXBpbmcgdGhlIGBzdXJ2ZXlfd2lkZWAgb2JqZWN0IHRvIHRoZSBgY291bnQoKWAgZnVuY3Rpb24gbGlrZSB3ZSd2ZSBiZWVuIGRvaW5nLgoyKSBBZGQgYW5vdGhlciBwaXBlIHRvIGluZGljYXRlIHdlIGFyZSBwYXNzaW5nIHRoYXQgY291bnQgdG8gYW5vdGhlciBmdW5jdGlvbi4KMykgYG11dGF0ZShwcm9wYCBjcmVhdGVzIGEgbmV3IGNvbHVtbiBjYWxsZWQgYHByb3BgLCB3aGljaCBzdGFuZHMgZm9yIHByb3BvcnRpb24gKHlvdSBjYW4gbmFtZSB0aGlzIHdoYXRldmVyIHlvdSB3YW50KS4KNCkgRXZlcnl0aGluZyBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgYD1gIGlzIGFzc2lnbmVkIHRvIHRoZSBuZXcgYHByb3BgIGNvbHVtbi4gCjUpIGBuYCBpcyB0aGUgY291bnQgZm9yIGVhY2ggZ2VuZGVyIGNhdGVnb3J5LCBhbmQgYHN1bShuKWAgaXMgdGhlIHRvdGFsIG51bWJlciBvZiBldmVyeSByb3cvcGVyc29uIGluIHRoZSBzYW1wbGUuCjYpIGBuIC8gc3VtKG4pKWAgY2FsY3VsYXRlcyBgImNvdW50IG9mIGVhY2ggY2F0ZWdvcnkiIC8gInRvdGFsIGNvdW50ImAsIHdoaWNoIGdpdmVzIGEgcHJvcG9ydGlvbi4KCjo6OgoKIyMgWW91ciBUdXJuIQoKOjo6cXVlc3Rpb24KU2VlIGlmIHlvdSBjYW4gY3JlYXRlIHRoZSBmb2xsb3dpbmcgZnJvbSB0aGUgYHN1cnZleV9kYXRhX3dpZGVgIG9iamVjdDoKCjEpIEEgY291bnQgb2YgZWFjaCBgeWVhcl9vZl9zdHVkeWAgY2F0ZWdvcnkuCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJywgZXZhbD1GQUxTRX0Kc3VydmV5X2RhdGFfd2lkZSB8PgogIGNvdW50KHllYXJfb2Zfc3R1ZHkpCmBgYAoyKSBBIGNvdW50IG9mIGVhY2ggYHllYXJfb2Zfc3R1ZHlgIGFuZCBgaG91cnNfcGVyX2RheWAuCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJywgZXZhbD1GQUxTRX0Kc3VydmV5X2RhdGFfd2lkZSB8PgogIGNvdW50KHllYXJfb2Zfc3R1ZHksIGhvdXJzX3Blcl9kYXkpCmBgYAozKSBUaGUgY291bnQgb2YgYHllYXJfb2Zfc3R1ZHlgIGFuZCBpdHMgcHJvcG9ydGlvbi4KYGBge3IsIGNsYXNzLnNvdXJjZSA9ICdmb2xkLWhpZGUnLCBldmFsPUZBTFNFfQpzdXJ2ZXlfZGF0YV93aWRlIHw+CiAgY291bnQoeWVhcl9vZl9zdHVkeSkgfD4KICBtdXRhdGUocHJvcCA9IG4gLyBzdW0obikpCmBgYAo0KSBUaGUgY291bnQgb2YgYHllYXJfb2Zfc3R1ZHlgLCBgaG91cnNfcGVyX2RheWAsIGFuZCB0aGUgcHJvcG9ydGlvbgpgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIGV2YWw9RkFMU0V9CnN1cnZleV9kYXRhX3dpZGUgfD4KICBjb3VudCh5ZWFyX29mX3N0dWR5LCBob3Vyc19wZXJfZGF5KSB8PgogIG11dGF0ZShwcm9wID0gbiAvIHN1bShuKSkKYGBgCjo6OgoKIyMgU2ltcGxlIEJhcnBsb3RzIGFzIEV4cGxvcmF0aW9uCgpJbiBhZGRpdGlvbiB0byBjcmVhdGluZyBzdW1tYXJ5IHRhYmxlcyB0byBleHBsb3JlIGRhdGEsIGNyZWF0aW5nIHNpbXBsZSBwbG90cyBjYW4gYmUgYW5vdGhlciB3YXkgdG8gZXhwbG9yZSB5b3VyIGRhdGEuCgpPbmUgd2F5IHRvIGRvIHRoaXMsIGlzIHVzaW5nIHRoZSBiYXNlIFIgYGJhcnBsb3QoKWAgZnVuY3Rpb24uIFRoaXMgY2FuIGJlIGRvbmUgaW4gYSBmZXcgc3RlcHMuCgoKSW4gdGhpcyBleGFtcGxlLCB3ZSdyZSBnb2luZyB0byBwbG90IHRoZSBjYXRlZ29yaWVzIG9mIHRoZSBgaG91cnNfcGVyX2RheWAgY29sdW1ucy4KCkZpcnN0LCBsZXQncyBsb29rIGF0IHRoZSBgJGAgb3BlcmF0b3IuIFdoZW4gcGxhY2VkIGFmdGVyIGEgZGF0YSBvYmplY3QgaW4gUiwgaXQgYWxsb3dzIHlvdSB0byBpc29sYXRlIHNwZWNpZmllZCBjb2x1bW5zLgoKYGBge3IsIGV2YWw9RkFMU0V9CnN1cnZleV9kYXRhX3dpZGUkaG91cnNfcGVyX2RheQpgYGAKClRoaXMgd2lsbCBzaG93IGFsbCB0aGUgdmFsdWVzIGluIHRoYXQgY29sdW1uIGluIHRoZSBSIGNvbnNvbGUuIEdpdmUgaXQgYSB0cnkgd2l0aCBvdGhlciBjb2x1bW5zIQoKTmV4dCwgd2UgY2FuIGFsc28gdXNlIHRoZSBgdGFibGVgIGZ1bmN0aW9uIGhlcmUsIHRvIGdlbmVyYXRlIGEgcXVpY2sgc3VtbWFyeSB0YWJsZSBvZiB0aGF0IGNvbHVtbi4KCmBgYHtyLCBldmFsPUZBTFNFfQp0YWJsZShzdXJ2ZXlfZGF0YV93aWRlJGhvdXJzX3Blcl9kYXkpCmBgYAoKR2l2ZSB0aGlzIGEgdHJ5IHdpdGggc29tZSBvdGhlciBjb2x1bW5zIQoKTm93IHdlJ3JlIGdvaW5nIHRvIHNhdmUgdGhpcyB0YWJsZSBhcyBhbiBvYmplY3QgY2FsbGVkIGBob3Vyc190YWJsZWAuCgpgYGB7ciwgZXZhbD1UUlVFfQpob3Vyc190YWJsZSA8LSB0YWJsZShzdXJ2ZXlfZGF0YV93aWRlJGhvdXJzX3Blcl9kYXkpCmBgYAoKRmluYWxseSwgd2UgY2FuIGZlZWQgdGhlIGBob3Vyc190YWJsZWAgb2JqZWN0IGludG8gdGhlIGBiYXJwbG90KClgIGZ1bmN0aW9uIHRvIGdldCBvdXIgcGxvdC4KCmBgYHtyLCBldmFsPVRSVUV9CmJhcnBsb3QoaG91cnNfdGFibGUpCmBgYAoKWW91IG1pZ2h0IG5vdGljZSB0aGF0IHRoZSBiYXJzIGFyZW4ndCBpbiBhbnkgcGFydGljdWxhciBvcmRlciwgd2hpY2ggY2FuIGJlIGEgYml0IGFubm95aW5nLiBMZXQncyBjbGVhbiB0aGlzIHVwIGJ5IGNyZWF0aW5nIGFkZGluZyBhbm90aGVyIHN0ZXAuIAoKYGBge3IsIGV2YWw9VFJVRX0KaG91cnNfc29ydGVkIDwtIHNvcnQoaG91cnNfdGFibGUsIGRlY3JlYXNpbmcgPSBUUlVFKQpgYGAKCmBgYHtyLCBldmFsPVRSVUV9CmJhcnBsb3QoaG91cnNfc29ydGVkKQpgYGAKClRoZSBgc29ydGAgZnVuY3Rpb24gaXMgdGVsbGluZyBSIHRoYXQgd2Ugd2FudCB0byByZW9yZGVyIHRoZSB2YWx1ZXMgaW4gYGhvdXJzX3RhYmxlYCwgYW5kIHRoZSBgZGVjcmVhc2luZyA9IFRSVUVgIGFsbG93cyB1cyB0byBzZWUgdGhlIHZhbHVlcyBmcm9tIGJpZ2dlc3QgdG8gc21hbGxlc3QuIFlvdSBjYW4gY2hhbmdlIHRoaXMgdG8gYGRlY3JlYXNpbmcgPSBGQUxTRWAgdG8gc2VlIHNtYWxsZXN0IHRvIGJpZ2dlc3QuCgpXaGVuIGV4cGxvcmluZyBkYXRhLCBpdCdzIG5vdCBhbHdheXMgbmVjZXNzYXJ5IHRvIGFkZCBsYWJlbHMgdG8gb3VyIHBsb3RzLiBIb3dldmVyLCB0aGlzIGNoYXJ0IG1pZ2h0IGJlIHNvbWV0aGluZyB5b3Ugd2FudCB0byBjb21tdW5pY2F0ZSwgc28gbGV0J3MgYWRkIHNvbWUgbGFiZWxzIQoKYGBge3IsIGV2YWw9VFJVRX0KYmFycGxvdChob3Vyc19zb3J0ZWQsCiAgICAgICAgbWFpbiA9ICJIb3VycyBwZXIgZGF5IG9uIHNvY2lhbCBtZWRpYSIsCiAgICAgICAgeGxhYiA9ICJIb3VycyBwZXIgZGF5IiwKICAgICAgICB5bGFiID0gIk51bWJlciBvZiBzdHVkZW50cyIpCmBgYAoKV2l0aCB0aGUgYGJhcnBsb3QoKWAgZnVuY3Rpb246CgoqIGBtYWluYCBpcyB0aGUgdGl0bGUgb2YgdGhlIGNoYXJ0LgoqIGB4bGFiYCBpcyB0aGUgbGFiZWwgb24gdGhlIHggKGhvcml6b250YWwpIGF4aXMuCiogYHlsYWRgIGlzIHRoZSBsYWJlbCBvbiB0aGUgeSAodmVydGljYWwpIGF4aXMuCgojIyBZb3VyIFR1cm4hCgo6OjpxdWVzdGlvbgoKMSkgTWFrZSBhIGJhcnBsb3QgZm9yIHRoZSBgZmVlbF9pbmNyZWFzZV9zdHJlc3NgIHZhcmlhYmxlLCB0aGF0IG9yZGVycyB0aGUgYmFycyBmcm9tIGJpZ2dlc3QgdG8gc21hbGxlc3QsIGFuZCBoYXMgbGFiZWxzIGZvciB0aGUgdGl0bGUsIGFuZCBib3RoIGF4ZXMuCgpIaW50OiBicmVhayB0aGlzIGludG8gMyBzdGVwczoKCiogQ3JlYXRlIGFuIG9iamVjdCB0aGF0IGNyZWF0ZXMgYSB0YWJsZSBvZiB0aGUgYGZlZWxfaW5jcmVhc2Vfc3RyZXNzYCBjb2x1bW4KKiBDcmVhdGUgYW5vdGhlciBvYmplY3QgdGhhdCBzb3J0cyB0aGUgdGFibGUgaW4gZGVjcmVhc2luZyBvcmRlcgoqIENyZWF0ZSBhIGJhcnBsb3QgYW5kIGFkZCAzIGxheWVycyBvZiBsYWJlbHMuCgpgYGB7ciwgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIGV2YWw9RkFMU0V9CnN0cmVzc19jb3VudCA8LSB0YWJsZShzdXJ2ZXlfZGF0YV93aWRlJGZlZWxfaW5jcmVhc2Vfc3RyZXNzKQoKc3RyZXNzX3NvcnRlZCA8LSBzb3J0KHN0cmVzc19jb3VudCwgZGVjcmVhc2luZyA9IFRSVUUpCgpiYXJwbG90KHN0cmVzc19zb3J0ZWQsCiAgICAgICAgbWFpbiA9ICJTb2NpYWwgbWVkaWEgbWFrZXMgbWUgZmVlbCBhbnhpb3VzIG9yIHN0cmVzc2VkIiwKICAgICAgICB4bGFiID0gIkZlZWxpbmcgYW54aW91cyBvciBzdHJlc3NlZCIsCiAgICAgICAgeWxhYiA9ICJOdW1iZXIgb2Ygc3R1ZGVudHMiKQpgYGAKCjIpIFRyeSB0aGlzIHdpdGggYW5vdGhlciBjb2x1bW4hCgo6OjoKCgojIyBNb3ZpbmcgdG8gVGlkeSBEYXRhCgpBcyB3ZSd2ZSBzZWVuLCB3b3JraW5nIHdpdGggd2lkZSBkYXRhIGNhbiBiZSBoZWxwZnVsIGZvciBnZW5lcmF0aW5nIHF1aWNrIHN1bW1hcmllcyBhbmQgY291bnRzLiBCdXQgd2hhdCBpZiB3ZSB3YW50IHRvIGFzayBzb21ldGhpbmcgdGhhdCdzIGEgYml0IG1vcmUgY29tcGxpY2F0ZWQ/Cgo6OjpxdWVzdGlvbgoKSW4gZ3JvdXBzLCB0YWtlIGEgbG9vayBhdCB0aGUgZGF0YSBhbmQgdGFsayBhYm91dCBob3cgeW91IG1pZ2h0IGdvIGFib3V0IGFuc3dlcmluZyB0aGUgcXVlc3Rpb24sICoqd2hpY2ggcGxhdGZvcm1zIGFyZSBtb3N0IHVzZWQ/KioKCjo6OgoKVGhlcmUgYXJlIGNlcnRhaW5seSB3YXlzIHRvIGRvIHRoaXMgd2l0aCB0aGUgd2lkZSBkYXRhLiBPbmUgd2F5IHdvdWxkIGJlIHRvIHVzZSB0aGUgYGNvdW50KClgIGZ1bmN0aW9uIGZvciBlYWNoIGluZGl2aWR1YWwgY29sdW1uLiBIb3dldmVyLCB0aGlzIGlzIGEgYml0IGNsdW5reSwgYW5kIHRoZW4geW91IHdvdWxkIGhhdmUgdG8gdGhlbiBkZWFsIHdpdGggbWVyZ2luZyB0aGUgcmVzcG9uc2VzIGludG8gYSB0YWJsZSAobm90IGltcG9zc2libGUsIGJ1dCBpdCdzIG1vcmUgd29yaykuIFRoZXJlIGlzIGEgd2F5IHRvIGRvIHRoaXMgaXMgYSBzaW5nbGUgY29kZSBjaHVuaywgYnV0IGl0IGJlY29tZXMgb3Zlcmx5IGxvbmcgYW5kIGNvbXBsaWNhdGVkOgoKYGBge3IsIGV2YWw9RkFMU0V9CnBsYXRmb3JtX2NvdW50c193aWRlIDwtIHN1cnZleV93aWRlIHw+CiAgc3VtbWFyaXNlKAogICAgYWNyb3NzKAogICAgICBjKGBMaW5rZWRJbmAsIEluc3RhZ3JhbSwgUmVkZGl0LCBGYWNlYm9vaywKICAgICAgICBgWCAoVHdpdHRlcilgLCBUaWtUb2ssIFNuYXBjaGF0KSwKICAgICAgfiBzdW0oLngpKSkgfD4KICBwaXZvdF9sb25nZXIoCiAgICBjb2xzID0gZXZlcnl0aGluZygpLAogICAgbmFtZXNfdG8gPSAicGxhdGZvcm0iLAogICAgdmFsdWVzX3RvID0gIm5fdXNlcnMiKSB8PgogIGFycmFuZ2UoZGVzYyhuX3VzZXJzKSkKCnBsYXRmb3JtX2NvdW50c193aWRlCmBgYAoKV2UgZG9uJ3QgbmVlZCB0byB1bmRlcnN0YW5kIHRoaXMgY29kZSBjaHVuaywgaXQgaXMganVzdCBhbiBleGFtcGxlIG9mIHdoYXQgdGhlIGNvZGUgbG9va3MgbGlrZS4gSG93ZXZlciwgaWYgd2Ugc2hpZnQgdG8gKip0aWR5KiogZGF0YSwgdGhlIGNvZGUgYmVjb21lcyBtdWNoIHNob3J0ZXIgYW5kIHNpbXBsZXIuCgpGaXJzdCwgbGV0J3Mgc3RhcnQgYnkgdGFraW5nIGFub3RoZXIgbG9vayBhdCB0aGUgdGlkeSBkYXRhLgoKYGBge3IsIGV2YWw9RkFMU0V9ClZpZXcoc3VydmV5X2RhdGFfdGlkeSkKYGBgCgpZb3UgY2FuIHNlZSB0aGF0IHRoZXJlIGlzIHRoZSBzaW5nbGUgYHBsYXRmb3Jtc2AgY29sdW1uIHRoYXQgd2UgYXJlIGFibGUgdG8gcXVlcnkuCgpOb3csIGxldCdzIGRvIGEgY291bnQgb2YgdGhlIGRpZmZlcmVudCBjYXRlZ29yaWVzIGluIHRoaXMgY29sdW1uLgoKYGBge3IsIGV2YWw9VFJVRX0Kc3VydmV5X2RhdGFfdGlkeSB8PgogIGNvdW50KHBsYXRmb3JtcywgbmFtZSA9ICJuX3N0dWRlbnRzIikKYGBgCgpJbiB0aGlzIGNvZGUsIHdlIGFyZSB1c2luZyB0aGUgYGNvdW50KClgIGZ1bmN0aW9uIGxpa2Ugd2UganVzdCBkaWQsIGFuZCB0aGUgYG5hbWUgPSAibl9zdHVkZW50cyJgIGNyZWF0ZXMgYSBuZXcgY29sdW1uIG5hbWUgZm9yIHRoZSBudW1iZXIgZm9yIGVhY2ggY29sdW1uLiBgIm5fc3R1ZGVudHMiYCB3YXMgdXNlZCB0byBzaG93IHRoaXMgaXMgdGhlIG51bWJlciBvZiBzdHVkZW50cywgYnV0IHlvdSBjYW4gcHV0IGFueXRoaW5nIHlvdSB3YW50IGhlcmUsIG9yIGxlYXZlIGl0IGJsYW5rIGlmIHByZWZlcnJlZC4KCllvdSBjYW4gc2VlIHRoYXQgdGhpcyBjb2RlIGlzIHZlcnkgc2ltcGxlLCBidXQgdGhlcmUgaXMgYSBiaWcgcHJvYmxlbSB3aXRoIHRoZSBudW1iZXJzISBCZWNhdXNlIG91ciB0aWR5IGRhdGEgYWRkcyBhZGRpdGlvbmFsIHJvd3MgdG8gZGF0YSwgd2UgYXJlIHNlZWluZyBudW1iZXJzIGluIHRoZSB0aG91c2FuZHMgd2hlbiBvdXIgc2FtcGxlIHNpemUgaXMgb25seSAzMDAuIEhvd2V2ZXIsIHdoZW4gd2UgY2xlYW5lZCB0aGUgZGF0YSwgd2UgY3JlYXRlZCBhIHVuaXF1ZSBJRCBmb3IgZWFjaCBlbnRyeS4gVGhpcyB3YXMgdG8gaGVscCB3aXRoIHJlLWlkZW50aWZ5aW5nIHJlc3BvbnNlcyBpZiBuZWVkZWQsIGJ1dCBpdCBjYW4gYWxzbyBoZWxwIHVzIHdpdGggZWxpbWluYXRpbmcgcmVkdW5kYW50IHJvd3MuCgpgYGB7ciwgZXZhbD1UUlVFfQpzdXJ2ZXlfZGF0YV90aWR5IHw+CiAgZGlzdGluY3QoSUQsIHBsYXRmb3JtcykgfD4KICBjb3VudChwbGF0Zm9ybXMsIG5hbWUgPSAibl9zdHVkZW50cyIpCmBgYAoKVGhlIGBkaXN0aW5jdCgpYCBmdW5jdGlvbiBpcyB0ZWxsaW5nIFIgdGhhdCB3ZSBvbmx5IHdhbnQgdG8ga2VlcCB1bmlxdWUgY29tYmluYXRpb25zIG9mIGVhY2ggc3R1ZGVudCBgSURgIGFuZCBgcGxhdGZvcm1gLCB3aGljaCBlbGltaW5hdGVzIGFueSBvZiB0aGUgcmVkdW5kYW5jeSBvZiB0aGUgdGlkeSBkYXRhLiBBcyB5b3UgY2FuIHNlZSwgdGhlIG51bWJlcnMgYXJlIG5vdyBhY2N1cmF0ZSB0byBvdXIgc2FtcGxlLgoKQXMgd2l0aCBiZWZvcmUsIGl0IGNhbiBiZSBuaWNlIHRvIGFycmFuZ2UgdGhlIG51bWJlcnMgZnJvbSBiaWdnZXN0IHRvIHNtYWxsZXN0LgoKYGBge3IsIGV2YWw9VFJVRX0Kc3VydmV5X2RhdGFfdGlkeSB8PgogIGRpc3RpbmN0KElELCBwbGF0Zm9ybXMpIHw+CiAgY291bnQocGxhdGZvcm1zLCBuYW1lID0gIm5fc3R1ZGVudHMiKSB8PgogIGFycmFuZ2UoZGVzYyhuX3N0dWRlbnRzKSkKYGBgCgpJbiB0aGlzIGNhc2UsIHRoZSBgYXJyYW5nZSgpYCBmdW5jdGlvbiB0ZWxscyBSIHRoYXQgd2Ugd2FudCB0byBjaGFuZ2UgdGhlIG9yZGVyIG9mIHNvbWV0aGluZywgYW5kIGBkZXNjKG5fc3R1ZGVudHMpYCBzcGVjaWZpZXMgdGhhdCB3ZSB3YW50IHRoZSBgbl9zdHVkZW50c2AgY29sdW1uLCB3aGljaCBpcyB0aGUgdmFsdWVzIGZvciBlYWNoIHBsYXRmb3JtLCB0byBiZSBsaXN0ZWQgaW4gZGVzY2VuZGluZyBvcmRlciAoYmlnZ2VzdCB0byBzbWFsbGVzdCkuCgpGaW5hbGx5LCBvbmNlIHdlJ3JlIGhhcHB5IHdpdGggdGhlIG91dHB1dCBvZiB0aGlzIGNvZGUgY2h1bmssIHdlIGNhbiBzYXZlIGl0IGFzIGFuIFIgb2JqZWN0IHRvIHJldmlzaXQuIFdlJ2xsIGNhbGwgdGhlIG9iamVjdCBgcGxhdGZvcm1fY291bnRgLCBhbmQgbm93IHdlIGNhbiBlYXNpbHkgdmlldyBhbmQgd29yayB3aXRoIGl0IGdvaW5nIGZvcndhcmQuCgpgYGB7ciwgZXZhbD1UUlVFfQpwbGF0Zm9ybV9jb3VudCA8LSBzdXJ2ZXlfZGF0YV90aWR5IHw+CiAgZGlzdGluY3QoSUQsIHBsYXRmb3JtcykgfD4KICBjb3VudChwbGF0Zm9ybXMsIG5hbWUgPSAibl9zdHVkZW50cyIpIHw+CiAgYXJyYW5nZShkZXNjKG5fc3R1ZGVudHMpKQpgYGAKCiMjIEdvaW5nIERlZXBlciB3aXRoIFRpZHkgRGF0YQoKTGV0J3Mga2VlcCBkaWdnaW5nIGludG8gdGhlIHRpZHkgZGF0YSwgYW5kIHN0YXJ0IGFza2luZyBxdWVzdGlvbnMgdGhhdCBhcmUgcmVsYXRlZCB0byBvdXIgYmlnZ2VyIHJlc2VhcmNoIHF1ZXN0aW9uLCAqKiJIb3cgZG9lcyBzb2NpYWwgbWVkaWEgdXNhZ2UgaW5mbHVlbmNlIHRoZSBtZW50YWwgaGVhbHRoIG9mIHVuaXZlcnNpdHkgc3R1ZGVudHM/KioKCiMjIyAqKkNvbXBhcmlzb24gT3BlcmF0b3JzKioKCkNvbXBhcmlzb24gb3BlcmF0b3JzIGFsbG93IHVzIHRvIGxvb2sgZm9yIHNwZWNpZmljIGNyaXRlcmlhIGluIG91ciBkYXRhc2V0LiBUaGVzZSByZXR1cm4gYFRSVUVgIG9yIGBGQUxTRWAgYmFzZWQgb24gd2hldGhlciB0aGUgY29uZGl0aW9uIGlzIG1ldC4KCnwgT3BlcmF0b3IgfCBNZWFuaW5nICAgICAgICAgICAgICAgICAgfCBFeGFtcGxlICB8IFJlc3VsdCB8CnwtLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS18LS0tLS0tLS18CnwgYD09YCAgICAgfCBFcXVhbCB0byAgICAgICAgICAgICAgICAgfCBgNSA9PSA1YCB8IGBUUlVFYCB8CnwgYCE9YCAgICAgfCBOb3QgZXF1YWwgdG8gICAgICAgICAgICAgfCBgNSAhPSAzYCB8IGBUUlVFYCB8CnwgYDxgICAgICAgfCBMZXNzIHRoYW4gICAgICAgICAgICAgICAgfCBgMyA8IDVgICB8IGBUUlVFYCB8CnwgYD5gICAgICAgfCBHcmVhdGVyIHRoYW4gICAgICAgICAgICAgfCBgNSA+IDNgICB8IGBUUlVFYCB8CnwgYDw9YCAgICAgfCBMZXNzIHRoYW4gb3IgZXF1YWwgdG8gICAgfCBgMyA8PSAzYCB8IGBUUlVFYCB8CnwgYD49YCAgICAgfCBHcmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gfCBgNSA+PSAzYCB8IGBUUlVFYCB8CgpPbmNlIHdlIHVuZGVyc3RhbmQgdGhlc2UgYmFzaWMgY29tcGFyaXNvbiBvcGVyYXRvcnMsIHdlIGNhbiBjb21iaW5lIHRoZW0gdXNpbmcgbG9naWNhbCBvcGVyYXRvcnMgdG8gY3JlYXRlIG1vcmUgY29tcGxleCBmaWx0ZXJpbmcgY29uZGl0aW9ucy4KCiMjIyAqKkxvZ2ljYWwgT3BlcmF0b3JzKioKCkxvZ2ljYWwgb3BlcmF0b3JzIGFsbG93IHVzIHRvIGZpbHRlciBkYXRhIGJhc2VkIG9uIG11bHRpcGxlIGNvbmRpdGlvbnMuCgp8IE9wZXJhdG9yIHwgTWVhbmluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRXhhbXBsZSAgICAgICAgICAgICB8IFJlc3VsdCAgfAp8LS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLXwKfCBgJmAgICAgICB8IExvZ2ljYWwgQU5EIChCb3RoIGNvbmRpdGlvbnMgbXVzdCBiZSBUUlVFKSAgICAgICB8IGAoNSA+IDMpICYgKDQgPCA2KWAgfCBgVFJVRWAgIHwKfCBgfGAgICAgICB8IExvZ2ljYWwgT1IgKEF0IGxlYXN0IG9uZSBjb25kaXRpb24gbXVzdCBiZSBUUlVFKSB8IGAoNSA+IDMpIHwgKDQgPiA2KWAgfCBgVFJVRWAgIHwKfCBgIWAgICAgICB8IExvZ2ljYWwgTk9UIChSZXZlcnNlcyBUUlVFL0ZBTFNFKSAgICAgICAgICAgICAgICB8IGAhKDUgPiAzKWAgICAgICAgICAgfCBgRkFMU0VgIHwKCgojIyMgQXNraW5nIFF1ZXN0aW9ucyB3aXRoIEZpbHRlcmluZwoKOjo6bm90ZQoKVGhlIGBmaWx0ZXIoKWAgZnVuY3Rpb24gcmV0dXJucyBvbmx5IHRoZSByb3dzIHRoYXQgbWVldCBhIHNwZWNpZmllZCBjb25kaXRpb24uCgo6OjoKCkZyb20gdGhlIGBmZWVsLXF1ZXN0aW9uYCBjb2x1bW4gaW4gb3VyIHRpZHkgZGF0YSwgdGhlc2UgdmFsdWVzIGluZGljYXRpbmcgd2hldGhlciBzb2NpYWwgbWVkaWEgbWFrZXMgc3R1ZGVudHMgZmVlbCBjb25uZWN0ZWQgdG8gb3RoZXJzIChgZmVlbF9jb25uZWN0ZWRgKSwgYW54aW91cyBvciBzdHJlc3NlZCAoYGZlZWxfaW5jcmVhc2Vfc3RyZXNzYCksIGRpc3RyYWN0cyB0aGVtIGZyb20gYWNhZGVtaWMgd29yayAoYGZlZWxfZGlzdHJhY3RlZGApLCBvciBpbXByb3ZlcyB0aGVpciBtb29kIChgZmVlbF9pbXByb3ZlZF9tb29kYCkuIAoKQXMgcGFydCBvZiB0aGUgYmlnZ2VyIHJlc2VhcmNoIHF1ZXN0aW9uLCAiSG93IGRvZXMgc29jaWFsIG1lZGlhIHVzYWdlIGluZmx1ZW5jZSB0aGUgbWVudGFsIGhlYWx0aCBvZiB1bml2ZXJzaXR5IHN0dWRlbnRzPyIsIHdlIGNhbiB1c2UgdGhpcyB2YXJpYWJsZSB0byBzdGFydCBhc2tpbmcgdGhlIHF1ZXN0aW9uLCAqKiJob3cgbWFueSBzdHVkZW50cyBmZWVsIFggYmVjYXVzZSBvZiB0aGVpciBzb2NpYWwgbWVkaWEgdXNlPyoqCgo6Ojp3YWxrdGhyb3VnaAoKTGV0J3MgZmlyc3Qgc3RhcnQgYnkgYXNraW5nLCAiaG93IG1hbnkgc3R1ZGVudHMgZmVlbCAqKmFueGlvdXMgb3Igc3RyZXNzZWQqKiBiZWNhdXNlIG9mIHNvY2lhbCBtZWRpYT8KCmBgYHtyLCBldmFsPVRSVUV9CnN0cmVzc2VkX2NvdW50IDwtIHN1cnZleV9kYXRhX3RpZHkgfD4KICBkaXN0aW5jdChJRCwgZmVlbF9xdWVzdGlvbiwgZmVlbF9yZXNwb25zZSkgfD4KICBmaWx0ZXIoZmVlbF9xdWVzdGlvbiA9PSAiZmVlbF9pbmNyZWFzZV9zdHJlc3MiKSB8PgogIGNvdW50KGZlZWxfcmVzcG9uc2UsIG5hbWUgPSAiZmVlbF9pbmNyZWFzZV9zdHJlc3MiKSB8PgogIGFycmFuZ2UoZGVzYyhmZWVsX2luY3JlYXNlX3N0cmVzcykpCgpzdHJlc3NlZF9jb3VudApgYGAKCioqU3RlcC1ieS1zdGVwIGV4cGxhbmF0aW9uOioqCgoqIFdlIHN0YXJ0IGJ5IGNyZWF0aW5nIGEgbmV3IFIgb2JqZWN0IHRoYXQgd2lsbCBzYXZlIHRoaXMgaW5mb3JtYXRpb24sIGNhbGxlZCBgc3RyZXNzZWRfY291bnRgLgoqIFdlIHRoZW4gcGlwZSB0aGUgYHN1cnZleV9kYXRhX3RpZHlgIG9iamVjdCB0byBpbmRpY2F0ZSB3ZSB3aWxsIG1hbmlwdWxhdGUgaXQgaW4gc29tZSB3YXkuCiogTmV4dCwgYGRpc3RpbmN0KElELCBmZWVsX3F1ZXN0aW9uLCBmZWVsX3Jlc3BvbnNlKWAgdGVsbHMgUiB0byBvbmx5IGtlZXAgdW5pcXVlIGNvbWJpbmF0aW9ucyBvZiBgSURgLCBgZmVlbC1xdWVzdGlvbmAsIGFuZCBgZmVlbF9yZXNwb25zZWAuCiogVGhpcyBpcyB0aGVuIHBpcGVkIHRocm91Z2ggdG8gdGhlIGBmaWx0ZXIoKWAgY29tbWFuZCwgYW5kIGBmZWVsX3F1ZXN0aW9uID09IGZlZWxfaW5jcmVhc2Vfc3RyZXNzYCBsb29rcyBmb3Igb25seSBmb3IgdGhlIHN0cmVzc2VkIHZhbHVlcyBpbiB0aGUgYGZlZWxfcXVlc3Rpb25gIGNvbHVtbi4KKiBUaGlzIGlzIHBpcGVkIGludG8gdGhlIGBjb3VudCgpYCBmdW5jdGlvbiwgdG8gaW5kaWNhdGUgd2Ugd2FudCBhIGNvdW50IG9mIGV2ZXJ5IHVuaXF1ZSBgZmVlbF9pbmNyZWFzZV9zdHJlc3NgIGFuc3dlciBpbiB0aGUgYGZlZWxfcmVzcG9uc2VgIGNvbHVtbiwgYW5kIGdpdmVzIG5hbWVzIHRoZSBuZXcgY29sdW1uIG9mIGNvdW50cyBgZmVlbF9pbmNyZWFzZV9zdHJlc3NgLgoqIEZpbmFsbHksIHRoZSBgYXJyYW5nZShkZXNjKGZlZWxfaW5jcmVhc2Vfc3RyZXMpKWAgbGluZSBhcnJhbmdlcyB0aGUgdmFsdWVzIGZyb20gYmlnZ2VzdCB0byBzbWFsbGVzdC4KCjo6OgoKIyMgWW91ciBUdXJuIQoKOjo6cXVlc3Rpb24KCkhpbnQ6IFVzZSB0aGUgY29kZSBjaHVuayBhYm92ZSB0byBndWlkZSB5b3VyIHNvbHV0aW9uLgoKMSkgSG93IG1hbnkgc3R1ZGVudHMgZmVlbCAqbW9yZSBjb25uZWN0ZWQqIGJlY2F1c2Ugb2YgdGhlaXIgc29jaWFsIG1lZGlhIHVzZT8KCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJywgZXZhbD1GQUxTRX0KY29ubmVjdGVkX2NvdW50IDwtIHN1cnZleV9kYXRhX3RpZHkgfD4KICBkaXN0aW5jdChJRCwgZmVlbF9xdWVzdGlvbiwgZmVlbF9yZXNwb25zZSkgfD4KICBmaWx0ZXIoZmVlbF9xdWVzdGlvbiA9PSAiZmVlbF9jb25uZWN0ZWQiKSB8PgogIGNvdW50KGZlZWxfcmVzcG9uc2UsIG5hbWUgPSAiZmVlbF9jb25uZWN0ZWQiKSB8PgogIGFycmFuZ2UoZGVzYyhmZWVsX2Nvbm5lY3RlZCkpCgpjb25uZWN0ZWRfY291bnQKYGBgCgoyKSBIb3cgbWFueSBzdHVkZW50cyBmZWVsICpkaXN0cmFjdGVkKiBieSB0aGVpciBzb2NpYWwgbWVkaWEgdXNlPwoKYGBge3IsIGNsYXNzLnNvdXJjZSA9ICdmb2xkLWhpZGUnLCBldmFsPUZBTFNFfQpkaXN0cmFjdGVkX2NvdW50IDwtIHN1cnZleV9kYXRhX3RpZHkgfD4KICBkaXN0aW5jdChJRCwgZmVlbF9xdWVzdGlvbiwgZmVlbF9yZXNwb25zZSkgfD4KICBmaWx0ZXIoZmVlbF9xdWVzdGlvbiA9PSAiZmVlbF9kaXN0cmFjdGVkIikgfD4KICBjb3VudChmZWVsX3Jlc3BvbnNlLCBuYW1lID0gImZlZWxfZGlzdHJhY3RlZCIpIHw+CiAgYXJyYW5nZShkZXNjKGZlZWxfZGlzdHJhY3RlZCkpCgpkaXN0cmFjdGVkX2NvdW50CmBgYAoKOjo6CgojIyBBc2tpbmcgYSBSZXNlYXJjaCBRdWVzdGlvbgoKU28gZmFyIHRoZSBxdWVzdGlvbnMgd2UgaGF2ZSBiZWVuIGFza2luZyBvZiBvdXIgZGF0YSBoYXZlIHJlbGF0ZWQgdG8gY291bnRzLCB3aGljaCBjYW4gYmUgdmVyeSBoZWxwZnVsLCBidXQgbWF5IG5vdCBnZXQgdG8gdGhlIGJpZ2dlciByZXNlYXJjaCBxdWVzdGlvbiB3ZSB3YW50IHRvIGFzay4gQXMgcGFydCBvZiB0aGUgYmlnZ2VyIHJlc2VhcmNoIHF1ZXN0aW9uLCB3ZSBtaWdodCB3YW50IHRvIGFzaywgKioiSG93IGRvZXMgaGVhdnkgdXNhZ2Ugb2Ygc29jaWFsIG1lZGlhIGFmZmVjdCBtZW50YWwgaGVhbHRoIGNvbXBhcmVkIHRvIGxpZ2h0IHVzYWdlPyoqCgpUaGVyZSB3aWxsIGJlIGEgZmV3IHN0ZXBzIHRvIGFuc3dlciB0aGlzIHF1ZXN0aW9uLCBidXQgbGV0J3MgYnJlYWsgdGhlbSBkb3duIGFuZCB0YWtlIHRoZW0gb25lIGF0IGEgdGltZToKCjEpIERlZmluZSBoZWF2eSB2cy4gbGlnaHQgdXNlcnMKMikgQmVjYXVzZSB0aGUgYGZlZWxfcmVzcG9uc2VgIHZhbHVlcyBhcmUgaW4gYSBMaWtlcnQgc2NhbGUsIHdlIG5lZWQgdG8gY29udmVydCB0aGVtIHRvIG51bWJlcnMgdG8gYWxsb3cgdXMgdG8gZ2V0IGF2ZXJhZ2VzLgozKSBHZXQgdGhlIGF2ZXJhZ2Ugc2NvcmUgZm9yIGVhY2ggYGZlZWxfcXVlc3Rpb25gIGZvciBib3RoIGxpZ2h0IGFuZCBoZWF2eSB1c2Vycy4KNCkgQ29tYmluZSB0aGUgZ3JvdXBzCjUpIFBsb3QgdGhlIGNvbXBhcmlzb24KCkxldCdzIGdldCBzdGFydGVkIQoKIyMjIERlZmluaW5nIGhlYXZ5IHZzLiBsaWdodCB1c2VycwoKSW4gdGhlIGBob3Vyc19wZXJfZGF5YCBxdWVzdGlvbiwgc3VydmV5IHJlc3BvbmRlbnRzIHdlcmUgZ2l2ZW4gZm91ciBwb3NzaWJsZSBhbnN3ZXJzOgoKKiBMZXNzIHRoYW4gMiBob3VycwoqIDItNCBob3VycwoqIDQtNiBob3VycwoqIE1vcmUgdGhhbiA2IGhvdXJzCgpGb3IgdGhlIHNha2Ugb2Ygb3VyIGFuYWx5c2lzLCBsZXQncyBzYXkgdGhhdCByZXNwb25kZW50cyB0aGF0IHNlbGVjdGVkICJMZXNzIHRoYW4gMiBob3VycyIgYW5kICIyLTQgaG91cnMiIGFyZSAqKmxpZ2h0IHVzZXJzKiosIGFuZCB0aG9zZSB0aGF0IHNlbGVjdGVkICI0LTYgaG91cnMiIGFuZCAiTW9yZSB0aGFuIDYgaG91cnMiIGFyZSAqKmhlYXZ5IHVzZXJzKiouIAoKOjo6d2Fsa3Rocm91Z2gKCkxldCdzIGNyZWF0ZSBhIG5ldyBjb2x1bW4gaW4gb3VyIGRhdGEgdG8gY2xhc3NpZnkgcmVzcG9uZGVudHMgYXMgImxpZ2h0IiBvciAiaGVhdnkiIHVzZXJzIGJhc2VkIG9uIHRoaXMgY3JpdGVyaWEuCgpgYGB7ciwgZXZhbD1UUlVFLCByZXN1bHRzPSJoaWRlIn0KCnN1cnZleV9kYXRhX3RpZHkgPC0gc3VydmV5X2RhdGFfdGlkeSB8PgogIG11dGF0ZSgKICAgIHVzYWdlX2dyb3VwID0gY2FzZV93aGVuKAogICAgICBob3Vyc19wZXJfZGF5ICVpbiUgYygiTGVzcyB0aGFuIDIgaG91cnMiLCAiMi00IGhvdXJzIikgfiAiTGlnaHQiLAogICAgICBob3Vyc19wZXJfZGF5ICVpbiUgYygiNC02IGhvdXJzIiwgIk1vcmUgdGhhbiA2IGhvdXJzIikgfiAiSGVhdnkiLAogICAgKQogICkKCmBgYAoKKipTdGVwLWJ5LXN0ZXAgZXhwbGFuYXRpb246KioKCiogYHN1cnZleV9kYXRhX3RpZHkgPC0gc3VydmV5X2RhdGFfdGlkeSB8PmAgaXMgdGVsbGluZyBSIHRoYXQgd2Ugd2FudCB0byBhZGQvZG8gc29tZXRoaW5nIG5ldyB0byBgc3VydmV5X2RhdGFfdGlkeWAgb2JqZWN0LCBhbmQgc2F2ZSBpdCBiYWNrIGludG8gdGhlIG9iamVjdC4KKiBUaGlzIGRhdGEgaXMgcGlwZWQgaW50byB0aGUgYG11dGF0ZSgpYCBmdW5jdGlvbiwgd2hpY2ggaXMgZ29pbmcgdG8gY3JlYXRlIGEgbmV3IGNvbHVtbiBpbiBvdXIgZGF0YSBjYWxsZWQgYHVzYWdlX2dyb3VwYC4KKiBFdmVyeXRoaW5nIGFmdGVyIHRoZSBgPWAgd2lsbCBiZSB3aGVyZSB3ZSBkZWZpbmUgd2hhdCBnb2VzIGludG8gdGhpcyBuZXcgY29sdW1uLgoqIFRoZSBgY2FzZV93aGVuKClgIGZ1bmN0aW9uIHdvcmtzIGluIHRoZSBmb2xsb3dpbmcgd2F5OiAiaWYgWCBjb25kaXRpb24gaXMgdHJ1ZSwgdGhlbiBkbyBZIi4gIAoqIGBob3Vyc19wZXJfZGF5ICVpbiVgIGNoZWNrcyBmb3IgdmFsdWVzIHRoYXQgYXJlIGluIHRoZSBgaG91cnNfcGVyX2RheWAgY29sdW1uLCB3aGljaCBhcmUgc3BlY2lmaWVkIGluIHRoZSBmb2xsb3dpbmcgYnJhY2tldHMuCiogVGhlIGBjYCBpbiBgYygiTGVzcyB0aGFuIDIgaG91cnMiLCAiMi00IGhvdXJzIilgIHRlbGxzIFIgd2UgYXJlIGxvb2tpbmcgZm9yIG11bHRpcGxlIHZhbHVlcyBpbiB0aGUgYGhvdXJzX3Blcl9kYXlgIGNvbHVtbiwgd2hpY2ggaW4gdGhpcyBjYXNlIGlzICJMZXNzIHRoYW4gMiBob3VycyIgYW5kICIyLTQgaG91cnMiLgoqIElmIGBob3Vyc19wZXJfZGF5YCBlcXVhbHMgZWl0aGVyIG9mIHRoZXNlIHZhbHVlcywgdGhleSB3aWxsIGJlIGdpdmUgdGhlIHZhbHVlICJMaWdodCIgaW4gdGhlIG5ldyBjb2x1bW4uCiogYGhvdXJzX3Blcl9kYXkgJWluJSBjKCI0LTYgaG91cnMiLCAiTW9yZSB0aGFuIDYgaG91cnMiKSB+ICJIZWF2eSJgIGRvZXMgdGhpcyBzYW1lIHByb2Nlc3MsIGJ1dCBpZiB0aGVzZSBuZXcgY29uZGl0aW9ucyBhcmUgbWV0LCB0aGV5IHdpbGwgYmUgZ2l2ZW4gdGhlIHZhbHVlICJIZWF2eSIgaW4gdGhlIG5ldyBjb2x1bW4uCgo6OjoKCkxldCdzIHRha2UgYSBsb29rIGF0IGBzdXJ2ZXlfZGF0YV90aWR5YCB0byBzZWUgdGhpcyBuZXcgY29sdW1uLgoKYGBge3IsIGV2YWw9RkFMU0V9ClZpZXcoc3VydmV5X2RhdGFfdGlkeSkKYGBgCgoKCiMjIyBDb252ZXJ0IEZlZWwgUmVzcG9uc2VzIHRvIE51bWJlcnMKClRoZSBmZWVsIHJlc3BvbnNlcyBhcmUgaW4gYSBMaWtlcnQvdGV4dHVhbCBmb3JtYXQsIGFuZCBjYWxjdWxhdGluZyB0aGUgYXZlcmFnZSBvZiB0ZXh0IGlzbid0IHNvbWV0aGluZyB0aGF0IGlzIHBvc3NpYmxlICh0aGUgdGV4dCBtdXN0IGJlIGNvdW50ZWQgb3IgcXVhbnRpZmllZCwgdGhlbiBjYWxjdWxhdGVkKS4gVG8gYWxsb3cgdXMgdG8gZmluZCB0aGUgYXZlcmFnZSwgd2UncmUgZ29pbmcgdG8gY3JlYXRlIGFub3RoZXIgY29sdW1uIHRoYXQgYXBwbGllcyBudW1lcmljYWwgdmFsdWVzIHRvIGVhY2ggTGlrZXJ0IHJlc3BvbnNlLgoKOjo6d2Fsa3Rocm91Z2gKCkNvbnZlcnRpbmcgTGlrZXJ0IHJlc3BvbnNlcyB0byBudW1iZXJzLgoKYGBge3IsIGV2YWw9VFJVRSwgcmVzdWx0cz0iaGlkZSJ9CnN1cnZleV9kYXRhX3RpZHkgPC0gc3VydmV5X2RhdGFfdGlkeSB8PgogIG11dGF0ZSgKICAgIGZlZWxfc2NvcmUgPSBjYXNlX3doZW4oCiAgICAgIGZlZWxfcmVzcG9uc2UgPT0gIlN0cm9uZ2x5IGRpc2FncmVlIiB+IDEsCiAgICAgIGZlZWxfcmVzcG9uc2UgPT0gIkRpc2FncmVlIiAgICAgICAgICB+IDIsCiAgICAgIGZlZWxfcmVzcG9uc2UgPT0gIk5ldXRyYWwiICAgICAgICAgICB+IDMsCiAgICAgIGZlZWxfcmVzcG9uc2UgPT0gIkFncmVlIiAgICAgICAgICAgICB+IDQsCiAgICAgIGZlZWxfcmVzcG9uc2UgPT0gIlN0cm9uZ2x5IGFncmVlIiAgICB+IDUsCiAgICApCiAgKQpgYGAKCioqU3RlcC1ieS1zdGVwIGV4cGxhbmF0aW9uOioqCgoqIGBzdXJ2ZXlfZGF0YV90aWR5IDwtIHN1cnZleV9kYXRhX3RpZHkgfD5gIGlzIHRlbGxpbmcgUiB0aGF0IHdlIHdhbnQgdG8gYWRkL2RvIHNvbWV0aGluZyBuZXcgdG8gYHN1cnZleV9kYXRhX3RpZHlgIG9iamVjdCwgYW5kIHNhdmUgaXQgYmFjayBpbnRvIHRoZSBvYmplY3QuCiogVGhlIGRhdGEgaXMgcGlwZWQgaW50byB0aGUgYG11dGF0ZSgpYCBmdW5jdGlvbiwgd2hpY2ggaXMgZ29pbmcgdG8gY3JlYXRlIGEgbmV3IGNvbHVtbi4KKiBUaGUgbmV3IGNvbHVtbiB3aWxsIGJlIGNhbGxlZCBgZmVlbF9zY29yZWAsIGFuZCB3aWxsIGNvbnRhaW4gYWxsIHRoZSBpbmZvcm1hdGlvbiBhZnRlciB0aGUgYD1gLgoqIE11Y2ggbGlrZSB0aGUgcHJldmlvdXMgZXhhbXBsZSwgd2UgYXJlIHVzaW5nIGBjYXNlX3doZW4oKWAgdG8gdGVsbCBSIHRoYXQgaWYgWCwgdGhlbiBZLgoqIEluIHRoaXMgY2FzZSBgZmVlbF9yZXNwb25zZSA9PSAiU3Ryb25nbHkgZGlzYWdyZWUiIH4gMWAsIHdlIGFyZSBzYXlpbmcsICJpZiB0aGUgYGZlZWxfcmVzcG9uc2VgIGNvbHVtbiBoYXMgYSB2YWx1ZSB0aGF0IGlzICJTdHJvbmdseSBkaXNhZ3JlZSIsIHdlIHdhbnQgdG8gYWRkIHRoZSB2YWx1ZSAiMSIgaW4gdGhlIG5ldyBjb2x1bW4uCiogUmVwZWF0IGZvciBlYWNoIHZhbHVlIGluIHRoZSBMaWtlcnQgc2NhbGUsIGFuZCB3ZSdyZSByZWFkeSB0byBjYWxjdWxhdGUhCgo6OjoKCkxldCdzIHRha2UgYW5vdGhlciBsb29rIGF0IGBzdXJ2ZXlfZGF0YV90aWR5YC4KCmBgYHtyLCBldmFsPUZBTFNFfQoKVmlldyhzdXJ2ZXlfZGF0YV90aWR5KQoKYGBgCgpXZSdyZSBnZXR0aW5nIGNsb3NlISBMZXQncyBub3cgY2FsY3VsYXRlIHRoZSBhdmVyYWdlIGZvciBsaWdodCB1c2Vycy4gV2UnbGwgZG8gdGhpcyBpbiB0d28gZGlzdGluY3Qgc3RlcHMuCgo6Ojp3YWxrdGhyb3VnaAoKU3RlcCAxOiBJc29sYXRlIGxpZ2h0IHVzZXJzIGludG8gdGhlaXIgb3duIGdyb3VwaW5nCgpgYGB7ciwgZXZhbD1UUlVFLCByZXN1bHRzPSJoaWRlIn0KbGlnaHRfdXNlcnMgPC0gc3VydmV5X2RhdGFfdGlkeSB8PgogIGZpbHRlcih1c2FnZV9ncm91cCA9PSAiTGlnaHQiKQpgYGAKCioqU3RlcC1ieS1zdGVwIGV4cGxhbmF0aW9uOioqCgoqIFdlJ3JlIGNyZWF0aW5nIGEgbmV3IFIgb2JqZWN0IGNhbGxlZCBgbGlnaHRfdXNlcnNgLCB0aGF0IHdpbGwgaGVscCB1cyBlYXNpbHkgY2FsY3VsYXRlIHZhbHVlcyBpbiB0aGlzIGdyb3VwLgoqIEFmdGVyIHBpcGluZyAgYHN1cnZleV9kYXRhX3RpZHlgLCB3ZSB1c2UgdGhlIGBmaWx0ZXIodXNlcl9ncm91cCA9PSAiTGlnaHQiKWAgdG8gc2VsZWN0IG9ubHkgdGhvc2Ugcm93cyBpbiB0aGUgYHVzZXJfZ3JvdXBgIGNvbHVtbiB0aGF0IGhhdmUgdGhlIHZhbHVlICJMaWdodCIuCgo6OjoKCldlIGNhbiB2aWV3IHRoaXMgbmV3IG9iamVjdDoKYGBge3IsIGV2YWw9RkFMU0V9ClZpZXcobGlnaHRfdXNlcnMpCmBgYAoKOjo6d2Fsa3Rocm91Z2gKClN0ZXAgMjogQ2FsY3VsYXRlIHRoZSBhdmVyYWdlIG9mIGxpZ2h0IHVzZXJzJyBmZWVsIHJlc3BvbnNlcwoKYGBge3IsIGV2YWw9VFJVRSwgcmVzdWx0cz0iaGlkZSJ9CmxpZ2h0X2F2Z3MgPC0gbGlnaHRfdXNlcnMgfD4KICBncm91cF9ieShmZWVsX3F1ZXN0aW9uKSB8PgogIHN1bW1hcmlzZSgKICAgIGF2Z19mZWVsID0gbWVhbihmZWVsX3Njb3JlKSwKICAgIC5ncm91cHMgPSAiZHJvcCIpIHw+CiAgbXV0YXRlKHVzYWdlX2dyb3VwID0gIkxpZ2h0IikKYGBgCgoqKlN0ZXAtYnktc3RlcCBleHBsYW5hdGlvbjoqKgoKKiBXZSBhcmUgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IGNhbGxlZCBgbGlnaHRfYXZnc2AgdGhhdCB3aWxsIGhvbGQgdGhlIGF2ZXJhZ2VzIGZvciBhbGwgZmVlbCByZXNwb25zZXMgZm9yIGxpZ2h0IHVzZXJzLgoqIFBpcGUgdGhlIGRhdGEgZnJvbSB0aGUgYGxpZ2h0X3VzZXJzYCBvYmplY3QgaW50byBgZ3JvdXBfYnkoZmVlbF9xdWVzdGlvbilgLCB3aGljaCB0ZWxscyBSIHRvIGNhbGN1bGF0ZSByZXN1bHRzIHNlcGFyYXRlbHkgZm9yIGVhY2ggZmVlbCBxdWVzdGlvbi4KKiBUaGlzIGlzIHBpcGVkIGludG8gdGhlIGBzdW1tYXJpc2UoKWAgZnVuY3Rpb24sIHdoaWNoIHNldHMgdXAgZm9yIHRoZSBhY3R1YWwgY2FsY3VsYXRpb24gd2Ugd2FudCB0byBjb25kdWN0LgoqIGBhdmdfZmVlbGAgd2lsbCBjcmVhdGUgYSBuZXcgY29sdW1uIHdpdGggdGhlIHZhbHVlcyBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgYD1gLgoqIGBtZWFuKGZlZWxfc2NvcmUpYCBjYWxjdWxhdGVzIHRoZSBhdmVyYWdlIHNjb3JlIGZvciBlYWNoIGZlZWwgcmVzcG9uc2UuIFRoaXMgd2lsbCBnaXZlIGEgdGFibGUgd2l0aCBvbmUgcm93IHBlciBgZmVlbF9xdWVzdGlvbmAsIGFuZCBvbmUgY29sdW1uIGNvbnRhaW5pbmcgdGhlIGF2ZXJhZ2UgZm9yIGVhY2ggKGBhdmdfZmVlbGApLgoqIGAuZ3JvdXBzID0gImRyb3AiYCB0ZWxscyBSIHRvIGdldCByaWQgb2YgdGhlIGdyb3VwaW5nIHN0cnVjdHVyZSBpdCB1c2VzIHRvIGNhbGN1bGF0ZSB0aGUgdmFsdWVzLiBJbiBwbGFpbiBsYW5ndWFnZSwgIndlJ3JlIGRvbmUgZ3JvdXBpbmcsIGdpdmUgbWUgYSByZWd1bGFyIHRhYmxlIG5vdyIuCiogVGhpcyBpcyBwaXBlZCBpbnRvIGBtdXRhdGUodXNlcl9ncm91cCA9ICJMaWdodCIpYCB0byBhZGQgYSBuZXcgY29sdW1uIHRvIHRoZSB0YWJsZSBjYWxsZWQgYHVzZXJfZ3JvdXBgLCBhbmQgZXZlcnkgcm93IHdpbGwgZ2V0IHRoZSB2YWx1ZSAiTGlnaHQiLiBUaGlzIHN0ZXAgaXMgaGVscGZ1bCBiZWNhdXNlIHdoZW4gd2UgY29tYmluZSB0aGUgbGlnaHQgYW5kIGhlYXZ5IHVzZXJzIGludG8gb25lIGRhdGFzZXQgZm9yIHBsb3R0aW5nLCB0aGlzIHdpbGwga2VlcCBhbGwgdGhlIHZhbHVlcyBzb3J0ZWQgYnkgdGhlaXIgdXNhZ2UgZ3JvdXBzLgoKOjo6CgpMZXQncyB0YWtlIGEgbG9vayBhdCB0aGUgbmV3IHRhYmxlIHdlIGNyZWF0ZWQhCgpgYGB7ciwgZXZhbD1GQUxTRX0KbGlnaHRfYXZncwpgYGAKCiMjIFlvdXIgVHVybiEKCjo6OnF1ZXN0aW9uCgpOb3cgdGhhdCB5b3UndmUgc2VlbiBob3cgdGhpcyB3b3JrcyBmb3IgdGhlIGxpZ2h0IHVzZXJzLCBzZWUgaWYgeW91IGNhbiBkbyB0aGlzIGZvciBoZWF2eSB1c2Vycy4gVGhpcyBpcyBhIHNlY3JldCBvZiB1c2luZyBhIGNvZGluZyBsYW5ndWFnZSwgd2hlcmUgeW91IGRvbid0IG5lZWQgdG8gd3JpdGUgZXZlcnkgbGluZSBmcm9tIHNjcmF0Y2gsIGFuZCB5b3UganVzdCBuZWVkIHRvIHVuZGVyc3RhbmQgY29kZSBjaHVua3MgZW5vdWdoIHRvIGtub3cgd2hhdCBwYXJ0cyB0byBjaGFuZ2UuCgoxKSBJc29sYXRlIGhlYXZ5IHVzZXJzIGludG8gdGhlaXIgb3duIGdyb3VwLCBhbmQgc2F2ZSBpdCBhcyBhbiBvYmplY3QgY2FsbGVkIGBoZWF2eV91c2Vyc2AKYGBge3IsIGNsYXNzLnNvdXJjZSA9ICdmb2xkLWhpZGUnLCBldmFsPVRSVUUsIHJlc3VsdHM9ImhpZGUifQpoZWF2eV91c2VycyA8LSBzdXJ2ZXlfZGF0YV90aWR5IHw+CiAgZmlsdGVyKHVzYWdlX2dyb3VwID09ICJIZWF2eSIpCmBgYAoKMikgQ2FsY3VsYXRlIHRoZSBhdmVyYWdlIG9mIGhlYXZ5IHVzZXJzJyBmZWVsIHJlc3BvbnNlcywgYW5kIHNhdmUgaXQgYXMgYW4gb2JqZWN0IGNhbGxlZCBgaGVhdnlfYXZnc2AuCmBgYHtyLCBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJywgZXZhbD1UUlVFLCByZXN1bHRzPSJoaWRlIn0KaGVhdnlfYXZncyA8LSBoZWF2eV91c2VycyB8PgogIGdyb3VwX2J5KGZlZWxfcXVlc3Rpb24pIHw+CiAgc3VtbWFyaXNlKAogICAgYXZnX2ZlZWwgPSBtZWFuKGZlZWxfc2NvcmUpLAogICAgLmdyb3VwcyA9ICJkcm9wIikgfD4KICBtdXRhdGUodXNhZ2VfZ3JvdXAgPSAiSGVhdnkiKQpgYGAKCjo6OgoKCiMjIyBDb21iaW5lIHRoZSBHcm91cHMKCldlJ3JlIGdldHRpbmcgY2xvc2UhIFRoZSBuZXh0IHN0ZXAgd2UgbmVlZCB0byBkbyBpcyBjb21iaW5lIHRoZSBsaWdodCBhbmQgaGVhdnkgdXNhZ2UgZ3JvdXBzIHRvIG1ha2UgaXQgdmVyeSBlYXN5IHRvIHBsb3QuIFRoaXMgY2FuIGJlIGRvbmUgd2l0aCBhIHNpbmdsZSBsaW5lIG9mIGNvZGUuCgo6Ojp3YWxrdGhyb3VnaAoKQ29tYmluaW5nIHRoZSBsaWdodCBhbmQgaGVhdnkgdXNlciBhdmVyYWdlcy4KCmBgYHtyLCBldmFsPVRSVUUsIHJlc3VsdHM9ImhpZGUifQpmZWVsX2F2Z3MgPC0gYmluZF9yb3dzKGxpZ2h0X2F2Z3MsIGhlYXZ5X2F2Z3MpCmBgYAoKKipTdGVwLWJ5LXN0ZXAgZXhwbGFuYXRpb246KioKCiogV2UncmUgY3JlYXRpbmcgYSBuZXcgUiBvYmplY3QgY2FsbGVkIGBmZWVsX2F2Z3NgIHRoYXQgd2lsbCBoYXZlIHRoZSBhdmVyYWdlcyBmb3IgYWxsIGZlZWwgcmVzcG9uc2VzIGZvciBib3RoIGxpZ2h0IGFuZCBoZWF2eSB1c2Vycy4KKiB0aGUgYGJpbmRfcm93cygpYCBmdW5jdGlvbiB0YWtlcyB0d28gb3IgbW9yZSBkYXRhIGZyYW1lcyB0aGF0IGhhdmUgdGhlICoqc2FtZSBjb2x1bW5zKiwgYW5kIGNvbWJpbmVzIHRoZW0gYnkgc3RhY2tpbmcgdGhlbSB2ZXJ0aWNhbGx5LgoqIGBsaWdodHNfYXZnc2AgYW5kIGBoZWF2eV9hdmdzYCBhcmUgdGhlIHR3byBvYmplY3RzIHRoYXQgaGF2ZSB0aGUgYXZlcmFnZXMsIGFuZCB0aGlzIHdpbGwgZWZmZWN0aXZlbHkgY29tYmluZSB0aGVtLgoKOjo6CgoKTGV0J3MgdGFrZSBhIGxvb2suCgpgYGB7ciwgZXZhbD1GQUxTRX0KZmVlbF9hdmdzCmBgYAoKIyMjIFBsb3R0aW5nIHRoZSBSZXN1bHRzCgpOb3cgdGhhdCB3ZSBoYXZlIG91ciBkYXRhIHJlYWR5IHRvIGdvLCB3ZSBjYW4gbm93IHB1dCBpdCBpbnRvIGEgcGxvdC4gRWFybGllciBpbiB0aGlzIHNlc3Npb24gd2UgdXNlZCB0aGUgYGJhcnBsb3QoKWAgZnVuY3Rpb24sIHdoaWNoIGlzIGdyZWF0IGFzIGEgcXVpY2sgd2F5IHRvIHZpc3VhbGl6ZSBkYXRhIGluIGJhciBjaGFydHMuIEhvd2V2ZXIsIGEgbXVjaCBtb3JlIHBvd2VyZnVsIHZpc3VhbGl6YXRpb24gcGFja2FnZSwgdGhhdCBpcyBwYXJ0IG9mIHRoZSBUaWR5dmVyc2UsIGlzIGdncGxvdDIuIAoKVGhpcyB3aWxsIG5vdCBiZSBhIGRlZXAgZGl2ZSBpbnRvIGdncGxvdDIsIGJ1dCBpZiB5b3UgYXJlIGludGVyZXN0ZWQgaW4gbGVhcm5pbmcgbW9yZSwgY2hlY2sgb3V0IHRoZSBzZXNzaW9uIG9uIDxhIGhyZWY9IkJsb2NrNS0yX2dncGxvdC5odG1sIj5WaXN1YWxpemF0aW9uIHdpdGggZ2dwbG90PC9hPi4KCmdncGxvdCBvZmZlcnMgYSBudW1iZXIgb2YgZGlmZmVyZW50IHZpc3VhbGl6YXRpb24gdHlwZXMsIGFuZCBhcyBpdCB3b3JrcyBpbiAibGF5ZXJzIiwgeW91IGNhbiBrZWVwIGFkZGluZyBtb3JlIGVsZW1lbnRzIHRvIHlvdXIgdmlzdWFsaXphdGlvbnMsIG1ha2luZyBpdCBhbiBleHRyZW1lbHkgcG93ZXJmdWwgYW5kIHByZWNpc2UgdG9vbC4gQXMgbWVudGlvbmVkLCB0aGlzIHdvbid0IGJlIGEgZGVlcCBkaXZlLCBidXQgd2UnbGwgdGFrZSBhIGxvb2sgYXQgd2hhdCB2aXN1YWxpemluZyBvdXIgZGF0YSBpbiBnZ3Bsb3QgY2FuIGRvIGZvciBvdXIgZGF0YS4KCjo6OndhbGt0aHJvdWdoCgpWaXN1YWxpemluZyB0aGUgcXVlc3Rpb25zICJIb3cgZG9lcyBoZWF2eSB1c2FnZSBvZiBzb2NpYWwgbWVkaWEgYWZmZWN0IG1lbnRhbCBoZWFsdGggY29tcGFyZWQgdG8gbGlnaHQgdXNhZ2U/IgoKYGBge3IsIGV2YWw9RkFMU0V9CmdncGxvdChmZWVsX2F2Z3MsIGFlcyh4ID0gZmVlbF9xdWVzdGlvbiwgeSA9IGF2Z19mZWVsLCBmaWxsID0gdXNhZ2VfZ3JvdXApKSArCiAgZ2VvbV9jb2wocG9zaXRpb24gPSAiZG9kZ2UiKQpgYGAKCioqU3RlcC1ieS1zdGVwIGV4cGxhbmF0aW9uOioqCgoqIEV2ZXJ5IHZpc3VhbGl6YXRpb24gd2l0aCBnZ3Bsb3Qgc3RhcnRzIHdpdGggdGhlIGBnZ3Bsb3QoKWAgY29tbWFuZCB0byB0ZWxsIFIgdGhhdCB3ZSdyZSBnb2luZyB0byBtYWtlIGEgcGxvdC4KKiBUaGUgZmlyc3QgZWxlbWVudCB0byBnbyBpbiB0aGUgYnJhY2tldHMgaXMgdGhlIGRhdGEgd2Ugd2FudCB0byBwbG90LCB3aGljaCBpbiB0aGlzIGNhc2UgaXMgYGZlZWxfYXZnc2AuCiogQWZ0ZXIgYSBjb21tYSBgLGAgd2UgdXNlIHRoZSBgYWVzKClgIGZ1bmN0aW9uIHRvIGRlc2NyaWJlIHRoZSBhZXN0aGV0aWNzIG9mIHdoYXQgdGhlIHBsb3Qgd2lsbCBsb29rIGxpa2UuIEluIHRoaXMgY2FzZSwgd2Ugc3BlY2lmeSB0aGF0IHRoZSB4LWF4aXMgd2lsbCBjb250YWluIGBmZWVsX3F1ZXN0aW9uYCBjb2x1bW4gaW4gdGhlIHRhYmxlLCBhbmQgdGhlIHktYXhpcyB3aWxsIGNvbnRhaW4gYGF2Z19mZWVsYCwgd2hpY2ggaXMgdGhlIGF2ZXJhZ2VzLiBgZmlsbCA9IHVzYWdlX2dyb3VwYCBpbmRpY2F0ZXMgdGhhdCB3ZSB3YW50IGVhY2ggdXNhZ2UgZ3JvdXAgdG8gYmUgZmlsbGVkIHdpdGggYSBkaWZmZXJlbnQgY29sb3VyLgoqIE5vdyB0aGF0IHdlJ3ZlIHNwZWNpZmllZCB0aGUgYWVzdGhldGljcywgd2UgaW5zZXJ0IGEgcGx1cyBzaWduIGArYCB0byBhZGQgYWRkaXRpb25hbCBlbGVtZW50cy4KKiBgZ2VvbV9jb2woKWAgc3BlY2lmaWVzIHRoZSBnZW9tLCBvciB0eXBlIG9mIGNoYXJ0IHdlIHdhbnQgdG8gbWFrZSAodGhlcmUgYXJlIG1hbnkhKSwgYW5kIGBwb3NpdGlvbiA9ICJkb2RnZSJgIHRlbGxzIFIgdGhhdCB3ZSB3YW50IGEgc2VwYXJhdGUgY29sdW1uIGZvciBsaWdodCBhbmQgaGVhdnkgdXNlcnMsIGluc3RlYWQgb2YgYSBzdGFja2VkIGNvbHVtbi4KCjo6OgoKWW91J2xsIHNlZSB0aGF0IHRoZXJlJ3Mgbm93IGEgcGxvdCBpbiB0aGUgdmlld2VyIHBhbmUgaW4gUlN0dWRpbyAoYm90dG9tIHJpZ2h0KS4gQmVmb3JlIHdlIGdldCB0byB0aGUgZGF0YSBpbnNpZ2h0cyBmcm9tIHRoZSBwbG90LCBpdCdzIHdvcnRoIG5vdGluZyB0aGF0IHRoZXJlJ3MgYW4gaXNzdWUgd2l0aCB0aGUgY2hhcnQuIE9uIHRoZSB5LWF4aXMsIHdlIHNlZSBudW1iZXJzLCB3aGljaCBhcmVuJ3QgdmVyeSBnb29kIGF0IGNvbW11bmljYXRpbmcgdGhlIExpa2VydCBzY2FsZSB3ZSdyZSB2aXN1YWxpemluZywgYW5kIHRoZSBudW1iZXJzIGVuZCBhdCAzICh0aGV5IGFyZSBjaG9wcGVkIG9mZiBiZWNhdXNlIHRoYXQncyB3aGVyZSB0aGUgYXZlcmFnZXMgc3RvcCkuIFRvIGNvbW11bmljYXRlIHRoZXNlIGZpbmRpbmdzIG1vcmUgZWZmZWN0aXZlbHksIGxldCdzIHVwZGF0ZSB0aGUgeS1heGlzIHRvIGJlIG1vcmUgZGVzY3JpcHRpdmUgYW5kIGVhc2llciB0byBpbnRlcnByZXQuCgo6Ojp3YWxrdGhyb3VnaAoKQ2xlYW5pbmcgdXAgdGhlIHktYXhpcyBvZiBvdXIgcGxvdAoKYGBge3IsIGV2YWw9RkFMU0V9CmdncGxvdChmZWVsX2F2Z3MsIGFlcyh4ID0gZmVlbF9xdWVzdGlvbiwgeSA9IGF2Z19mZWVsLCBmaWxsID0gdXNhZ2VfZ3JvdXApKSArCiAgZ2VvbV9jb2wocG9zaXRpb24gPSAiZG9kZ2UiKSArCiAgc2NhbGVfeV9jb250aW51b3VzKAogICAgYnJlYWtzID0gMTo1LAogICAgbGFiZWxzID0gYygKICAgICAgIjEgPSBTdHJvbmdseSBkaXNhZ3JlZSIsCiAgICAgICIyID0gRGlzYWdyZWUiLAogICAgICAiMyA9IE5ldXRyYWwiLAogICAgICAiNCA9IEFncmVlIiwKICAgICAgIjUgPSBTdHJvbmdseSBhZ3JlZSIKICAgICkKICApICsKICBleHBhbmRfbGltaXRzKHkgPSA1KQpgYGAKCioqU3RlcC1ieS1zdGVwIGV4cGxhbmF0aW9uOioqCgpCZWdpbm5pbmcgd2hlcmUgd2UgbGVmdCBvZmYgYXQgdGhlIGZpcnN0IHBsb3QsCgoqIFdlIGFuZCBhIHBsdXMgc2lnbiBgK2AgdG8gdGVsbCBSIHdlIHdhbnQgdG8gYWRkIGFub3RoZXIgbGF5ZXIuCiogYHNjYWxlX3lfY29udGludW91cyhgIHRlbGxzIFIgd2Ugd2FudCB0byBjaGFuZ2UgaG93IHRoZSB5LWF4aXMgbG9va3MsIGFuZCBldmVyeXRoaW5nIGluIHRoZXNlIGJyYWNrZXRzIHdpbGwgYWRkIHRvIHRoaXMuCiogYGJyZWFrcyA9IDE6NWAgdGVsbHMgUiB0aGF0IHdlIHdhbnQgdG8gcHV0IHRpY2sgbWFya3MgYXQgdGhlIHZhbHVlcyAxLCAyLCAzLCA0LCA1LiBgMTo1YCBpcyBzaG9ydGhhbmQgZm9yIGFsbCB0aGUgbnVtYmVycyBiZXR3ZWVuIDEtNS4gCiogRG9uJ3QgZm9yZ2V0IHRvIHNlcGFyYXRlIHRoZSBsaW5lIHdpdGggdGhlIGNvbW1hIGAsYCEKKiBgbGFiZWxzID0gYygiMSA9IFN0cm9uZ2x5IGRpc2FncmVlLCAuLi4pYCByZXBsYWNlcyB0aGUgbnVtYmVycyBvbiB0aGUgeS1heGlzIHdpdGggd2hhdGV2ZXIgdGV4dHVhbCBsYWJlbHMgYXJlIHB1dCBpbiB0aGUgcXVvdGF0aW9uIG1hcmtzLiBCZWNhdXNlIHdlIHNwZWNpZmllZCBgYnJlYWtzID0gMTo1YCwgaXQgd2lsbCBhY2NlcHQgZml2ZSB2YWx1ZXMuIFRoaXMgY2FuIGJlIGV4cGFuZGVkIG9yIHJlZHVjZWQgYWNjb3JkaW5nIHRvIHlvdXIgcGxvdC4KKiBUaGVyZSBhcmUgdHdvIGVuZCBicmFja2V0cyBgKSlgIHRoYXQgbmVlZCB0byBiZSBjbG9zZWQuIE9uZSBmb3IgYHNjYWxlX3lfY29udGludW91cyhgIGNvbW1hbmQsIGFuZCBvbmUgZm9yIGBsYWJlbHMgPSBjKGAuCiogQWRkIGFub3RoZXIgcGx1cyBzaWduIGArYCB0byBhZGQgYW5vdGhlciBsYXllci4KKiBgZXhwYW5kX2xpbWl0cyh5ID0gNSlgIGV4cGFuZHMgdGhlIGNoYXJ0IHRvIGZpdmUgdGljayBtYXJrcywgdG8gbWFrZSBzdXJlIHdlIGNhbiBzaG93IHRoZSBmdWxsIHNjYWxlLgoKOjo6CgojIyBZb3VyIFR1cm4KCjo6OnF1ZXN0aW9uCgpUaGUgZ29hbCBvZiB0aGlzIHF1ZXN0aW9uIGlzIHRvIHRlc3QgeW91cnNlbGYgaW4gZGVjaXBoZXJpbmcgY29kZSB0aGF0IHlvdSBtaWdodCBub3QgYmUgZmFtaWxpYXIgd2l0aC4gCgoxKSBDb3B5ICsgcGFzdGUgdGhpcyBjb2RlIGluIHlvdXIgUlN0dWRpbyBlZGl0b3IgYW5kIHJ1biBpdCB0byBzZWUgdGhlIHJlc3VsdHMuCjIpIFRyeSB0byBkZXRlcm1pbmUgd2hhdCBlYWNoIHBhcnQgb2YgdGhlIGNvZGUgaXMgZG9pbmcuCgpIaW50OiBFYWNoIGZ1bmN0aW9uYWwgZWxlbWVudCwgb3IgbGF5ZXIsIG9mIGdncGxvdCBpcyBzZXBhcmF0ZWQgYnkgdGhlIHBsdXMgc2lnbiBgK2AuCgpgYGB7ciwgZXZhbD1GQUxTRX0KYXZnX2ZlZWxfcGxvdCA8LSBnZ3Bsb3QoZmVlbF9hdmdzLCBhZXMoeCA9IGZlZWxfcXVlc3Rpb24sIHkgPSBhdmdfZmVlbCwgZmlsbCA9IHVzYWdlX2dyb3VwKSkgKwogIGdlb21fY29sKHBvc2l0aW9uID0gImRvZGdlIikgKwogIHNjYWxlX3lfY29udGludW91cygKICAgIGJyZWFrcyA9IDE6NSwKICAgIGxhYmVscyA9IGMoCiAgICAgICIxID0gU3Ryb25nbHkgZGlzYWdyZWUiLAogICAgICAiMiA9IERpc2FncmVlIiwKICAgICAgIjMgPSBOZXV0cmFsIiwKICAgICAgIjQgPSBBZ3JlZSIsCiAgICAgICI1ID0gU3Ryb25nbHkgYWdyZWUiCiAgICApCiAgKSArCiAgZXhwYW5kX2xpbWl0cyh5ID0gNSkgKwogIHNjYWxlX3hfZGlzY3JldGUoCiAgICBsYWJlbHMgPSBjKAogICAgICBmZWVsX2Nvbm5lY3RlZCAgICAgID0gIk1ha2VzIG1lIGZlZWwgY29ubmVjdGVkIiwKICAgICAgZmVlbF9kaXN0cmFjdGVkICAgICA9ICJNYWtlcyBtZSBmZWVsIGRpc3RyYWN0ZWQiLAogICAgICBmZWVsX2ltcHJvdmVkX21vb2QgID0gIkltcHJvdmVzIG15IG1vb2QiLAogICAgICBmZWVsX2luY3JlYXNlX3N0cmVzcyA9ICJJbmNyZWFzZXMgbXkgc3RyZXNzIikpICsKICBzY2FsZV9maWxsX2Rpc2NyZXRlKAogICAgbmFtZSAgID0gTlVMTCwKICAgIGxhYmVscyA9IGMoIkhlYXZ5IHVzZXJzIiwgIkxpZ2h0IHVzZXJzIikpICsKICBsYWJzKAogICAgeCAgICAgPSAiQWdyZWUgb3IgZGlzYWdyZWUgYWJvdXQgc29jaWFsIG1lZGlhIGFuZCB5b3VyIG1lbnRhbCBoZWFsdGg6IiwKICAgIHkgICAgID0gIkF2ZXJhZ2UgZmVlbGluZyByZXNwb25zZSIsCiAgICB0aXRsZSA9ICJTb2NpYWwgbWVkaWEgYW5kIG1lbnRhbCBoZWFsdGggYWNyb3NzIGxpZ2h0IGFuZCBoZWF2eSB1c2VycyIpICsKICB0aGVtZSggYXhpcy50aXRsZS55ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gMCwgdmp1c3QgPSAwLjUpKQoKYXZnX2ZlZWxfcGxvdApgYGAKCgo6OjoKCiMjIFdyYXBwaW5nIFVwCgojIyMgU2F2aW5nIGZpbGVzCgpXZSBoYXZlbid0IGdlbmVyYXRlZCBhcyBtYW55IGZpbGVzIGFzIHdlIGRpZCBpbiB0aGUgcHJldmlvdXMgc2Vzc2lvbiwgYnV0IHlvdSdsbCB3YW50IHRvIHNhdmUgdHdvIHRoaW5nczoKCjEpIFRoZSBSIHNjcmlwdCBmb3IgdGhpcyBzZXNzaW9uOiBgZmlsZSA+IHNhdmVgCjIpIFRoZSBgc3VydmV5X2RhdGFfdGlkeS5jc3ZgIGZpbGUgdGhhdCBoYXMgbmV3IGNvbHVtbnM6IApgYGB7ciwgZXZhbD1GQUxTRX0Kd3JpdGVfY3N2KHN1cnZleV9kYXRhX3RpZHksICJzdXJ2ZXlfZGF0YV9hbmFseXplZC5jc3YiKQpgYGAKMykgVGhlIGZpbmFsIHBsb3Qgd2UgY3JlYXRlZDoKYGBge3IsIGV2YWw9RkFMU0V9Cmdnc2F2ZShmaWxlbmFtZSA9ICJhdmdfZmVlbF9wbG90LnBkZiIsIAogIHBsb3QgPSBhdmdfZmVlbF9wbG90LCAKICB3aWR0aCA9IDgsIAogIGhlaWdodCA9IDYpCmBgYAoKSW4gYWRkaXRpb24gdG8gdGhlc2UgZmlsZXMsIHlvdSBjYW4gaW1hZ2luZSB0aGF0IHlvdSBtaWdodCB3YW50IHRvIHNhdmUgb3RoZXIgc25hcHNob3RzIG9mIHRoZSBkYXRhIChpZS4gYGxpZ2h0X3VzZXJzYCwgYGhlYXZ5X3VzZXJzYCwgZXRjLikuCgojIyMgUkRhdGEgRmlsZXMKCkluIGFkZGl0aW9uIHRvIHNhdmluZyBkYXRhIGZpbGVzIGFzIGAuY3N2YCwgdGhlcmUgaXMgYWxzbyB0aGUgb3B0aW9uIHRvIHNhdmUgZmlsZXMgYXMgYC5SRGF0YWAgZmlsZXMuIFdoaWxlIGEgYC5jc3ZgIGZpbGUgc2F2ZXMgdGhlIGRhdGEsIGAuUkRhdGFgIGZpbGVzIHByZXNlcnZlIGFsbCB0aGUgb2JqZWN0cyB5b3UgaGF2ZSBjcmVhdGVkIGluIHRoZSBkYXRhIGZpbGUsIGFzIHdlbGwgYXMgZGF0YSB0eXBlcyBhbmQgc3RydWN0dXJlcy4gVGhpcyB3YXNuJ3QgYXMgdXNlZnVsIGluIHRoZSBwcmV2aW91cyBzZXNzaW9uLCBiZWNhdXNlIGVhY2ggZGF0YSBmaWxlIHdlIHdlcmUgc2F2aW5nIHdhcyBhIHNuYXBzaG90IG9mIGEgdmVyc2lvbiwgYnV0IHRoaXMgZGF0YXNldCBub3cgaGFzIHNldmVyYWwgb2JqZWN0cyB0aGF0IHdlIG1pZ2h0IHdhbnQgdG8gcmV2aXNpdCBhbmQgYnVpbGQgdXBvbi4gVGhpcyBpcyBob3cgeW91IGRvIHRoaXM6CgpgYGB7ciwgZXZhbD1GQUxTRX0Kc2F2ZShzdXJ2ZXlfZGF0YV90aWR0LCAic3VydmV5X2RhdGFfYW5hbHl6ZWQuUkRhdGEiKQpgYGAKClRvIHJlYWQgaW4gYSBmaWxlIHNhdmVkIGAuUkRhdGFgIGZpbGUsIHlvdSBjYW4gdXNlIHRoZSBgbG9hZGAgY29tbWFuZDoKCmBgYHtyLCBldmFsPUZBTFNFfQpsb2FkKCJzdXJ2ZXlfZGF0YV9hbmFseXplZC5SRGF0YSIpCmBgYAoKCiMjIyBSZXZpc2l0aW5nIG91ciBmaWxlIGxpc3Q6IAoKLSBgYXZnX2ZlZWxfcGxvdC5wZGZgCi0gYHNvY2lhbC1tZWRpYS1zdXJ2ZXlfT1JJR0lOQUwuY3N2YAotIGBzb2NpYWwtbWVkaWEtc3VydmV5LmNzdmAKLSBgc3VydmV5X2FuYWx5c2lzX3NjcmlwdC5SYAotIGBzdXJ2ZXlfZGF0YV9hbmFseXplZC5jc3ZgCi0gYHN1cnZleV9kYXRhX2FuYWx5emVkLlJEYXRhYAotIGBzdXJ2ZXlfZGF0YV90aWR5LmNzdmAKLSBgc3VydmV5X2RhdGFfd2lkZS5jc3ZgCi0gYHN1cnZleV9kYXRhLlJwcm9qYAotIGBzdXJ2ZXlfY2xlYW5pbmdfc2NyaXB0LlJgCi0gYHN1cnZleS1kYXRhX2NsZWFuLWNvbHNfSURzLmNzdmAKLSBgc3VydmV5LWRhdGFfY2xlYW4tY29sc19uby1JRC5jc3ZgCgpZb3UgY2FuIHNlZSB0aGF0IHRoZXJlJ3Mgc29tZSBpbmNvbnNpc3RlbmN5IHdpdGggaG93IGZpbGVzIGFyZSBuYW1lZCAoaHlwaGVucyBgLWAgdnMgdW5kZXJzY29yZXMgYF9gKSwgYW5kIHlvdSBtaWdodCB3YW50IHRvIHRoaW5rIGFib3V0IGNyZWF0aW5nIGZvbGRlcnMgdG8gc3RhcnQgb3JnYW5pemluZyB0aGluZ3MuIFdoaWxlIHRoaXMgaXMgdGhlIGVuZCBvZiB0aGUgc2Vzc2lvbiwgZmVlbCBmcmVlIHRvIGdpdmUgdGhpcyBzb21lIHRob3VnaHQgYW5kIG1hcCBvdXQgaG93IHlvdSBtaWdodCB3YW50IHRvIHN0cnVjdHVyZSB0aGVzZSBmaWxlcyBpbiBmb2xkZXJzLCBhbmQgcG90ZW50aWFsbHkgcmVuYW1lIHRoZW4gdG8gYmV0dGVyIHN1aXQgeW91ciB1c2UuCgojIyBGaW5pc2gKCkFuZCB0aGF0J3MgaXQgZm9yIHRoZSB3b3Jrc2hvcCEgV2UgY292ZXJlZCBhIGxvdCBvZiBncm91bmQsIGJ1dCB0aGVyZSBpcyBhbHNvIGEgbG90IHRoYXQgd2Ugd2VyZW4ndCBhYmxlIHRvIGNvdmVyLiBUaGUgaG9wZSBpcyB0aGF0IHRoZXNlIHNlc3Npb25zIGhlbHBlZCBidWlsZCBzb21lIGNvbmZpZGVuY2UgaW4geW91ciBhYmlsaXR5IHRvIHdvcmsgd2l0aCBSLCBhbmQgdGhhdCB5b3UgdXNlIHRoaXMgYXMgYSBqdW1waW5nIG9mZiBwb2ludCBmb3IgeW91ciBsZWFybmluZyBqb3VybmV5LgoKCiMjIFNlc3Npb24gRmVlZGJhY2sKCkNsaWNrIG9uIHRoZSBmb2xsb3dpbmcgbGluazogW1Nlc3Npb24gZmVlZGJhY2tdKGh0dHBzOi8vdXZpYy5saWJ3aXphcmQuY29tL2Yvc3VydmV5LWRhdGEtZmVlZGJhY2spCgoKCg==</div>
<div id="footer">
    <hr />
    <div class = "inst-logos">
      <img src="images/institutions/carleton.png" />
      <img src="images/institutions/calgary.png" />
      <img src="images/institutions/ubc.png" />
      <img class="uvic"  src="images/institutions/uvic.png" />
    </div>

<br>
    <div>
      <img class = "cc-licence" src="images/institutions/CC-License.png" />
      <p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-nc/4.0/" target ="blank">Creative Commons Attribution-NonCommercial 4.0 International License</p>
</div>
<br>
Built and rendered courtesy of <a href="https://rmarkdown.rstudio.com/index.html" target ="blank">RMarkdown from RStudio</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Block8-3_SUR_Making-Sense.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
